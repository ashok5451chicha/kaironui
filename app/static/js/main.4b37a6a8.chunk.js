(this["webpackJsonpkairon-ui"]=this["webpackJsonpkairon-ui"]||[]).push([[0],{271:function(e,t,n){},272:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),o=n(182),s=n(3),i=n(45),r=n(28),l=n.n(r),d=function(e,t){var n,a={headers:{Accept:"application/json","Content-Type":"application/json"}};return localStorage.getItem("deBotTrainerToken")?(a.headers.Authorization=localStorage.getItem("deBotTrainerToken"),localStorage.getItem("deBotTrainerUserName")&&(a.headers["X-USER"]=localStorage.getItem("deBotTrainerUserName"))):localStorage.getItem("user")&&(a.headers.Authorization=localStorage.getItem("user")),t.method&&(a.method=t.method),t.formData?(a.body=new URLSearchParams(t.formData),a.headers["Content-Type"]="application/x-www-form-urlencoded"):t.fileUpload?(a.body=t.fileUpload,delete a.headers["Content-Type"]):t.args?a.body=JSON.stringify(t.args):t.cookies&&(a.credentials="include"),function(c){fetch(e,a).then((function(e){e.headers.get("authorization")&&localStorage.setItem("user",e.headers.get("authorization"));var t=e.headers.get("Content-Type")||"";return"application/x-tar"===t||"application/zip"===t||t.includes("text/csv")?(e.headers.get("content-disposition")&&(n=(n=e.headers.get("content-disposition")).indexOf('"')>-1?n.split(";")[1].split('"')[1]:n.split(";")[1].split("=")[1]),e.blob()):e.json()})).then((function(e){if(!(e.success||e instanceof Blob))throw e;n&&(t.callbackParams||(t.callbackParams={}),t.callbackParams.filename=n),c(t.success(e,t.callbackParams))})).catch((function(e){c(t.error(e))}))}},u=n(9),m=n(20),b=n.n(m),p=n(89),j={environment:"development",isStatic:!1,platform:"web",server:"",classicUIURL:"",trackingID:"",recaptchaKey:"",showClassicUIMenu:!1,apmServiceName:"",apmServerURL:""},h=n(40),f=n(1),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="<span class='inlineEl'>".concat(e,"</span>"),n={replace:function(e){var t=e.attribs,a=e.children,c=e.name;if(t)return"a"===c||"span"===c||"br"===c?void(t.style&&(t.style="")):Object(f.jsx)("span",{className:"inlineEl",children:Object(h.b)(a,n)})}};return Object(h.a)(t,n)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return e&&(t=e.slice(0,e.length).replaceAll("[",'<span class="infoEl">').replaceAll("]","</span>").replaceAll("(",'<span class="dataEl">').replaceAll(")","</span>").replaceAll("\n","<br />")),t},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return e&&(t=e.slice(0,e.length).replaceAll("{",'<span class="boldEl braceLeft">{</span>').replaceAll("}",'<span class="boldEl braceRight">}</span>')),t},x=function(e,t,n){for(var a=-1,c=0;c<e.length;c++)if(t){if(e[c][t]===n){a=c;break}}else if(e[c]===n){a=c;break}return-1===a?e:[].concat(Object(u.a)(e.slice(0,a)),Object(u.a)(e.slice(a+1,e.length)))},y=function e(t,n){if(t===n)return!0;if(!(t instanceof Object)||!(n instanceof Object))return!1;if(t.constructor!==n.constructor)return!1;for(var a in t)if(t.hasOwnProperty(a)){if(!n.hasOwnProperty(a))return!1;if(t[a]!==n[a]){if("object"!==typeof t[a])return!1;if(!e(t[a],n[a]))return!1}}for(var c in n)if(n.hasOwnProperty(c)&&!t.hasOwnProperty(c))return!1;return!0},N=function(e,t){var n=b()(e),a=b()(t),c=b.a.duration(a.diff(n));return T(c)},S=function(e,t){var n=b()(e),a=b()(t);return b.a.duration(a.diff(n)).asSeconds()},T=function(e){"object"!==typeof e&&(e=b.a.duration(e,"seconds"));var t=parseInt(e.asHours()),n=parseInt(e.asMinutes())%60,a=parseInt(e.asSeconds())%60,c="";return t>0&&(c+=1===t?t+" hour ":t+" hours "),n>0&&(c+=1===n?n+" minute ":n+" minutes "),a>0&&(c+=1===a?a+" second":a+" seconds"),""===c&&(c="Less than 1 second"),c},k=function(e,t){var n=window.URL.createObjectURL(e),a=document.createElement("a");return a.href=encodeURI(n),a.setAttribute("download",t),a.click(),a.href=null,a=null,!1},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==j.trackingID&&(p.a.set({page:e}),p.a.pageview(e))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;""!==j.trackingID&&""!==e&&""!==t&&p.a.event({category:e,action:t,label:n})},_=function(e,t){var n=void 0;e.length>0&&(n=e.reduce((function(e,n){var a={};return a[t]=e[t]+n[t],a}))[t]/e.length);return n},A=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(navigator&&"undefined"!==typeof navigator.clipboard)null===(e=navigator)||void 0===e||null===(t=e.clipboard)||void 0===t||t.writeText(n);else if(window.clipboardData){var a;null===(a=window.clipboardData)||void 0===a||a.setData("Text",n)}},E=n(44),F=Object(E.a)(),I=F,D=n(13),P="OPEN_CHAT_PANEL",R="CLOSE_CHAT_PANEL",L="SEND_CHAT_MESSAGE",U="SET_BOT_RESPONSE",M="UNSET_BOT_TYPING",B="RESET_CHAT",H=function(){return{type:R}},G=function(e){return function(t){t({type:M}),t(wn(e))}},V=function(e){return function(t){var n;t({type:U,payload:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.response})}},z=function(e){return{type:B}},q=function(e){return function(e){e({type:M}),e({type:B})}},W="POPULATE_INTENTS",K="DELETE_INTENT",Y="DELETE_UTTERANCE",Q="POPULATE_ALL_RESPONSES",J="CHANGE_SELECTED_COMPONENT",Z="CHANGE_SELECTED_INSTANCE",X="FETCHING_INSTANCE_DETAILS",$="POPULATE_INSTANCE_DETAILS",ee="ADD_INSTANCE_DETAIL",te="POPULATE_GENERATED_DATA",ne="POPULATE_HTTP_ACTIONS",ae="POPULATE_SLOTS",ce="POPULATE_ENTITIES",oe="SET_SELECTED_SLOT_DETAILS",se="POPULATE_CUSTOM_ACTIONS",ie="UPDATE_INSTANCE_ELEMENT",re="DELETE_INSTANCE_ELEMENT",le="POPULATE_SLOT_SET_ACTIONS",de="POPULATE_SLOTS_MAPPING",ue="SET_SELECTED_SLOT_MAPPING",me="TOGGLE_NEW_SLOT_MAPPING_FORM",be="ADD_UPDATE_HTTP_ACTION",pe="ADD_UPDATE_RESET_ACTION",je="DELETE_HTTP_ACTION",he="TOGGLE_NEW_HTTP_ACTION_FORM",fe="TOGGLE_NEW_SLOT_FORM",Oe="TOGGLE_NEW_RESET_SLOT_FORM",ve="ADD_UPDATE_SLOT",ge="DELETE_SLOT",xe="ADD_UPDATE_SLOT_MAPPING",ye="DELETE_SLOT_MAPPING",Ne="DELETE_RESET_ACTION",Se="POPULATE_TRAINING_EXAMPLE_SEARCH_RESULT",Te="CLEAR_TRAINING_EXAMPLE_SEARCH_RESULT",ke="ADD_UPDATE_EMAIL_ACTION",Ce="DELETE_EMAIL_ACTION",we="POPULATE_EMAIL_ACTIONS",_e="SET_SELECTED_EMAIL_ACTION_DETAILS",Ae="TOGGLE_NEW_EMAIL_ACTION_FORM",Ee="TOGGLE_EMAIL_ACTION_LOADER",Fe="ADD_UPDATE_GOOGLE_ACTION",Ie="DELETE_GOOGLE_ACTION",De="POPULATE_GOOGLE_ACTIONS",Pe="SET_SELECTED_GOOGLE_ACTION_DETAILS",Re="TOGGLE_NEW_GOOGLE_ACTION_FORM",Le=function(e){return{type:we,payload:{emailActions:null===e||void 0===e?void 0:e.data}}},Ue=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/action/email"),{success:Le,error:wn})},Me=function(e){return{type:Ee,payload:{emailActionLoader:e}}},Be=function(e,t,n){return function(a){"POST"===t.method&&w("emailAction","addEmailAction");var c=n.onSuccess,o=n.onError;a(Me(!0)),a(d("".concat(j.server,"/api/bot/").concat(e,"/action/email"),{args:Object(s.a)({},t.emailAction),method:t.method,callbackParams:t.emailAction,success:function(e,t){return function(n){n(c(e,t)),n(Me(!1))}},error:function(e){return function(t){t(o(e)),t(Me(!1))}}}))}},He=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e,t){return{type:ke,payload:{data:t,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(Ue(n))}},Ge=function(e,t,n){return function(a){w("emailAction","deleteEmailAction");var c=n.onSuccess,o=n.onError;a(d("".concat(j.server,"/api/bot/").concat(e,"/action/email/").concat(encodeURIComponent(t)),{method:"DELETE",callbackParams:{actionName:t},success:c,error:o}))}},Ve=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(Ue(n)),a(function(e){return{type:Ce,payload:{actionName:null===e||void 0===e?void 0:e.actionName}}}(t))}},ze=function(e){return{type:De,payload:{googleActions:null===e||void 0===e?void 0:e.data}}},qe=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/action/googlesearch"),{success:ze,error:wn})},We=function(e){return{type:"TOGGLE_GOOGLE_ACTION_LOADER",payload:{googleActionLoader:e}}},Ke=function(e,t,n){return function(a){"POST"===t.method&&w("googleAction","addGoogleAction");var c=n.onSuccess,o=n.onError;a(We(!0)),a(d("".concat(j.server,"/api/bot/").concat(e,"/action/googlesearch"),{args:Object(s.a)({},t.googleAction),method:t.method,callbackParams:t.googleAction,success:function(e,t){return function(n){n(c(e,t)),n(We(!1))}},error:function(e){return function(t){t(o(e)),t(We(!1))}}}))}},Ye=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e,t){return{type:Fe,payload:{data:t,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(qe(n))}},Qe=function(e,t,n){return function(a){w("googleAction","deleteGoogleAction");var c=n.onSuccess,o=n.onError;a(d("".concat(j.server,"/api/bot/").concat(e,"/action/googlesearch/").concat(encodeURIComponent(t)),{method:"DELETE",callbackParams:{actionName:t},success:c,error:o}))}},Je=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(qe(n)),a(function(e){return{type:Ie,payload:{actionName:null===e||void 0===e?void 0:e.actionName}}}(t))}},Ze=function(e){return{type:J,payload:{selectedComponent:e}}},Xe=function(e){return{type:Z,payload:{selectedInstanceName:e}}},$e=function(e){return{type:W,payload:e.data}},et=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/intents"),{method:"GET",success:$e,error:wn})},tt=function(e,t,n){w("intent","saveIntent");var a=n.onSuccess,c=n.onError;return d("".concat(j.server,"/api/bot/").concat(e,"/intents"),{args:{data:t},method:"POST",callbackParams:{intentName:t},success:a,error:c})},nt=function(e,t){return function(n){n(kn(null===e||void 0===e?void 0:e.message,"success")),n({type:K,payload:{intent:t.intentName}})}},at=function(e,t,n){w("utterance","saveUtterance");var a=n.onSuccess,c=n.onError;return d("".concat(j.server,"/api/bot/").concat(e,"/utterance"),{args:{data:t},callbackParams:{utteranceName:t},method:"POST",success:a,error:c})},ct=function(e,t){return function(n){n(kn(null===e||void 0===e?void 0:e.message,"success")),n({type:Y,payload:{utterance:t.component}})}},ot=function(e){var t,n;return{type:Q,payload:null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.utterances)||void 0===n?void 0:n.filter((function(e){return!e.form_attached}))}},st=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/utterance"),{method:"GET",success:ot,error:wn})},it=function(e){return{type:ne,payload:{httpActions:null===e||void 0===e?void 0:e.data}}},rt=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/action/httpaction"),{method:"GET",success:it,error:wn})},lt=function(e){return{type:ae,payload:{slots:null===e||void 0===e?void 0:e.data}}},dt=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/slots"),{success:lt,error:wn})},ut=function(e){return{type:ce,payload:{entities:null===e||void 0===e?void 0:e.data}}},mt=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/entities"),{success:ut,error:wn})},bt=function(e){var t,n,a=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.actions)||void 0===n?void 0:n.map((function(e){return{name:e}}));return{type:se,payload:{customActions:a}}},pt=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/actions"),{success:bt,error:wn})},jt=function(e){return{type:le,payload:{slotsSetActions:e.data}}},ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var a=t.onSuccess;n(d("".concat(j.server,"/api/bot/").concat(e,"/action/slotset"),{success:function(e){return function(t){t(jt(e)),a&&t(a())}},error:wn}))}},ft=function(e){return{type:de,payload:{slotMappings:e.data}}},Ot=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/slots/mapping"),{success:ft,error:wn})},vt=function(e,t,n){var a=n.onSuccess,c=n.onError,o=n.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/training_examples/").concat(encodeURIComponent(t)),{callbackParams:o,success:a,error:c})},gt=function(e,t,n){var a=n.onSuccess,c=n.onError,o=n.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/response/").concat(encodeURIComponent(t)),{callbackParams:o,success:a,error:c})},xt=function(e,t,n){w("intent","generateExamples");var a=n.onSuccess,c=n.onError,o="".concat(j.server,"/api/augment/paraphrases");return t&&(o+="/gpt"),d(o,{args:{data:e,api_key:t},method:"POST",success:a,error:c})},yt=function(e,t,n,a){var c=a.onSuccess,o=a.onError,i=a.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/training_examples/").concat(encodeURIComponent(n)),{args:{data:t},callbackParams:Object(s.a)({intentName:n},i),method:"POST",success:c,error:o})},Nt=function(e,t,n,a){var c=a.onSuccess,o=a.onError,i=a.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/response/").concat(encodeURIComponent(n)),{args:{data:t},callbackParams:Object(s.a)({responseText:t},i),method:"POST",success:c,error:o})},St=function(e,t,n){var a=n.onSuccess,c=n.onError,o=n.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/training_examples/").concat(encodeURIComponent(t.intent),"/").concat(encodeURIComponent(t.id)),{method:"PUT",callbackParams:Object(s.a)({data:t},o),args:{data:t.text},success:a,error:c})},Tt=function(e,t,n){var a=n.onSuccess,c=n.onError,o=n.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/training_examples"),{args:{data:t},callbackParams:Object(s.a)({id:t},o),method:"DELETE",success:a,error:c})},kt=function(e,t,n){var a={data:t.text},c=n.onSuccess,o=n.onError,i=n.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/response/").concat(encodeURIComponent(t.utterance),"/").concat(encodeURIComponent(t.id)),{method:"PUT",callbackParams:Object(s.a)({data:t},i),args:a,success:c,error:o})},Ct=function(e,t,n){var a=n.onSuccess,c=n.onError,o=n.callbackParams;return d("".concat(j.server,"/api/bot/").concat(e,"/response/false"),{args:{data:t},callbackParams:Object(s.a)({id:t},o),method:"DELETE",success:a,error:c})},wt=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e,t){return{type:xe,payload:{data:t,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(Ot(n))}},_t=function(e,t){return function(n){n(function(e,t,n){return function(a){"POST"===t.method&&w("slotMapping","addSlotMapping");var c=n.onSuccess,o=n.onError;a(d("".concat(j.server,"/api/bot/").concat(e,"/slots/mapping"),{args:Object(s.a)({},t.slotMapping),method:t.method,callbackParams:t.slotMapping,success:c,error:o}))}}(e,t,{onSuccess:function(t,n){return wt(t,n,e)},onError:wn}))}},At=function(e,t,n){return function(a){w("slotMapping","deleteSlotMapping");var c=n.onSuccess,o=n.onError;a(d("".concat(j.server,"/api/bot/").concat(e,"/slots/mapping/").concat(encodeURIComponent(t)),{method:"DELETE",callbackParams:{slotName:t},success:c,error:o}))}},Et=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(Ot(n)),a(function(e){return{type:ye,payload:{slotName:null===e||void 0===e?void 0:e.slotName}}}(t))}},Ft=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e,t){return{type:ve,payload:{data:t,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(dt(n))}},It=function(e,t){return function(n){n(function(e,t,n){return function(a){var c,o,i;if("bot"!==(null===t||void 0===t||null===(c=t.slot)||void 0===c?void 0:c.name)&&"kairon_action_response"!==(null===t||void 0===t||null===(o=t.slot)||void 0===o||null===(i=o.name)||void 0===i?void 0:i.toLowerCase())){"POST"===t.method&&w("slot","addSlot");var r=n.onSuccess,l=n.onError;a(d("".concat(j.server,"/api/bot/").concat(e,"/slots"),{args:Object(s.a)({},t.slot),method:t.method,callbackParams:t.slot,success:r,error:l}))}else a(kn("You cannot update this slot","error"))}}(e,t,{onSuccess:function(t,n){return Ft(t,n,e)},onError:wn}))}},Dt=function(e,t,n){return function(a){if("bot"!==t&&"kairon_action_response"!==(null===t||void 0===t?void 0:t.toLowerCase())){w("slot","deleteSlot");var c=n.onSuccess,o=n.onError;a(d("".concat(j.server,"/api/bot/").concat(e,"/slots/").concat(encodeURIComponent(t)),{method:"DELETE",callbackParams:{slotName:t},success:c,error:o})),a(At(e,t,{onSuccess:function(){return function(e){e(kn("Slot Mappings deleted","success"))}},onError:o}))}else a(kn("You cannot delete this slot","error"))}},Pt=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(dt(n)),a(function(e){return{type:ge,payload:{slotName:null===e||void 0===e?void 0:e.slotName}}}(t))}},Rt=function(e,t,n){var a=n.onSuccess;return d("".concat(j.server,"/api/bot/").concat(e,"/action/httpaction/").concat(encodeURIComponent(t)),{success:a,error:wn})},Lt=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={intent:t.selectedIntent,action_name:t.actionName,response:t.response,http_url:t.httpURL,request_method:t.requestMethod,auth_token:t.authToken,params_list:t.parameters};return{type:be,payload:{data:n,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(rt(n))}},Ut=function(e,t,n){"POST"===t.method&&w("httpAction","saveHttpAction");var a=n.onSuccess,c=n.onError;return d("".concat(j.server,"/api/bot/").concat(e,"/action/httpaction"),{args:{intent:t.selectedIntent,action_name:t.actionName,response:t.response,http_url:t.httpURL,request_method:t.requestMethod,auth_token:t.authToken,params_list:t.parameters||[],headers:t.headers||[]},method:t.method,callbackParams:t,success:a,error:c})},Mt=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(rt(n)),a(function(e,t){return{type:je,payload:{actionName:null===t||void 0===t?void 0:t.actionName}}}(0,t))}},Bt=function(e,t,n){w("httpAction","deleteHttpAction");var a=n.onSuccess,c=n.onError;return d("".concat(j.server,"/api/bot/").concat(e,"/action/httpaction/").concat(encodeURIComponent(t)),{method:"DELETE",callbackParams:{actionName:t},success:a,error:c})},Ht=function(e,t,n){var a=n.onSuccess,c=n.onError,o="reset_slot"===t.type?{}:{value:t.value};return d("".concat(j.server,"/api/bot/").concat(e,"/action/slotset"),{args:Object(s.a)({name:t.name,slot:t.slot,type:t.type},o),method:t.method||"POST",callbackParams:t,success:a,error:c})},Gt=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={name:t.name,slot:t.slot,type:t.type,value:t.value};return{type:pe,payload:{data:n,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(ht(n))}},Vt=function(e,t,n){var a=n.onSuccess,c=n.onError;return d("".concat(j.server,"/api/bot/").concat(e,"/action/slotset/").concat(encodeURIComponent(t)),{method:"DELETE",callbackParams:{name:t},success:a,error:c})},zt=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(ht(n)),a(function(e,t){return{type:Ne,payload:{name:null===t||void 0===t?void 0:t.name}}}(0,t))}},qt=function(e,t,n){return function(e,a){var c=n.onSuccess;n.onError;e(c({data:a().storyComponents.slotsSetActions.find((function(e){return t===e.name}))}))}},Wt=function(e){return{type:$,payload:{instanceDetails:e.data}}},Kt=function(){return{type:te,payload:{data:[]}}},Yt=function(e){return function(t){for(var n,a=[],c="",o=0;o<e.data.length;o++)null!==e.data[o]._id?(a.push({_id:e.data[o]._id,text:e.data[o].text}),""===c&&(c=e.data[o].message)):c="Some of the ".concat(e.data[o].message);var s=c.includes("Some of the")?"error":"success",i=1===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)?c.replace("Some of the ",""):c;t(kn(i,s)),t({type:ee,payload:{data:a}}),t(Kt())}},Qt=function(e,t){return function(n){var a=e.data._id,c=t.responseText;n(kn(e.message,"success")),n({type:ee,payload:{data:[{_id:a,value:{text:c}}]}})}},Jt=function(e){var t;return{type:te,payload:{data:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.paraphrases)||[]}}},Zt=function(e,t,n){return function(a){switch(a({type:X}),n){case"intent":a(vt(e,t,{onSuccess:Wt,onError:wn}));break;case"utterance":a(gt(e,t,{onSuccess:Wt,onError:wn}));break;case"action":a(Rt(e,t,{onSuccess:Wt,onError:wn}));break;case"slot":a({type:oe,payload:{slotName:t}});break;case"reset_slots":a(ht(e,{onSuccess:function(){return qt(0,t,{onSuccess:Wt,onError:wn})}}));break;case"mapped_slot":a(function(e){return{type:ue,payload:{slotName:e}}}(t));break;case"email_action":a({type:_e,payload:{emailAction:t}});break;case"google_action":a({type:Pe,payload:{googleAction:t}})}}},Xt=function(e,t,n,a){return function(c){switch(n){case"intent":c(function(e,t){return w("intent","deleteIntent"),d("".concat(j.server,"/api/bot/").concat(e,"/intents/").concat(encodeURIComponent(t),"/true"),{method:"DELETE",callbackParams:{intentName:t},success:nt,error:wn})}(e,t));break;case"utterance":c(function(e,t){return w("utterance","deleteUtterance"),d("".concat(j.server,"/api/bot/").concat(e,"/response/true"),{args:{data:t.name},callbackParams:{component:t},method:"DELETE",success:ct,error:wn})}(e,a));break;case"action":c(Bt(e,t,{onSuccess:function(t,n){return Mt(t,n,e)},onError:wn}));break;case"slot":c(Dt(e,t,{onSuccess:function(t,n){return Pt(t,n,e)},onError:wn}));break;case"reset_slots":c(Vt(e,t,{onSuccess:function(t,n){return zt(t,n,e)},onError:wn}));break;case"mapped_slot":c(At(e,t,{onSuccess:function(t,n){return Et(t,n,e)},onError:wn}));break;case"email_action":c(Ge(e,t,{onSuccess:function(t,n){return Ve(t,n,e)},onError:wn}));break;case"google_action":c(Qe(e,t,{onSuccess:function(t,n){return Je(t,n,e)},onError:wn}))}}},$t=function(e,t){return function(n){var a=t.data,c={_id:a.id};a.intent?c.text=a.text:c.value={text:a.text},n({type:ie,payload:c}),n(kn(e.message,"success"))}},en=function(e,t){return function(n){var a=t.id;n({type:re,payload:{id:a}}),n(kn(e.message,"success"))}},tn=function(e,t,n){return function(t){t(kn(null===e||void 0===e?void 0:e.message,"success")),t(Tn()),t(et(n))}},nn=function(e,t,n){return function(t){var a;t((a=e.message,function(e){e(Tn()),e(kn(a,"success"))})),t(st(n))}},an=function(e,t,n){return function(a){var c,o,s;if(null!==(c=t.dataName)&&void 0!==c&&c.match(/^\w+$/))switch(n){case"intent":(null===t||void 0===t||null===(o=t.dataName)||void 0===o?void 0:o.length)>0?(a(Sn()),a(tt(e,t.dataName,{onSuccess:function(t,n){return tn(t,0,e)},onError:wn}))):a(kn("Intent Name cannot be empty or blank spaces","error"));break;case"utterance":if((null===t||void 0===t||null===(s=t.dataName)||void 0===s?void 0:s.length)>0){var i=t.dataName.replace("utter_","");i="utter_".concat(i),a(Sn()),a(at(e,i,{onSuccess:function(t,n){return nn(t,0,e)},onError:wn}))}else a(kn("Utterance cannot be empty or blank spaces","error"))}else a(kn("Name cannot have special characters other than _","error"))}},cn=function(e){var t,n,a;return 0===(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.searched_items)||void 0===n?void 0:n.length)&&e.data.searched_items.push({text:"No matching training examples found"}),{type:Se,payload:{searchResultList:(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.searched_items)||[]}}},on={back:"Back",close:"Close",last:"Got It",next:"Next",open:"Help",skip:"Skip"},sn=function(e){switch(e){case"/bots":return{steps:[{target:"#jride-bot-0",title:"The Bot",content:Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"This section represents your bot. By clicking on 'View', you will be able to access all the bot specific actions like Training, Deploying, Chat History, Analytics and much more."}),Object(f.jsx)("p",{children:"Click on NEXT to continue."})]}),disableBeacon:!0},{target:"#jride-bots-addbutton",title:"Add New Bot",content:"You can add multiple bots by clicking this new button.",disableBeacon:!0},{target:"#jride-home-sidemenu",title:"Navigations",content:Object(f.jsx)("div",{children:Object(f.jsx)("p",{children:"This navigation menu will allow you to navigate through your Chatbots page, Profile page, Settings, etc. You can always use the help section if you get stuck at some point."})}),placement:"right",spotlightPadding:0,disableBeacon:!0}]};case"/bot/:botId":return{manuallyControlled:!0,steps:[{target:"#jride-navbar-menu",title:"Navigation Menu",content:"Navigate between different screens of the application through this menu. (e.g., Stories, Chat History, Analytics, etc.)",disableBeacon:!0,placement:"right",spotlightPadding:0},{target:"#jride-topbar-breadcrumb",title:"Switch Bots",content:"Switch between your bots using the menu here.",disableBeacon:!0},{target:"#jride-conversations-list",title:"Conversations",content:"Conversations are the backbone of your bot. They define how your chats should flow.",disableBeacon:!0},{target:"#jride-topbar-train",title:"Train Bot",content:"Use the Train Bot button to train your model after adding relevant stories.",disableBeacon:!0},{target:"#jride-chatpanel",title:"Test your bot",content:"Test your bot here after training has completed.",disableBeacon:!0,placement:"left",spotlightPadding:0}]};case"/bot/:botId/components":return{steps:[{target:"#jride-components-tabs",title:"Story Components",content:Object(f.jsxs)("div",{children:["Components are the building blocks of your stories. They are the elements that make up your story. The basic types of components are:",Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:"Intents - Similar user inputs are grouped under a particular intent."}),Object(f.jsx)("li",{children:"Utterances - Bot responses are grouped under utterance."})]}),Object(f.jsxs)("p",{children:["For info on Actions and Slots,"," ",Object(f.jsx)("a",{href:"http://kairon-docs.digite.com/",target:"_blank",rel:"noreferrer",className:"tooltip-link",children:"click here"}),"."]})]}),disableBeacon:!0},{target:"#jride-components-list",title:"List of all components",content:"Here you'll find the list of components added under each type.",disableBeacon:!0,placement:"right"},{target:"#jride-components-listdetails",title:"Details of selected components",content:"This is where you configure your components. e.g., Training Phrases for Intents, Responses for Utterances, etc.",disableBeacon:!0},{target:"#jride-components-relatedstories",title:"Related stories",content:"Here you'll find the list of stories which includes the selected component.",disableBeacon:!0,placement:"left"}]};default:return null}},rn="BDROP_SET",ln="BDROP_UNSET",dn="SNACK_SET",un="SNACK_UNSET",mn="OVERLAY_SET",bn="OVERLAY_UNSET",pn="FULLSCREEN_LOADER_SET",jn="FULLSCREEN_LOADER_UNSET",hn="SET_SELECTED_BOTID",fn="TOGGLE_FEEDBACK_WIDGET",On="START_ONBOARDING_TOUR",vn="STOP_ONBOARDING_TOUR",gn="INCREMENT_TOUR_STEP",xn="DECREMENT_TOUR_STEP",yn="POPULATE_UI_CONFIGS",Nn="NULL_ACTION",Sn=function(){return{type:rn}},Tn=function(){return{type:ln}},kn=function(e,t){return{type:dn,payload:{message:e,severity:t}}},Cn=function(){return{type:Nn}},wn=function(e){return function(t){var n=e.message;t(kn(n&&"string"===typeof n?n:"Something went wrong!","error")),t(Tn())}},_n=function(){return kn("We are building this. Stay tuned.","info")},An=function(){return{type:mn}},En=function(){return{type:bn}},Fn=function(e){return{type:yn,payload:{uiConfigs:e.data}}},In=function(e,t){return function(e){var n=t.data,a=t.showMsg;e({type:yn,payload:{uiConfigs:n}}),a&&e(kn("Config Saved!","success"))}},Dn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){var c=a().global,o=t.showMsg,i=void 0===o||o,r=Object(s.a)(Object(s.a)({},c.uiConfigs),e);n(d("".concat(j.server,"/api/account/config/ui"),{method:"PUT",args:{data:Object(s.a)({},r)},callbackParams:{data:r,showMsg:i},success:In,error:wn}))}},Pn=function(e){return{type:fn,payload:{show:e}}},Rn=function(){return function(e){return e(kn("Thanks for your feedback!","success"))}},Ln=function(e){return function(t){var n=sn(e);n||t(kn("No tour available for the page.","info")),w("helpTour",e),t({type:On,payload:{data:n,tour:e}}),t(H()),"/bot/:botId/components"===e&&t((function(e,t){var n;e(Ze(0));var a=t().storyComponents;if((null===a||void 0===a||null===(n=a.intents)||void 0===n?void 0:n.length)>0){var c=null===a||void 0===a?void 0:a.intents[0];c.name&&e(Xe(c.name))}}))}},Un=function(e){return function(t){if(e){var n=function(e){switch(e){case"/bots":return{uiConfigProperty:"homeTourDone"};case"/bot/:botId":return{uiConfigProperty:"storiesTourDone"};case"/bot/:botId/components":return{uiConfigProperty:"componentsTourDone"};default:return null}}(e.activeTour).uiConfigProperty;n&&t(Dn(Object(D.a)({},n,!0),{showMsg:!1}))}t({type:vn})}},Mn=function(){return{type:gn}},Bn=function(){return{type:jn}},Hn="LOAD_USER_DATA_SUCCESS",Gn="LOAD_USER_DATA_FAIL",Vn="POPULATE_SSO_ENABLED_LOGINS",zn="BOOK_A_DEMO_LOADING",qn="BOOK_A_DEMO_SUCCESS",Wn=function(){return function(e){localStorage.removeItem("user"),e(En()),e({type:Gn})}},Kn=function(e){return function(t){t({type:Hn,payload:e.data.user}),t(En())}},Yn=function(){return function(e){e(d("".concat(j.server,"/api/user/details"),{success:Kn,error:Wn})),e(d("".concat(j.server,"/api/account/config/ui"),{success:Fn,error:Cn}))}},Qn=function(e){return I.push("/login"),wn(e)},Jn=function(e){return function(t){t(kn(e.message,"success")),t(Tn()),I.push("/login")}},Zn=function(e){return function(t){localStorage.setItem("user","Bearer ".concat(e.data.access_token)),location.reload()}},Xn=function(){return function(e){e(An()),localStorage.removeItem("user"),localStorage.removeItem("deBotTrainerToken"),localStorage.removeItem("deBotTrainerUserName"),location.reload()}},$n=function(e,t){return function(){var n=Object(i.a)(l.a.mark((function n(a){var c,o,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.formData,o=Object(s.a)(Object(s.a)({},c),{},{ip:null===e||void 0===e?void 0:e.ip}),n.prev=2,n.next=5,fetch("https://kairon-noti.digite.com/lambda/notification",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 5:return i=n.sent,n.next=8,i.json();case 8:n.sent,a((function(e){e({type:qn}),e(kn("Your response has been recorded. We'll contact you soon!","success")),I.push("/signup")})),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),a(wn({message:{}}));case 15:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}()},ea=function(e){return{type:Vn,payload:{ssoEnabledLogins:null===e||void 0===e?void 0:e.data}}},ta=function(e){return function(t){localStorage.setItem("user","Bearer ".concat(e.data.access_token)),t(Yn()),t(Bn())}},na=function(e){return function(t){w("ssoError",JSON.stringify(null===e||void 0===e?void 0:e.message)),t(wn(e)),t(Bn()),I.push("/login")}},aa=n(12),ca=n(356),oa=n(341),sa=n(6),ia=n(100),ra=n(15),la=function(){var e="usragree",t=Object(a.useState)(!0),n=Object(sa.a)(t,2),c=n[0],o=n[1],s=Object(aa.d)((function(e){var t;return null===e||void 0===e||null===(t=e.global)||void 0===t?void 0:t.uiConfigs}));return Object(f.jsx)(a.Fragment,{children:c&&"y"!==localStorage.getItem(e)&&Object(f.jsxs)("div",{className:"ui-cookie-card",children:[Object(f.jsxs)("div",{className:"cookieCard-head",children:[Object(f.jsx)(ia.b,{className:"cookie-icon"}),Object(f.jsx)("h3",{className:"cookieCard-title",children:"Cookies..."})]}),Object(f.jsxs)("p",{className:"cookie-msg",children:["We use cookies to ensure you get the best experience on our website. By continuing to browse our site, you accept our cookie policy."," ",Object(f.jsx)(ra.a,{to:"/cookies",className:"read-link",children:"Read more"})]}),Object(f.jsxs)("button",{type:"button",className:"cookie-accept-button",onClick:function(){localStorage.setItem(e,"y"),o(!1)},children:["Yay!",Object(f.jsx)("img",{src:"/assets/images/cookie".concat("dark"===(null===s||void 0===s?void 0:s.theme)?"1":"",".svg"),alt:"Cookie",className:"bite"})]})]})})},da=n(10),ua=n(17),ma=n(165),ba=[{name:"Chatbots",link:"/bots",Icon:ua.g},{name:"Profile",link:"/profile",Icon:ua.B},{name:"Settings",link:"/settings",Icon:da.B}],pa=function(e){var t,n,c=e.children,o=e.auth,s=e.bots,i=e.global,r=e.onLogout,l=e.toggleFeedbackWidget,d=e.pageTitle,u=e.startBotsTour,m=window.location.pathname,b=o.userData,p=s.botsList,h=s.botsFetched,O=i.uiConfigs,v="".concat(null===b||void 0===b?void 0:b.first_name," ").concat(null===b||void 0===b?void 0:b.last_name),g="".concat(null===b||void 0===b||null===(t=b.first_name)||void 0===t?void 0:t.charAt(0)).concat(null===b||void 0===b||null===(n=b.last_name)||void 0===n?void 0:n.charAt(0)),x=function(e){var t="/bots"===e.path?[{Icon:da.t,name:"Take a tour",isTour:!0}]:[];return[].concat(t,[{Icon:ua.h,name:"Join us on Discord",link:"https://discord.gg/AUFe5Z6QgZ",trackingCategory:"discordHelpMenu"},{Icon:ua.C,name:"Getting Started",link:"https://www.digite.com/kairon/getting-started",trackingCategory:"gettingStarted"},{Icon:ua.k,name:"Server Documentation",link:"http://kairon-docs.digite.com/",trackingCategory:"serverDocumentation"},{Icon:da.u,name:"kairon@digite.com",link:"mailto:kairon@digite.com",trackingCategory:"contactUs"}])}({path:m});return Object(a.useEffect)((function(){var e="Kairon - AI Powered Contextual Chatbot Builder";document.title=d?"".concat(d," | ").concat(e):e}),[d]),Object(a.useEffect)((function(){!h||1!==p.length||null!==O&&void 0!==O&&O.homeTourDone||"Hi-Hello"===p[0].name&&setTimeout(u,2e3)}),[h]),Object(f.jsxs)("div",{className:"home-layout",children:[Object(f.jsxs)("div",{className:"hl-navbar",children:[Object(f.jsxs)("div",{className:"hl-logo",children:[Object(f.jsx)(ra.a,{to:"/bots",children:Object(f.jsx)("img",{src:"/assets/logo/logo.svg",alt:"Kairon",className:"logo"})}),Object(f.jsx)(ra.a,{to:"/bots",children:Object(f.jsx)("img",{src:"/assets/logo/kAIron.svg",alt:"KAIron",className:"text"})}),Object(f.jsxs)("span",{className:"digite-text",children:["Powered by"," ",Object(f.jsx)("a",{href:"https://www.digite.com/",target:"_blank",rel:"noreferrer",className:"digite-link",children:"Digit\xe9"})]})]}),b&&Object(f.jsxs)("div",{className:"hl-userinfo",children:[Object(f.jsx)("div",{className:"user-photo-wrapper",children:Object(f.jsx)("span",{className:"user-initials",children:g})}),Object(f.jsx)("span",{className:"user-name",children:v})]})]}),Object(f.jsxs)("div",{className:"hl-content",children:[Object(f.jsxs)("div",{className:"hl-sidepanel",id:"jride-home-sidemenu",children:[Object(f.jsxs)("div",{className:"sidepanel-links",children:[ba.map((function(e,t){var n=e.link,a=e.name,c=e.Icon;return Object(f.jsxs)(ra.a,{to:n,className:"side-link ".concat(m===n?"link-selected":""),children:[Object(f.jsx)(c,{className:"link-icon"}),Object(f.jsx)("span",{className:"link-text",children:a})]},t)})),Object(f.jsxs)("div",{className:"help-wrapper",children:[Object(f.jsxs)("div",{className:"side-link",children:[Object(f.jsx)(da.r,{className:"link-icon"}),Object(f.jsxs)("span",{className:"link-text sl-submenu",children:["Help",Object(f.jsx)(da.e,{className:"expand-icon"})]})]}),Object(f.jsx)("div",{className:"help-links",children:x.map((function(e,t){var n=e.Icon,c=e.name,o=e.isTour,s=e.link,i=e.trackingCategory;return Object(f.jsx)(a.Fragment,{children:o?Object(f.jsxs)("div",{className:"help-link",onClick:u,children:[Object(f.jsx)(n,{className:"icon"}),Object(f.jsx)("span",{className:"text",children:c})]}):Object(f.jsxs)("a",{className:"help-link",href:s,onClick:function(){return w("help",i)},target:"_blank",rel:"noreferrer",children:[Object(f.jsx)(n,{className:"icon"}),Object(f.jsx)("span",{className:"text",children:c})]})},t)}))})]}),Object(f.jsxs)("div",{className:"side-link",onClick:function(){l(!0)},children:[Object(f.jsx)(da.m,{className:"link-icon"}),Object(f.jsx)("span",{className:"link-text",children:"Feedback"})]}),j.showClassicUIMenu&&Object(f.jsxs)("a",{href:j.classicUIURL,className:"side-link",children:[Object(f.jsx)(ma.a,{className:"link-icon"}),Object(f.jsx)("span",{className:"link-text",children:"Classic Kairon"})]})]}),Object(f.jsx)("div",{className:"logout-wrapper",children:Object(f.jsxs)("button",{type:"button",className:"side-link logout-button",onClick:r,children:[Object(f.jsx)(ua.q,{className:"link-icon"}),Object(f.jsx)("span",{className:"link-text",children:"Logout"})]})})]}),Object(f.jsx)("div",{className:"hl-children",children:c})]}),Object(f.jsx)(la,{})]})},ja=Object(aa.b)((function(e){return{auth:e.auth,bots:e.bots,global:e.global}}),(function(e){return{onLogout:function(){return e(Xn())},toggleFeedbackWidget:function(t){return e(Pn(t))},startBotsTour:function(){return e(Ln("/bots"))}}}))(pa),ha="GENERATE_TOKEN",fa="POPULATE_TOKEN",Oa="POPULATE_ENDPOINTS",va="DELETE_ENDPOINT",ga=function(e,t){var n=t.onSuccess,a=t.onError;return d("".concat(j.server,"/api/auth/").concat(e,"/integration/token"),{success:n,error:a})},xa=function(e){var t;return{type:fa,payload:{token:(null===(t=e.data)||void 0===t?void 0:t.access_token)||""}}},ya=function(e){return function(t){var n;t(Tn()),t({type:Oa,payload:{data:(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.endpoint)||{}}})}},Na=function(e){return function(t){t(Sn()),t(d("".concat(j.server,"/api/bot/").concat(e,"/endpoint"),{success:ya,error:wn}))}},Sa=function(e,t){return function(n){var a=t.botId;n(Na(a)),n(kn(e.message,"success"))}},Ta=function(e,t){return function(n){var a=t.endpoint;n(kn(e.message,"success")),n(Tn()),n({type:va,payload:{endpoint:a}})}},ka=n(322),Ca=function(e){var t=e.children,n=e.copyButtonLabel,c=e.foldable,o=Object(a.useState)(!1),s=Object(sa.a)(o,2),r=s[0],d=s[1],u=Object(a.useState)(!1),m=Object(sa.a)(u,2),b=m[0],p=m[1],j=Object(aa.d)((function(e){var t;return null===e||void 0===e||null===(t=e.global)||void 0===t?void 0:t.uiConfigs})),h=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!0),!Array.isArray(t)){e.next=4;break}return A(t.join("")),e.abrupt("return");case 4:A(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"ui-codeblock ".concat(c&&!b?"foldable-codeblock":""),children:[Object(f.jsx)("div",{className:"cb-actions",children:Object(f.jsx)(ka.a,{title:r?"Copied!":n,placement:"top",enterDelay:0,children:Object(f.jsx)("div",{className:"icon-button-clear action",role:"button",tabIndex:0,onMouseLeave:function(){return setTimeout((function(){return d(!1)}),100)},children:Object(f.jsx)(da.j,{className:"ibc-icon",onClick:h})})})}),Object(f.jsx)("div",{className:"ui-code",children:Object(f.jsx)("code",{children:t})}),c&&Object(f.jsx)("div",{className:"show-fullcode-wrapper",style:{background:"linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, var(--".concat("dark"===(null===j||void 0===j?void 0:j.theme)?"font1":"bg",") 100%)")},children:Object(f.jsx)("button",{type:"button",className:"show-button",onClick:function(){return p(!b)},children:b?"Hide":"Show"})})]})};Ca.defaultProps={copyButtonLabel:"Copy Code",foldable:!1};var wa=Ca,_a=n(325),Aa=n(326),Ea=n(327),Fa=n(328),Ia=n(329),Da=function(e){var t=e.title,n=e.children,a=e.open,c=e.onClose,o=e.onConfirm,s=e.noDialogActions,i=e.className,r=e.maxWidth;return Object(f.jsxs)(_a.a,{open:a,onClose:c,className:i,maxWidth:r,fullWidth:!0,children:[Object(f.jsx)(Aa.a,{children:t}),Object(f.jsx)(Ea.a,{children:n}),!s&&Object(f.jsxs)(Fa.a,{children:[Object(f.jsx)(Ia.a,{onClick:c,color:"secondary",children:"Cancel"}),Object(f.jsx)(Ia.a,{onClick:o,color:"primary",autoFocus:!0,children:"Proceed"})]})]})};Da.defaultProps={open:!1,title:"",children:"",onConfirm:function(){},noDialogActions:!1,className:"",maxWidth:"sm"};var Pa=Da,Ra=n(330),La=n(108),Ua=function(e){var t=e.onClick,n=e.onFailure,a=e.children,c=e.buttonComponent,o=e.buttonProps,r=e.action,d=Object(La.b)().executeRecaptcha,u=function(){var e=Object(i.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d(r);case 5:""!==e.sent?t():n(),e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(2),console.log(e.t0),null===e.t0||void 0===e.t0||null===(a=e.t0.message)||void 0===a||!a.includes("Invalid site key or not loaded in api.js:")){e.next=15;break}return t(),e.abrupt("return");case 15:n();case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(c,Object(s.a)(Object(s.a)({},o),{},{onClick:u,children:a}))},Ma=n(331),Ba=n(332),Ha=n(363),Ga=n(333),Va=function(e){var t=e.meta,n=Object(a.useState)(!1),c=Object(sa.a)(n,2),o=c[0],i=c[1];Object(a.useEffect)((function(){e.value?i(e.value):(i(!1),e.onChange(!1))}),[]);return Object(f.jsx)(Ra.a,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,xl:e.grid.xl,children:Object(f.jsx)("div",{className:"ff-component-container ".concat(e.className),style:Object(s.a)({},e.style),children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",error:!!t.error&&t.touched,children:[Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{onClick:function(){i(!o),e.onChange(!o)},value:o,name:e.name,color:"primary",size:e.size,checked:o}),label:e.label,labelPlacement:e.labelPlacement}),Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-helper-text"),children:e.helperText}),t.error&&t.touched&&Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-Error"),children:t.error})]})})})};Va.defaultProps={className:"",style:{},helperText:"",labelPlacement:"end",size:"small",grid:{xs:12,sm:12,md:12,lg:12,xl:12}};var za=Va,qa=n(366),Wa=n(360),Ka=function(e){var t=e.meta;return Object(f.jsx)(Ra.a,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,xl:e.grid.xl,children:Object(f.jsx)("div",{className:"ff-component-container ".concat(e.className),style:Object(s.a)({},e.style),children:Object(f.jsxs)(Ma.a,{component:"fieldset",className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:e.name,className:"ff-component-label",children:e.label}),Object(f.jsx)(qa.a,{name:e.name,onChange:e.onChange,value:e.value,onBlur:e.onBlur,children:e.options.map((function(t,n){return Object(f.jsx)(Ba.a,{value:t.value,control:Object(f.jsx)(Wa.a,{id:"".concat(e.name,"-").concat(n),color:"primary",size:e.size}),label:t.label,labelPlacement:e.labelPlacement},n)}))}),Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-helper-text"),children:e.helperText}),t.error&&t.touched&&Object(f.jsx)("div",{children:Object(f.jsx)("span",{className:"ff-error",children:t.error})})]})})})};Ka.defaultProps={className:"",style:{},helperText:"",size:"small",labelPlacement:"end",options:[],grid:{xs:12,sm:12,md:12,lg:12,xl:12}};var Ya=Ka,Qa=n(361),Ja=n(337),Za=function(e){var t=e.meta;return Object(f.jsx)(Ra.a,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,xl:e.grid.xl,children:Object(f.jsx)("div",{className:"ff-component-container ".concat(e.className),style:Object(s.a)({},e.style),children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:e.name,className:"ff-component-label",children:e.label}),Object(f.jsxs)(Qa.a,{value:e.value,onChange:e.onChange,onBlur:e.onBlur,name:e.name,displayEmpty:!0,id:e.name,variant:"outlined",error:!!t.error&&t.touched,fullWidth:!0,readOnly:e.readOnly,children:[Object(f.jsx)(Ja.a,{value:"",disabled:!0,children:e.placeholder}),e.options.map((function(e){return Object(f.jsx)(Ja.a,{value:e.value,children:Object(f.jsxs)("span",{className:"ff-select-item",children:[e.icon&&("string"===typeof e.icon?Object(f.jsx)("img",{src:e.icon,className:"ff-select-icon",alt:""}):e.icon),e.label]})},e.value)}))]}),Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-helper-text"),children:e.helperText}),t.error&&t.touched&&Object(f.jsx)("div",{children:Object(f.jsx)("span",{className:"ff-error",children:t.error})})]})})})};Za.defaultProps={className:"",style:{},readOnly:!1,placeholder:"Select",textFieldSize:"small",helperText:"",options:[],grid:{xs:12,sm:12,md:12,lg:12,xl:12}};var Xa=Za,$a=n(338),ec=function(e){var t=e.meta,n=Object(a.useState)(!1),c=Object(sa.a)(n,2),o=c[0],i=c[1];Object(a.useEffect)((function(){e.value?i(e.value):(i(!1),e.onChange(!1))}),[e.value]);return Object(f.jsx)(Ra.a,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,xl:e.grid.xl,children:Object(f.jsx)("div",{className:"ff-component-container ".concat(e.className),style:Object(s.a)({},e.style),children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",error:!!t.error&&t.touched,children:[Object(f.jsx)(Ba.a,{control:Object(f.jsx)($a.a,{onClick:function(){i(!o),e.onChange(!o)},value:o,name:e.name,color:"primary",size:e.size,checked:o}),label:e.label,labelPlacement:e.labelPlacement}),Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-helper-text"),children:e.helperText}),t.error&&t.touched&&Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-Error"),children:t.error})]})})})};ec.defaultProps={className:"",style:{},helperText:"",size:"small",labelPlacement:"end",grid:{xs:12,sm:12,md:12,lg:12,xl:12}};var tc=ec,nc=n(364),ac=n(339),cc=function(e){var t=e.meta;return Object(f.jsx)(Ra.a,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,xl:e.grid.xl,children:Object(f.jsx)("div",{className:"ff-component-container ".concat(e.className),style:Object(s.a)({},e.style),children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:e.name,className:"ff-component-label",children:e.label}),Object(f.jsx)(nc.a,{value:e.value,onChange:e.onChange,onBlur:e.onBlur,name:e.name,id:e.name,variant:"outlined",error:!!t.error&&t.touched,helperText:t.error&&t.touched?t.error:"",size:e.textFieldSize,fullWidth:!0,multiline:!0,minRows:e.rows,maxRows:e.rowsMax,placeholder:e.placeholder,InputProps:{readOnly:e.readOnly,startAdornment:e.inputAdornment&&Object(f.jsx)(ac.a,{position:e.inputAdornmentPostion,children:e.inputAdornment})}}),Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-helper-text"),children:e.helperText})]})})})};cc.defaultProps={className:"",style:{},readOnly:!1,textFieldSize:"small",inputAdornment:"",inputAdornmentPostion:"start",helperText:"",placeholder:"",rows:3,rowsMax:20,grid:{xs:12,sm:12,md:12,lg:12,xl:12}};var oc=cc,sc=function(e){var t=e.meta;return Object(f.jsx)(Ra.a,{item:!0,xs:e.grid.xs,sm:e.grid.sm,md:e.grid.md,lg:e.grid.lg,xl:e.grid.xl,children:Object(f.jsx)("div",{className:"ff-component-container ".concat(e.className),style:Object(s.a)({},e.style),children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:e.name,className:"ff-component-label",children:e.label}),Object(f.jsx)(nc.a,{value:e.value||"",onChange:e.onChange,onBlur:e.onBlur,name:e.name,id:e.name,variant:"outlined",type:e.type||"text",error:!!t.error&&t.touched,helperText:t.error&&t.touched?t.error:"",placeholder:e.placeholder,size:e.textFieldSize,fullWidth:!0,InputProps:{readOnly:e.readOnly,startAdornment:e.inputAdornment&&Object(f.jsx)(ac.a,{position:e.inputAdornmentPostion,children:e.inputAdornment})}}),Object(f.jsx)(Ga.a,{id:"".concat(e.name,"-helper-text"),children:e.helperText})]})})})};sc.defaultProps={className:"",style:{},readOnly:!1,textFieldSize:"small",inputAdornment:"",inputAdornmentPostion:"start",helperText:"",placeholder:"",grid:{xs:12,sm:12,md:12,lg:12,xl:12}};var ic=sc,rc=n(95),lc=n(167),dc=n.n(lc),uc=function(e,t,n){var a=null===t||void 0===t?void 0:t.replace("*","");switch(e.type){case"required":return"".concat(a||"This"," is a required field.");case"email":return"Please enter a valid email.";case"url":return"Please enter a valid URL.";case"payload-size":return"Payload size must be below ".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16e6,t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Byte";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return"".concat(Math.round(e/Math.pow(1024,n),2)," ").concat(t[n])}(e.maxSize),".");case"min-chars":return"Minimum ".concat(e.length," characters required.");case"digite-password":return"Password must have 8 characters, a lowercase letter, an uppercase letter, a special character, and a number.";default:return"Invalid value"}},mc=function(e){return!!e},bc=function(e){return new RegExp(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/).test(e)},pc=function(e){return new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/).test(e)},jc=function(e,t){var n=t.length||8;return!(e.length<n)},hc=function(e,t,n){var a=t.fieldName;if(!a)return!1;var c=n[a];return!!c&&e===c},fc=function(e){return new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$^+=!*()@%&]).{8,20}$/).test(e)},Oc=0,vc=function e(t,n,a){if(a||(Oc=0),null!==t&&void 0!==t)switch(typeof t){case"number":Oc+=8;break;case"string":Oc+=2*t.length;break;case"boolean":Oc+=4;break;case"object":var c=Object.prototype.toString.call(t).slice(8,-1);if("Object"===c||"Array"===c)for(var o in t)t.hasOwnProperty(o)&&e(t[o],n,!0);else Oc+="File"===c?t.size:2*t.toString().length}return Oc<=(n.maxSize||16e6)},gc=function(){var e=Object(i.a)(l.a.mark((function e(t,n,a){var c,o,s,i,r,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.validate,o=t.label,dc()(c)){e.next=3;break}return e.abrupt("return",{error:""});case 3:if(s=c.filter((function(e){return"required"===e.type})),0!==s.length||n){e.next=6;break}return e.abrupt("return",{error:""});case 6:i=function(e){switch(e.type){case"required":return mc(n);case"email":return bc(n);case"url":return pc(n);case"payload-size":return vc(n,e);case"min-chars":return jc(n,e);case"equals":return hc(n,e,a);case"digite-password":return fc(n);default:return!0}},r=Object(rc.a)(c),e.prev=8,r.s();case 10:if((d=r.n()).done){e.next=20;break}return u=d.value,e.next=14,i(u);case 14:if(!e.sent){e.next=17;break}return e.abrupt("continue",18);case 17:return e.abrupt("return",{error:u.message||uc(u,o)});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(8),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:return e.abrupt("return",{error:""});case 29:case"end":return e.stop()}}),e,null,[[8,22,25,28]])})));return function(t,n,a){return e.apply(this,arguments)}}(),xc=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,c,o,s,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:[],n=i.length>1&&void 0!==i[1]?i[1]:{},a=t.filter((function(e){return!!e.validate&&e.validate.some((function(e){return"required"===e.type}))})),c=Object(rc.a)(a),e.prev=4,c.s();case 6:if((o=c.n()).done){e.next=15;break}return s=o.value,e.next=10,gc(s,n[s.name],n);case 10:if(!e.sent.error){e.next=13;break}return e.abrupt("return",!1);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),c.e(e.t0);case 20:return e.prev=20,c.f(),e.finish(20);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})));return function(){return e.apply(this,arguments)}}(),yc=function(e){var t=Object(a.useState)({error:"",touched:!1}),n=Object(sa.a)(t,2),c=n[0],o=n[1],r=function(){var t=Object(i.a)(l.a.mark((function t(n,a){var i,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gc(e,n,e.formState);case 2:i=t.sent,r=!!i.error,e.handleErrors(r,e.index),o(Object(s.a)(Object(s.a)({},c),{},{error:i.error,touched:null!==a&&void 0!==a?a:c.touched}));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){e.check&&r(e.value,!0)}),[e.check]);var d=function(t){r(e.value,!0)},u=Object(s.a)(Object(s.a)({},e),{},{onChange:function(t){e.setFormData(Object(D.a)({},t.target.name,t.target.value)),r(t.target.value)},onBlur:d,meta:c}),m=Object(s.a)(Object(s.a)({},e),{},{onChange:function(t){e.setFormData(Object(D.a)({},e.name,t)),r(t)},onBlur:d,meta:c}),b={textfield:Object(f.jsx)(ic,Object(s.a)({},u)),select:Object(f.jsx)(Xa,Object(s.a)({},u)),textarea:Object(f.jsx)(oc,Object(s.a)({},u)),switch:Object(f.jsx)(tc,Object(s.a)({},m)),checkbox:Object(f.jsx)(za,Object(s.a)({},m)),radio:Object(f.jsx)(Ya,Object(s.a)({},u))};return Object(f.jsx)(a.Fragment,{children:b[e.component]})},Nc=function(e,t){var n=t.payload;switch(t.type){case"FORM_SET_DATA":return Object(s.a)(Object(s.a)({},e),n);case"FORM_RESET":return{};default:return Object(s.a)({},e)}},Sc=function(e){var t="custom"===e.userType?[{component:"textfield",name:"X-USER",label:"X-USER*",placeholder:"",validate:[{type:"required"}]}]:[];return{fields:[{component:"textfield",name:"name",label:"Name*",placeholder:"e.g., Kairon",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"container",label:"Container*",placeholder:"e.g., #root",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textarea",name:"welcomeMessage",label:"Welcome Message",placeholder:"e.g., Hey, How may I help you?"},{component:"select",name:"buttonType",label:"Collapsed View*",options:[{label:"Icon Button",value:"button"},{label:"Flat View",value:"flat"}],validate:[{type:"required"}]},{component:"textfield",name:"host",label:"Host URL*",placeholder:"e.g., https://host.example.com",validate:[{type:"required"},{type:"url"}]},{component:"select",name:"userType",label:"User Type*",options:[{label:"Random",value:"random"},{label:"Custom",value:"custom"}],validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"select",name:"userStorage",label:"User Storage*",options:[{label:"Local Storage",value:"ls"},{label:"Session Storage",value:"ss"}],validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}}].concat(t)}},Tc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)," Name*");return{fields:[{component:"textfield",name:"dataName",label:t,placeholder:"Enter ".concat(e," name"),inputAdornment:"utterance"===e?"utter_":"",validate:[{type:"required"}]}]}},kc=function(e){switch(e){case"LOGIN":return{fields:[{component:"textfield",name:"email",label:"Email*",placeholder:"johndoe@example.com",validate:[{type:"required"},{type:"email"}]},{component:"textfield",name:"password",label:"Password*",placeholder:"********",type:"password",validate:[{type:"required"},{type:"min-chars",length:8}]}]};case"SIGNUP":return{fields:[{component:"textfield",name:"first_name",label:"First Name*",placeholder:"John",validate:[{type:"required"}],grid:{xs:12,sm:6,md:6,ls:6,xl:6}},{component:"textfield",name:"last_name",label:"Last Name*",placeholder:"Doe",validate:[{type:"required"}],grid:{xs:12,sm:6,md:6,ls:6,xl:6}},{component:"textfield",name:"email",label:"Email*",placeholder:"johndoe@example.com",validate:[{type:"required"},{type:"email"}]},{component:"textfield",name:"password",label:"Password*",placeholder:"********",type:"password",validate:[{type:"required"},{type:"digite-password"}]},{component:"textfield",name:"confirm_password",label:"Confirm Password*",placeholder:"********",type:"password",validate:[{type:"required"},{type:"equals",fieldName:"password",message:"Confirm password doesn't match."}]}]};case"EMAIL":return{fields:[{component:"textfield",name:"email",label:"Email*",placeholder:"johndoe@example.com",validate:[{type:"required"},{type:"email"}]}]};case"NEW_PASSWORD":return{fields:[{component:"textfield",name:"password",label:"Password*",placeholder:"********",type:"password",validate:[{type:"required"},{type:"digite-password"}]},{component:"textfield",name:"confirm_password",label:"Confirm Password*",placeholder:"********",type:"password",validate:[{type:"required"},{type:"equals",fieldName:"password",message:"Confirm Password doesn't match."}]}]};case"ADD_URL":return{fields:[{component:"textfield",name:"linkText",label:"Text to display*",placeholder:"Display Text",validate:[{type:"required",message:"Text is a required field."}]},{component:"textfield",name:"link",label:"Link*",placeholder:"https://example.com",validate:[{type:"required"},{type:"url"}]}]};case"ADD_INTENT":return Tc("intent");case"ADD_UTTERANCE":return Tc("utterance");case"ADD_PHRASES":return function(e){var t="intent"===e?"Training Phrases":"Responses";return{fields:[{component:"textarea",name:"data",label:t,placeholder:"Enter ".concat(t.toLowerCase()),helperText:"Enter each on seperate line",validate:[{type:"required"}]}]}}("intent");case"ADD_RESPONSES":return{fields:[{component:"textfield",name:"data",label:"Response",placeholder:"Enter response",validate:[{type:"required"}]}]};case"CLIENT_ESSENTIALS":return Sc();case"CLIENT_DIALOG":return{fields:[{component:"textfield",name:"text",label:"Message*",placeholder:"e.g., Hey user!",validate:[{type:"required"}]},{component:"textfield",name:"route",label:"Route*",placeholder:"e.g., /products",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"select",name:"type",label:"Dialog Type*",options:[{label:"Intent",value:"intent"},{label:"Message",value:"message"}],validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}}]};case"CLIENT_CLASSNAMES":return{fields:[{component:"textfield",name:"headerClassName",label:"Header",placeholder:"e.g., my-custom-header",grid:{xs:12,sm:12,md:4,lg:4,xl:3}},{component:"textfield",name:"containerClassName",label:"Container",placeholder:"e.g., colored-box",grid:{xs:12,sm:12,md:4,lg:4,xl:3}},{component:"textfield",name:"chatContainerClassName",label:"Chat Container",placeholder:"e.g., chat-messanger",grid:{xs:12,sm:12,md:4,lg:4,xl:3}},{component:"textfield",name:"userClassName",label:"User Message",placeholder:"e.g., my-user-message",grid:{xs:12,sm:12,md:4,lg:4,xl:3}},{component:"textfield",name:"botClassName",label:"Bot Message",placeholder:"e.g., my-bot-message",grid:{xs:12,sm:12,md:4,lg:4,xl:3}},{component:"textfield",name:"formClassName",label:"Form",placeholder:"e.g., theme-input-form",grid:{xs:12,sm:12,md:4,lg:4,xl:3}},{component:"textfield",name:"openButtonClassName",label:"Open Button",placeholder:"e.g., trigger-chat",grid:{xs:12,sm:12,md:4,lg:4,xl:3}}]};case"CLIENT_FONTS":return{fields:[{component:"textfield",name:"botFontFamily",label:"Bot Message Font",placeholder:'"My Custom Font"',grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"botFontSize",label:"Bot Message Font Size",placeholder:"e.g., 14px",grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"userFontFamily",label:"User Message Font",placeholder:'"My Custom Font"',grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"userFontSize",label:"User Message Font Size",placeholder:"e.g., 14px",grid:{xs:12,sm:12,md:6,lg:6,xl:6}}]};case"CLIENT_RIBBON":return{fields:[{component:"textfield",name:"height",label:"Ribbon Height*",placeholder:"e.g., 36px",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"buttonHeight",label:"Button Height*",placeholder:"e.g., 2",type:"number",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"select",name:"placement",label:"Placement*",options:[{value:"top",label:"Top"},{value:"bottom",label:"Bottom"}],validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"openDelay",label:"Open Delay (in seconds)*",placeholder:"e.g., 2",type:"number",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"fontSize",label:"Font Size*",placeholder:"e.g., 14px",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"fontFamily",label:"Font Family*",placeholder:"e.g., Roboto",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}}]};default:return{fields:[]}}},Cc=function(e){var t,n,c,o=Object(a.useState)([]),r=Object(sa.a)(o,2),d=r[0],u=r[1],m=Object(a.useState)(!1),b=Object(sa.a)(m,2),p=b[0],h=b[1],O=e.schema||kc(e.form),v=e.customReducer||Object(a.useReducer)(Nc,{}),g=Object(sa.a)(v,2),x=g[0],y=g[1],N=function(e){y({type:"FORM_SET_DATA",payload:e})};Object(a.useEffect)((function(){return u(new Array(O.fields.length).fill(!1)),function(){e.customReducer&&!e.clearOnUnmount||y({type:"FORM_RESET"})}}),[]),Object(a.useEffect)((function(){u(new Array(O.fields.length).fill(!1))}),[null===O||void 0===O||null===(t=O.fields)||void 0===t?void 0:t.length]),Object(a.useEffect)((function(){e.populateData&&N(e.populateData)}),[e.populateData]);var S=function(){var t=Object(i.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===n||void 0===n||n.preventDefault(),h(!0),t.prev=2,t.next=5,xc(O.fields,x);case 5:a=t.sent,!d.includes(!0)&&a&&(e.onSubmit(x),e.clearOnSubmit&&y({type:"FORM_RESET"})),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:return t.prev=11,h(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,9,11,14]])})));return function(e){return t.apply(this,arguments)}}(),T=function(e,t){d.splice(t,1,e)};return Object(f.jsx)(a.Fragment,{children:Object(f.jsxs)("form",{onSubmit:S,className:"ff-filetemplate ".concat(e.className),children:[Object(f.jsx)(Ra.a,{container:!0,spacing:2,children:O.fields.map((function(e,t){var n;return Object(f.jsx)(a.Fragment,{children:Object(f.jsx)(yc,Object(s.a)(Object(s.a)({},e),{},{index:t,setFormData:N,value:null!==(n=x[e.name])&&void 0!==n?n:"",handleErrors:T,check:p,formState:x}))},t)}))}),Object(f.jsxs)("div",{className:"ff-submit-btn-section ".concat(e.buttonClassName),children:[e.secondaryButton,e.showCancelButton&&e.onCancel&&Object(f.jsx)("button",{className:"ff-btn-theme",type:"button",onClick:function(){e.onCancel&&(e.onCancel(),e.clearOnCancel&&y({type:"FORM_RESET"}))},style:{background:"#888"},children:e.cancelButtonLabel}),e.submitButton?e.submitButton:e.recaptcha&&j.recaptchaKey?Object(f.jsx)(Ua,{action:(null===(n=e.recaptcha)||void 0===n?void 0:n.action)||"form-handler-undefined",buttonComponent:"button",buttonProps:{type:"button",className:"ff-btn-theme"},onClick:S,onFailure:(null===(c=e.recaptcha)||void 0===c?void 0:c.onRecaptchaFailure)||console.log,children:e.submitButtonLabel}):Object(f.jsx)("button",{className:"ff-btn-theme",type:"submit",children:e.submitButtonLabel})]})]})})};Cc.defaultProps={secondaryButton:"",submitButtonLabel:"Submit",cancelButtonLabel:"Cancel",className:"",buttonClassName:"",showCancelButton:!0};var wc=Cc,_c=n(35),Ac=function(e){var t=e.adminState,n=e.generateToken,c=e.getEndpoints,o=e.updateEndpoints,i=e.deleteEndpoint,r=t.token,l=t.fetchingToken,d=t.endpoints,u=Object(a.useState)({}),m=Object(sa.a)(u,2),b=m[0],p=m[1],j=Object(a.useState)({}),h=Object(sa.a)(j,2),O=h[0],v=h[1],g=Object(a.useState)(""),x=Object(sa.a)(g,2),y=x[0],N=x[1],S=Object(_c.i)().params.botId;Object(a.useEffect)((function(){c(S)}),[]),Object(a.useEffect)((function(){if(d){var e=d.action_endpoint,t=d.history_endpoint;p(Object(s.a)({},e)||{}),v(Object(s.a)({},t)||{})}}),[d]);var T=function(e,t){o(S,Object(D.a)({},e,t))},k=function(){var e=d.action_endpoint,t=d.history_endpoint;"action_endpoint"===y?p(Object(s.a)({},e)):v(Object(s.a)({},t)),N("")};return Object(f.jsxs)("div",{className:"app-page admin-wrapper",children:[Object(f.jsx)(Pa,{open:!!y,title:"Are you sure?",onCancel:k,onClose:k,onConfirm:function(){i(S,y),N("")},children:"Are you sure you want to delete this endpoint?"}),Object(f.jsx)("h1",{className:"app-heading",children:"Administration"}),Object(f.jsxs)("div",{className:"integration-wrapper",children:[Object(f.jsx)("h2",{className:"section-heading",children:"Integration token"}),Object(f.jsxs)("button",{type:"button",onClick:function(){return n(S)},className:"gen-button",disabled:l,children:[Object(f.jsx)(ua.o,{className:"token-icon"}),l?"Generating":"Generate"]}),r&&Object(f.jsx)(wa,{copyButtonLabel:"Copy Token",children:r})]}),Object(f.jsxs)("div",{className:"settings-wrapper",children:[Object(f.jsx)("h2",{className:"section-heading",children:"Custom Configurations"}),Object(f.jsxs)("div",{className:"forms-wrapper",children:[Object(f.jsxs)("div",{className:"config-form-wrapper",children:[Object(f.jsx)("h3",{className:"sub-heading",children:"Action URL Configuration"}),Object(f.jsx)(wc,{schema:{fields:[{component:"textfield",name:"url",label:"Action URL*",placeholder:"https://action.endpoint.com",validate:[{type:"required"},{type:"url"}]}]},populateData:b,submitButtonLabel:"SAVE",onSubmit:function(e){return T("action_endpoint",e)},onCancel:function(){return N("action_endpoint")},cancelButtonLabel:"DELETE",clearOnCancel:!0})]}),Object(f.jsxs)("div",{className:"config-form-wrapper",children:[Object(f.jsx)("h3",{className:"sub-heading",children:"History Server Configuration"}),Object(f.jsx)(wc,{schema:{fields:[{component:"textfield",name:"url",label:"URL*",placeholder:"https://history.endpoint.com",validate:[{type:"required"},{type:"url"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"textfield",name:"token",label:"Token",placeholder:"Access token",grid:{xs:12,sm:12,md:6,lg:6,xl:6}}]},populateData:O,submitButtonLabel:"SAVE",onSubmit:function(e){return T("history_endpoint",e)},onCancel:function(){return N("history_endpoint")},cancelButtonLabel:"DELETE",clearOnCancel:!0})]})]})]})]})},Ec=Object(aa.b)((function(e){return{adminState:e.admin}}),(function(e){return{generateToken:function(t){return e(function(e){return function(t){t({type:ha}),t(ga(e,{onSuccess:xa,onError:wn}))}}(t))},getEndpoints:function(t){return e(Na(t))},updateEndpoints:function(t,n){return e(function(e,t){return function(n){n(Sn()),n(d("".concat(j.server,"/api/bot/").concat(e,"/endpoint"),{method:"PUT",args:t,callbackParams:{botId:e},success:Sa,error:wn}))}}(t,n))},deleteEndpoint:function(t,n){return e(function(e,t){return function(n){n(Sn()),n(d("".concat(j.server,"/api/bot/").concat(e,"/endpoint/").concat(t),{method:"DELETE",success:Ta,callbackParams:{endpoint:t},error:wn}))}}(t,n))}}}))(Ac),Fc="ANALYTICS_DATA_FETCHING",Ic="USER_RETENTION",Dc="SUCCESSFUL_CONVERSATION",Pc="NEW_USERS",Rc="ENGAGED_USERS",Lc="USER_RETENTION_TREND",Uc="SUCCESSFUL_CONVERSATION_TREND",Mc="TOTAL_CONVERSATION_TREND",Bc="FALLBACK_TREND",Hc="AVG_CONVERSATION_STEPS_TREND",Gc="AVG_CONVERSATION_TIME_TREND",Vc="NEW_USERS_TREND",zc="ENGAGED_USERS_TREND",qc="VISITOR_FALLBACK_METRIC",Wc="USER_CHAT_HISTORY_DATA",Kc="POPULATE_TOP_INTENTS",Yc="POPULATE_TOP_ACTIONS",Qc="POPULATE_UNIQUE_USER_INPUTS",Jc="POPULATE_FALLBACK_CONFIG",Zc="POPULATE_UNSUCCESSFUL_SESSIONS",Xc="POPULATE_TOTAL_SESSIONS",$c="POPULATE_INTENTS_BEFORE_DROPOFF",eo=function(e){return{type:Ic,payload:{userRetention:e.data.user_retention}}},to=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"userRetentionFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/user/retention?month=").concat(t),{success:eo,error:wn}))}},no=function(e){var t,n;return{type:Dc,payload:{successfulConversations:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.successful_conversations,totalConversations:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.total}}},ao=function(e){return{type:Pc,payload:{newUsers:e.data.new_users}}},co=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"newUsersFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/user/new?month=").concat(t),{success:ao,error:wn}))}},oo=function(e){return{type:Rc,payload:{engagedUsers:e.data.engaged_users}}},so=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"engagedUsersFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/user/engaged?month=").concat(t),{success:oo,error:wn}))}},io=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=new Date,c=[],o=0;o<n;o++){var s;t=b()(a).subtract(o,"M").format("M"),c.push((null===(s=e[t])||void 0===s?void 0:s.toFixed(0))||0)}return c},ro=function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.retention_range,a=io(n);return{type:Lc,payload:{userRetentionTrend:a}}},lo=function(e){var t,n;return{type:Uc,payload:{successfulConversationsTrend:io(null===(t=e.data)||void 0===t?void 0:t.successful_sessions),totalSessionsTrend:io(null===(n=e.data)||void 0===n?void 0:n.total_sessions)}}},uo=function(e){var t;return{type:Mc,payload:{totalConversationsTrend:io(null===(t=e.data)||void 0===t?void 0:t.total_conversation_range)}}},mo=function(e){var t,n;return{type:Hc,payload:{avgConversationStepsTrend:io(null===(t=e.data)||void 0===t?void 0:t.average_conversation_steps),totalConversationStepsTrend:io(null===(n=e.data)||void 0===n?void 0:n.total_conversation_steps)}}},bo=function(e){var t;return{type:Gc,payload:{avgConversationTimeTrend:io(null===(t=e.data)||void 0===t?void 0:t.Conversation_time_range)}}},po=function(e){var t,n;return{type:Bc,payload:{fallbackTrend:io(null===(t=e.data)||void 0===t?void 0:t.fallback_count_rate),totalFallbackTrend:io(null===(n=e.data)||void 0===n?void 0:n.total_fallback_count)}}},jo=function(e){var t;return{type:Vc,payload:{newUsersTrend:io(null===(t=e.data)||void 0===t?void 0:t.new_user_range)}}},ho=function(e){var t;return{type:zc,payload:{engagedUsersTrend:io(null===(t=e.data)||void 0===t?void 0:t.engaged_user_range)}}},fo=function(e){return{type:qc,payload:{fallbackMetric:e.data}}},Oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"fallbackMetricFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/fallback?month=").concat(t),{success:fo,error:wn}))}},vo=function(e){return{type:Wc,payload:{users:e.data.users}}},go=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"usersFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/users?month=").concat(t),{success:vo,error:wn}))}},xo=function(e){return{type:Kc,payload:{intents:null===e||void 0===e?void 0:e.data}}},yo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return function(a){a({type:Fc,payload:{dataPropertyNameBeingFetched:"topIntentsFetched"}}),a(d("".concat(j.server,"/api/history/").concat(e,"/metrics/intents/topmost?month=").concat(t,"&top_n=").concat(n),{success:xo,error:wn}))}},No=function(e){return{type:Yc,payload:{actions:null===e||void 0===e?void 0:e.data}}},So=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return function(a){a({type:Fc,payload:{dataPropertyNameBeingFetched:"topActionsFetched"}}),a(d("".concat(j.server,"/api/history/").concat(e,"/metrics/actions/topmost?month=").concat(t,"&top_n=").concat(n),{success:No,error:wn}))}},To=function(e){return{type:Qc,payload:{uniqueUserInputs:null===e||void 0===e?void 0:e.data}}},ko=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"uniqueUserInputsFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/conversations/input/unique?month=").concat(t),{success:To,error:wn}))}},Co=function(e){return{type:Jc,payload:{fallbackConfig:null===e||void 0===e?void 0:e.data}}},wo=function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"fallbackConfigFetched"}}),t(d("".concat(j.server,"/api/bot/").concat(e,"/config/properties"),{success:Co,error:wn}))}},_o=function(e){return{type:Zc,payload:{userVsUnsuccessfulSessions:null===e||void 0===e?void 0:e.data}}},Ao=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"userVsUnsuccessfulSessionsFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/user/sessions/unsuccessful?month=").concat(t),{success:_o,error:wn}))}},Eo=function(e){return{type:Xc,payload:{userVsTotalSessions:null===e||void 0===e?void 0:e.data}}},Fo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"userVsTotalSessionsFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/user/sessions/total?month=").concat(t),{success:Eo,error:wn}))}},Io=function(e){return{type:$c,payload:{intentsBeforeDropoff:null===e||void 0===e?void 0:e.data}}},Do=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"intentsBeforeDropoffFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/user/intent/dropoff?month=").concat(t),{success:Io,error:wn}))}},Po=function(e){var t=e.selectedNoOfMonths,n=e.onMonthClick;return Object(f.jsxs)("div",{className:"month-buttons",children:[Object(f.jsx)(ka.a,{title:"Last one month",placement:"top",children:Object(f.jsx)("button",{className:"filter-icon ".concat(1===t?"sv-select":""),onClick:function(){n(1)},type:"button",children:"1M"})}),Object(f.jsx)(ka.a,{title:"Last three months",placement:"top",children:Object(f.jsx)("button",{className:"filter-icon ".concat(3===t?"sv-select":""),onClick:function(){n(3)},type:"button",children:"3M"})}),Object(f.jsx)(ka.a,{title:"Last six months",placement:"top",children:Object(f.jsx)("button",{className:"filter-icon ".concat(6===t?"sv-select":""),onClick:function(){n(6)},type:"button",children:"6M"})})]})};Po.defaultProps={selectedNoOfMonths:1,onMonthClick:function(){}};var Ro=Po,Lo=n(340),Uo=function(e){var t=e.text;return Object(f.jsxs)("div",{className:"ui-loader",children:[Object(f.jsx)(Lo.a,{color:"primary",className:"progress-circle"}),(null===t||void 0===t?void 0:t.length)>0&&Object(f.jsx)("h1",{className:"loader-text",children:t})]})};Uo.defaultProps={text:"Loading..."};var Mo=Uo,Bo=n(122),Ho=n.n(Bo),Go=n(123),Vo=n(21),zo=n(65),qo=n(30),Wo=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],a=new Date,c=0;c<e;c++){var o=b()(a).subtract(c,"M").format("MMM");n.push(o)}return t?n:n.reverse()},Ko=function(e){return{chart:{id:e.text,toolbar:{show:!1}},xaxis:{categories:Wo()},yaxis:{title:{text:e.text,rotate:-90,offsetX:0,offsetY:0,style:{fontSize:"13px",fontWeight:400,cssClass:"apexcharts-yaxis-title"}}},stroke:{width:2.8},grid:{xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}}}}},Yo={userRetention:{options:Ko({text:"User Retention (%)"}),title:"User Retention (%)"},successfulConversations:{options:Ko({text:"Successful Conversations"}),title:"Successful Conversations"},totalConversations:{options:Ko({text:"Total Conversations"}),title:"Total Conversations"},newUsers:{options:Ko({text:"New Users"}),title:"New Users"},engagedUsers:{options:Ko({text:"Engaged Users"}),title:"Engaged Users"},avgConversationSteps:{options:Ko({text:"Avg. Conversation Steps"}),title:"Avg. Conversation Steps"},avgConversationTime:{options:Ko({text:"Avg. Conversation Time (in secs.)"}),title:"Avg. Conversation Time (in secs.)"},fallback:{options:Ko({text:"Fallback"}),title:"Fallback"}},Qo=Object(Go.WidthProvider)(Go.Responsive),Jo=[{id:"totalConversations",name:"Monthly Unique Users"},{id:"successfulConversations",name:"Successful Conversations (Sessions)"},{id:"avgConversationSteps",name:"Conversation Steps"},{id:"userRetention",name:"User Retention %"},{id:"newUsers",name:"New Users"},{id:"engagedUsers",name:"Engaged Users"},{id:"avgConversationTime",name:"Avg. Conversation Time"},{id:"fallback",name:"Fallback %"}],Zo="Number of successful sessions vs number of unsuccessful sessions. A successful session is a session of 2 hours in which the bot was able to respond to all user inputs without hitting fallback",Xo="Statistics about various user metrics like new users, retained users etc",$o="The percentage of times the bot went into fallback",es="The number of times an intent was predicted by the bot",ts="The number of times an action was performed by the bot",ns="The user inputs which have not been added as training examples",as="Bot performance over various metrics over the past 6 months",cs="Identified intents and their counts before users drop off from the conversations.",os=function(e){var t,n,c,o=e.analyticsState,i=e.fetchAnalyticsData,r=e.fetchTrendsData,l=e.loadTopIntents,d=e.loadTopActions,m=e.loadFallbackMetrics,b=e.loadUniqueUserInputs,p=e.loadUserMetrics,j=e.updateUIConfigs,h=e.globalState,O=e.loadSessionsCount,v=e.loadIntentsBeforeDropoff,g=h.uiConfigs,x=h.uiConfigsFetched,y=Object(a.useState)("totalConversations"),N=Object(sa.a)(y,2),S=N[0],T=N[1],k=Object(a.useState)(!1),C=Object(sa.a)(k,2),w=C[0],A=C[1],E=Object(a.useState)(!0),F=Object(sa.a)(E,2),P=F[0],R=F[1],L=Object(a.useState)(1),U=Object(sa.a)(L,2),M=U[0],B=U[1],H=Object(a.useState)(1),G=Object(sa.a)(H,2),V=G[0],z=G[1],q=Object(a.useState)(1),W=Object(sa.a)(q,2),K=W[0],Y=W[1],Q=Object(a.useState)(1),J=Object(sa.a)(Q,2),Z=J[0],X=J[1],$=Object(a.useState)(1),ee=Object(sa.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(1),ce=Object(sa.a)(ae,2),oe=ce[0],se=ce[1],ie=Object(a.useState)(1),re=Object(sa.a)(ie,2),le=re[0],de=re[1],ue=Object(a.useState)(0),me=Object(sa.a)(ue,2),be=me[0],pe=me[1];x&&(n=null===g||void 0===g||null===(c=g.analyticsPage)||void 0===c?void 0:c.settings);n||(n={successfulConversations:!0,statCards:!0,fallbackStats:!0,topIntents:!0,topActions:!0,trendAnalysis:!0,uniqueUserInputs:!0,intentsBeforeDropoff:!0});var je=Object(a.useState)(n),he=Object(sa.a)(je,2),fe=he[0],Oe=he[1],ve=function(e){return(g["rgl-8"]?JSON.parse(g["rgl-8"]):{layouts:{lg:[{i:"successfulConversations",x:0,y:0,w:3,h:2},{i:"statCards",x:3,y:0,w:6,h:2},{i:"fallbackStats",x:9,y:0,w:3,h:2},{i:"topIntents",x:0,y:2,w:3,h:2},{i:"topActions",x:3,y:2,w:3,h:2},{i:"trendAnalysis",x:6,y:2,w:6,h:2},{i:"uniqueUserInputs",x:0,y:6,w:6,h:2},{i:"intentsBeforeDropoff",w:3,h:2,x:0,y:8,static:!1}],md:[{i:"successfulConversations",w:3,h:2,x:0,y:0,static:!1},{i:"statCards",w:10,h:2,x:0,y:2,static:!1},{i:"fallbackStats",w:4,h:2,x:0,y:4,static:!1},{i:"topIntents",w:3,h:2,x:7,y:0,static:!1},{i:"topActions",w:4,h:2,x:3,y:0,static:!1},{i:"uniqueUserInputs",w:6,h:2,x:4,y:4,static:!1},{i:"trendAnalysis",w:10,h:2,x:4,y:6,static:!1},{i:"intentsBeforeDropoff",w:3,h:2,x:0,y:8,static:!1}]}})[e]},ge=ve("layouts")||{},xe=Object(a.useState)(JSON.parse(JSON.stringify(ge))),ye=Object(sa.a)(xe,2),Ne=ye[0],Se=ye[1];Object(a.useEffect)((function(){var e,t;(Se(ve("layouts")),null!==g&&void 0!==g&&null!==(e=g.analyticsPage)&&void 0!==e&&e.settings)&&Oe(null===g||void 0===g||null===(t=g.analyticsPage)||void 0===t?void 0:t.settings)}),[x]);var Te=Object(a.useRef)(null);Object(a.useEffect)((function(){Te&&Te.current&&pe(Te.current.offsetHeight)}));var ke,Ce=Object(_c.i)().params.botId,we=o.fallbackMetric,_e=o.users,Ae=o.topIntents,Ee=o.topActions,Fe=(o.totalConversations,o.successfulConversations,o.uniqueUserInputs),Ie=o.fallbackConfig,De=o.userVsUnsuccessfulSessions,Pe=o.userVsTotalSessions,Re=o.intentsBeforeDropoff;ke=(null===we||void 0===we?void 0:we.total_count)>0?Math.round((null===we||void 0===we?void 0:we.fallback_count)/(null===we||void 0===we?void 0:we.total_count)*100):0;var Le=_(_e,"time"),Ue=_(_e,"steps"),Me=function(e){var t;return[{icon:ua.B,content:"".concat(null===(t=e.userRetention)||void 0===t?void 0:t.toFixed(2),"%"),text:"User Retention",info:"Percentage count of the users that had multiple conversations with the bot",isFetched:e.userRetentionFetched},{icon:zo.d,content:e.newUsers,text:"New Users",info:"Count of new users that engaged with the bot",isFetched:e.newUsersFetched},{icon:qo.h,content:e.engagedUsers,text:"Engaged Users",info:"Number of users that had long conversations with the bot",isFetched:e.engagedUsersFetched},{icon:ua.u,content:e.averageSteps?e.averageSteps.toFixed(0):0,text:"Avg. Conversation Steps",info:"The average conversation steps between the bot and its many users",isFetched:e.usersFetched},{icon:ua.y,content:e.averageTime?e.averageTime.toFixed(2):0,text:"Avg. Conversation Time (in secs.)",info:"The average time taken for a conversation between the bot and its many users",isFetched:e.usersFetched}]}(Object(s.a)(Object(s.a)({},o),{},{averageSteps:Ue,averageTime:Le,fallbackPercentage:ke}));Object(a.useEffect)((function(){i(Ce),r(Ce)}),[]);var Be=[];o.intentsBeforeDropoffFetched&&(Be=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),n=t.length,a={},c=[],o=0;o<n;o++)for(var s=t[o],i=Object.keys(e[s]),r=i.length,l=0;l<r;l++){var d=i[l];a[d]||(a[d]=0),a[d]+=Number(e[s][d])}for(var u=Object.keys(a),m=0;m<u.length;m++){var b=u[m];c.push({_id:b,count:a[b]})}return c.sort((function(e,t){return t.count-e.count}))}(Re));var He=null!==Ae&&void 0!==Ae&&Ae.length?Ae[0].count:0,Ge=null!==Ee&&void 0!==Ee&&Ee.length?Ee[0].count:0,Ve=null!==(t=Be)&&void 0!==t&&t.length?Be[0].count:0;return Object(f.jsxs)("div",{className:"app-page analytics-wrapper",children:[Object(f.jsxs)("div",{className:"analytics-head",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Analytics"}),Object(f.jsxs)("div",{className:"icons",children:[Object(f.jsx)("button",{type:"button",className:"icon-button-clear settings-icon ".concat(w?"selected":""),onClick:function(){A(!w)},children:Object(f.jsx)(da.B,{className:"ibc-icon"})}),Object(f.jsx)(ka.a,{title:P?"Click to rearrange widgets":"Click to fix widgets",placement:"top",children:Object(f.jsx)($a.a,{size:"small",checked:!P,color:"primary",onClick:function(){R(!P)}})})]})]}),w&&Object(f.jsxs)("div",{className:"analytics-settings",children:[Object(f.jsx)("div",{className:"setting-blocks",children:Object(f.jsxs)("div",{className:"setting-block",children:[Object(f.jsx)("h3",{className:"setting-title",children:"Widgets"}),Object(f.jsxs)("div",{className:"widget-settings",children:[Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.successfulConversations,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{successfulConversations:!fe.successfulConversations}))},color:"primary"}),label:"Conversations"}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.topActions,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{topActions:!fe.topActions}))},color:"primary"}),label:"Top Actions"}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.topIntents,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{topIntents:!fe.topIntents}))},color:"primary"}),label:"Top Intents"}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.trendAnalysis,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{trendAnalysis:!fe.trendAnalysis}))},color:"primary"}),label:"Trend Analysis"}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.uniqueUserInputs,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{uniqueUserInputs:!fe.uniqueUserInputs}))},color:"primary"}),label:"User Inputs Not In Training Data"}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.fallbackStats,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{fallbackStats:!fe.fallbackStats}))},color:"primary"}),label:"Fallback"}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.statCards,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{statCards:!fe.statCards}))},color:"primary"}),label:"User Metrics"}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:fe.intentsBeforeDropoff,onChange:function(){Oe(Object(s.a)(Object(s.a)({},fe),{},{intentsBeforeDropoff:!fe.intentsBeforeDropoff}))},color:"primary"}),label:"Intents Before Dropoff"})]})]})}),Object(f.jsx)("div",{className:"ff-filetemplate",children:Object(f.jsxs)("div",{className:"ff-submit-btn-section",children:[Object(f.jsx)("button",{className:"ff-btn-theme",type:"button",onClick:function(){x&&j({analyticsPage:{settings:fe}},!0)},children:"Save"}),Object(f.jsx)("button",{className:"ff-btn-theme closeButton",type:"button",onClick:function(){A(!1)},children:"Close"})]})})]}),!w&&Object(f.jsx)("div",{className:"analytics-content",children:Object(f.jsx)("div",{className:"analytics-dashboard",children:Object(f.jsx)("div",{className:"analytics-widget-cnt",children:Object(f.jsxs)(Qo,{className:"layout",isDraggable:!P,isResizable:!P,cols:{lg:12,md:10},breakpoints:{lg:1200,md:996},layouts:Ne,measureBeforeMount:!0,onLayoutChange:function(e,t){var n,a;n="layouts",a=t,x&&j({"rgl-8":JSON.stringify(Object(D.a)({},n,a))}),Se(t)},children:[fe.successfulConversations&&Object(f.jsxs)("div",{className:"widget successfulConversations","data-grid":{i:"a",x:0,y:0,w:3,h:2,static:!1},children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(ka.a,{title:Zo,arrow:!0,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"Conversations"})}),Object(f.jsx)(Ro,{selectedNoOfMonths:te,onMonthClick:function(e){O(Ce,e),ne(e)}})]}),o.userVsUnsuccessfulSessionsFetched&&o.userVsTotalSessionsFetched&&Object(f.jsx)("div",{className:"content",children:function(){for(var e=0,t=Object.keys(Pe),n=0;n<t.length;n++)e+=Pe[t[n]];var a=0;t=Object.keys(De);for(var c=0;c<t.length;c++)a+=De[t[c]];var o={labels:["Successful","Failed"],dataLabels:{formatter:function(e,t){return t.w.config.series[t.seriesIndex]}},legend:{show:!1},plotOptions:{pie:{customScale:1,donut:{labels:{show:!0,total:{show:!0,showAlways:!0,label:"Successful",fontSize:"12px",color:"#888888",offsetY:-10,formatter:function(e){var t=e.config,n=(e.globals,t.series[0]/(t.series[0]+t.series[1])*100);return n=Math.round(n),isNaN(n)&&(n=0),"".concat(n,"%")}}}}}},colors:["#28a745","#ffc107"],chart:{type:"donut"}},s=[e-a,a];return Object(f.jsx)("div",{className:"apex-content",children:Object(f.jsx)(Ho.a,{options:o,series:s,type:"donut"})})}()}),(!o.userVsUnsuccessfulSessionsFetched||!o.userVsTotalSessionsFetched)&&Object(f.jsx)(Mo,{text:""})]},"successfulConversations"),fe.statCards&&Object(f.jsxs)("div",{className:"widget","data-grid":{i:"statCards",x:3,y:0,w:7,h:2,static:!1},children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(ka.a,{arrow:!0,title:Xo,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"User Metrics"})}),Object(f.jsx)(Ro,{selectedNoOfMonths:oe,onMonthClick:function(e){p(Ce,e),se(e)}})]}),Object(f.jsx)("div",{className:"cards-wrapper content",children:Me.map((function(e,t){var n=e.icon,a=e.content,c=e.info,o=e.text,s=e.isFetched;return Object(f.jsxs)("div",{className:"statCard-wrapper",children:[Object(f.jsx)(ka.a,{title:c,placement:"top",children:Object(f.jsx)("div",{className:"info-icon-wrapper",children:Object(f.jsx)(Vo.f,{className:"info-icon"})})}),Object(f.jsx)("div",{className:"icon-container",children:Object(f.jsx)(n,{className:"icon"})}),s&&Object(f.jsx)("h2",{className:"stat-data",children:a}),!s&&Object(f.jsx)("div",{className:"stat-data-loader",children:Object(f.jsx)(Mo,{text:""})}),Object(f.jsx)("p",{className:"stat-text",children:o})]},t)}))})]},"statCards"),fe.fallbackStats&&Object(f.jsxs)("div",{className:"widget fallbackStats","data-grid":{i:"fallbackStats",x:0,y:2,w:4,h:2,static:!1},children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(ka.a,{arrow:!0,title:$o,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"Fallback"})}),Object(f.jsx)(Ro,{selectedNoOfMonths:Z,onMonthClick:function(e){m(Ce,e),X(e)}})]}),Object(f.jsxs)("div",{className:"content",children:[!o.fallbackMetricFetched&&Object(f.jsx)(Mo,{text:""}),o.fallbackMetricFetched&&Object(f.jsxs)("div",{className:"fallback-stats-cnt",children:[Object(f.jsxs)("div",{className:"fallback-percent",children:[ke,"%"]}),Object(f.jsx)("div",{className:"fallback-percent-text",children:"Fallback Percentage"}),Object(f.jsxs)("div",{className:"fallback-count",children:[Object(f.jsx)("span",{children:"Fallback count: "})," ",Object(f.jsxs)("span",{className:"count",children:[null===we||void 0===we?void 0:we.fallback_count,Object(f.jsx)(ka.a,{title:"Check all the fallback instances in Chat History",placement:"top",children:Object(f.jsx)("span",{children:Object(f.jsx)(da.z,{className:"info-icon",onClick:function(){I.push("/bot/".concat(Ce,"/history?action=").concat(null===Ie||void 0===Ie?void 0:Ie.action_fallback,"&intent=nlu_fallback&noOfMonths=").concat(Z))}})})})]})]})]}),!o.fallbackConfigFetched&&Object(f.jsx)(Mo,{text:""}),o.fallbackConfigFetched&&Object(f.jsxs)("div",{className:"threshold-cnt",children:[Object(f.jsxs)("div",{className:"threshold-count",children:[Object(f.jsx)("span",{children:"Fallback intent Threshold: "})," ",Object(f.jsx)("span",{className:"count",children:null===Ie||void 0===Ie?void 0:Ie.nlu_confidence_threshold})]}),Object(f.jsxs)("div",{className:"threshold-count",children:[Object(f.jsx)("span",{children:"Fallback action Threshold: "})," ",Object(f.jsx)("span",{className:"count",children:null===Ie||void 0===Ie?void 0:Ie.action_fallback_threshold})]}),Object(f.jsxs)("p",{className:"config-link",children:[Object(f.jsx)("span",{onClick:function(){I.push("/bot/".concat(Ce,"/config"))},children:"Click here"})," ","to configure thresholds"]})]})]})]},"fallbackStats"),fe.topIntents&&Object(f.jsxs)("div",{className:"topIntents widget","data-grid":{i:"topIntents",x:4,y:2,w:3,h:2,static:!1},children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(ka.a,{arrow:!0,title:es,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"Top Intents"})}),Object(f.jsx)(Ro,{selectedNoOfMonths:M,onMonthClick:function(e){l(Ce,e),B(e)}})]}),o.topIntentsFetched&&Object(f.jsx)("div",{className:"content",children:Object(f.jsx)("ul",{children:Ae.map((function(e){return Object(f.jsxs)("li",{title:e._id,children:[Object(f.jsx)("span",{children:e._id}),Object(f.jsx)("span",{className:"count",children:e.count}),Object(f.jsx)("span",{className:"bar-cnt",children:Object(f.jsx)("span",{className:"bar-fill",style:{width:"".concat(100*e.count/He,"%")}})})]},e._id)}))})}),!o.topIntentsFetched&&Object(f.jsx)(Mo,{text:""})]},"topIntents"),fe.topActions&&Object(f.jsxs)("div",{className:"topActions widget","data-grid":{i:"topActions",x:7,y:2,w:3,h:2,static:!1},children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(ka.a,{arrow:!0,title:ts,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"Top Actions"})}),Object(f.jsx)(Ro,{selectedNoOfMonths:V,onMonthClick:function(e){d(Ce,e),z(e)}})]}),o.topActionsFetched&&Object(f.jsx)("div",{className:"content",children:Object(f.jsx)("ul",{children:Ee.map((function(e){return Object(f.jsxs)("li",{title:e._id,children:[Object(f.jsx)("span",{children:e._id}),Object(f.jsx)("span",{className:"count",children:e.count}),Object(f.jsx)("span",{className:"bar-cnt",children:Object(f.jsx)("span",{className:"bar-fill",style:{width:"".concat(100*e.count/Ge,"%")}})})]},e._id)}))})}),!o.topActionsFetched&&Object(f.jsx)(Mo,{text:""})]},"topActions"),fe.trendAnalysis&&Object(f.jsxs)("div",{className:"trendAnalysis widget","data-grid":{i:"trendAnalysis",x:0,y:4,w:10,h:2,static:!1},children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)(ka.a,{arrow:!0,title:as,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"Trend Analysis"})})}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("div",{className:"tags-container",children:Jo.map((function(e){return Object(f.jsx)("div",{title:e.name,className:"tag ".concat(S.includes(e.id)?"tag-selected":""),role:"button",tabIndex:0,onClick:function(){return T(e.id)},style:{minWidth:"".concat(S.includes(e.id)?"".concat(e.name.length<15?e.name.length+3:e.name.length,"ch"):"")},children:Object(f.jsx)("span",{children:e.name})},e.id)}))}),Object(f.jsx)("div",{className:"charts-wrapper",ref:Te,children:function(e){var t,n,a=Yo[e],c=null!==(t=o["".concat(e,"Trend")])&&void 0!==t?t:[],s=null!==(n=null===a||void 0===a?void 0:a.options)&&void 0!==n?n:{},i=[{name:null===a||void 0===a?void 0:a.title,data:Object(u.a)(c).reverse()}];if("successfulConversations"===e){var r,l=null!==(r=o.totalSessionsTrend)&&void 0!==r?r:[];i=[{name:"Total Conversations",data:Object(u.a)(l).reverse()}].concat(Object(u.a)(i)),s.yaxis.title.text=""}if("avgConversationSteps"===e){var d,m,b=null!==(d=o.totalConversationStepsTrend)&&void 0!==d?d:[],p=null!==(m=o.totalFallbackTrend)&&void 0!==m?m:[];i=[{name:"Total Conversation Steps",data:Object(u.a)(b).reverse()},{name:"Total Fallback Hit",data:Object(u.a)(p).reverse()}],s.yaxis.title.text="",s.colors=["#008ffbd9","#dc3545"]}return Object(f.jsx)("div",{className:"apex-content",children:Object(f.jsx)(Ho.a,{options:s,series:i,type:"line",height:be-15})},e)}(S)})]})]},"trendAnalysis"),fe.uniqueUserInputs&&Object(f.jsxs)("div",{className:"uniqueUserInputs widget","data-grid":{i:"uniqueUserInputs",x:0,y:6,w:3,h:2,static:!1},children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(ka.a,{title:ns,arrow:!0,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"User inputs not in training data"})}),Object(f.jsx)(Ro,{selectedNoOfMonths:K,onMonthClick:function(e){b(Ce,e),Y(e)}})]}),o.uniqueUserInputsFetched&&Object(f.jsx)("div",{className:"content",children:Object(f.jsx)("ul",{children:Fe.map((function(e){return Object(f.jsxs)("li",{title:e._id,children:[Object(f.jsx)("span",{children:e._id}),Object(f.jsx)("span",{children:e.count})]},e._id)}))})}),!o.uniqueUserInputsFetched&&Object(f.jsx)(Mo,{text:""})]},"uniqueUserInputs"),fe.intentsBeforeDropoff&&Object(f.jsxs)("div",{className:"intentsBeforeDropoff topIntents widget","data-grid":{i:"intentsBeforeDropoff",x:0,y:8,w:3,h:2,static:!1},children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(ka.a,{arrow:!0,title:cs,placement:"top",children:Object(f.jsx)("span",{className:"title",children:"Intents Before Dropoff"})}),Object(f.jsx)(Ro,{selectedNoOfMonths:le,onMonthClick:function(e){v(Ce,e),de(e)}})]}),o.intentsBeforeDropoffFetched&&Object(f.jsx)("div",{className:"content",children:Object(f.jsx)("ul",{children:Be.map((function(e){return Object(f.jsxs)("li",{title:e._id,children:[Object(f.jsx)("span",{children:e._id}),Object(f.jsx)("span",{className:"count",children:e.count}),Object(f.jsx)("span",{className:"bar-cnt",children:Object(f.jsx)("span",{className:"bar-fill",style:{width:"".concat(100*e.count/Ve,"%")}})})]},e._id)}))})}),!o.intentsBeforeDropoffFetched&&Object(f.jsx)(Mo,{text:""})]},"intentsBeforeDropoff")]})})})})]})},ss=Object(aa.b)((function(e){return{analyticsState:e.analytics,globalState:e.global}}),(function(e){return{fetchAnalyticsData:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e(to(t,n)),e(co(t,n)),e(so(t,n)),e(Oo(t,n)),e(go(t,n)),e(So(t,n)),e(yo(t,n)),e(ko(t,n)),e(wo(t)),e(Ao(t,n)),e(Fo(t,n)),e(Do(t,n))},fetchTrendsData:function(t){e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"userRetentionTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/user/retention"),{success:ro,error:wn}))}}(t)),e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"successfulConversationsTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/conversation/success"),{success:lo,error:wn}))}}(t)),e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"newUsersTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/user/new"),{success:jo,error:wn}))}}(t)),e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"engagedUsersTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/user/engaged"),{success:ho,error:wn}))}}(t)),e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"totalConversationsTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/conversations/total"),{success:uo,error:wn}))}}(t)),e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"avgConversationStepsTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/conversations/steps"),{success:mo,error:wn}))}}(t)),e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"avgConversationTimeTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/conversations/time"),{success:bo,error:wn}))}}(t)),e(function(e){return function(t){t({type:Fc,payload:{dataPropertyNameBeingFetched:"fallbackTrendFetched"}}),t(d("".concat(j.server,"/api/history/").concat(e,"/metrics/trend/user/fallback"),{success:po,error:wn}))}}(t))},loadUserMetrics:function(t,n){e(to(t,n)),e(co(t,n)),e(so(t,n)),e(go(t,n))},loadTopIntents:function(t,n,a){e(yo(t,n,a))},loadTopActions:function(t,n,a){e(So(t,n,a))},loadFallbackMetrics:function(t,n){e(Oo(t,n))},loadUniqueUserInputs:function(t,n){e(ko(t,n))},loadSuccessfulConversations:function(t,n){e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(n){n({type:Fc,payload:{dataPropertyNameBeingFetched:"successfulConversationsFetched"}}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/conversation/success?month=").concat(t),{success:no,error:wn}))}}(t,n))},updateUIConfigs:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(Dn(t,{showMsg:n}))},loadSessionsCount:function(t,n){e(Ao(t,n)),e(Fo(t,n))},loadIntentsBeforeDropoff:function(t,n){e(Do(t,n))}}}))(os),is=n(5),rs=n.n(is),ls=function(e){e.match.params;var t=e.setOverlay,n=e.loadUserData,c=function(){var e=Object(_c.h)().search;return Object(a.useMemo)((function(){return new URLSearchParams(e)}),[e])}(),o=c.get("token"),s=c.get("user");return o&&s?(t(),localStorage.setItem("deBotTrainerToken","Bearer ".concat(o)),localStorage.setItem("deBotTrainerUserName","".concat(s)),localStorage.removeItem("user"),n(),I.push("/bots")):(localStorage.removeItem("deBotTrainerToken"),localStorage.removeItem("deBotTrainerUserName"),I.push("/login")),""};ls.propTypes={match:rs.a.object.isRequired,setOverlay:rs.a.func.isRequired};var ds=ls,us=Object(aa.b)(void 0,(function(e){return{loadUserData:function(){return e(Yn())},setOverlay:function(){return e(An())}}}))(ds),ms=n(168),bs=n.n(ms),ps=n(184),js=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return Object(ps.a)({palette:{primary:{main:"dark"===e?"#6c82ff":"#2f45c5",light:"#6c82ff"},secondary:{main:"#888888"},success:{main:"#28a745"},error:{main:"#dc3545"},warning:{main:"#ffc107"},info:{main:"#17a2b8"},type:"dark"===e?"dark":"light"},typography:{fontFamily:"Inter, Arial"}})},hs=(n(249),["first_name","last_name","email"]),fs=function(e){var t=e.initializeBookDemo,n=e.authState,c=e.setSnackbar,o=n.bookDemoLoader,i=Object(a.useState)(!1),r=Object(sa.a)(i,2),l=r[0],d=r[1],u=Object(a.useState)({first_name:"",last_name:"",email:"",phone:"",message:""}),m=Object(sa.a)(u,2),b=m[0],p=m[1],h=Object(a.useState)([]),O=Object(sa.a)(h,2),v=O[0],g=O[1],x=function(){var e=Object(_c.h)().search;return Object(a.useMemo)((function(){return new URLSearchParams(e)}),[e])}(),y=x.get("f_name"),N=x.get("l_name"),S=x.get("phone"),T=x.get("email"),k=function(e){p(Object(s.a)(Object(s.a)({},b),{},Object(D.a)({},e.target.name,e.target.value)))},C=function(){var e=hs.map((function(e){return b[e].trim()?null:e}));g(e),e.every((function(e){return null===e}))&&t(b,l)};return Object(a.useEffect)((function(){if(![y,N,T,S].every((function(e){return!e}))){d(!0);var e={first_name:null!==y&&void 0!==y&&y.includes("{{")?"":y,last_name:null!==N&&void 0!==N&&N.includes("{{")?"":N,email:null!==T&&void 0!==T&&T.includes("{{")?"":T,phone:null!==S&&void 0!==S&&S.includes("{{")?"":S,message:""};p(e)}}),[]),Object(f.jsx)("div",{className:"book-demo-wrapper",children:Object(f.jsx)(oa.a,{theme:js(),children:Object(f.jsxs)("form",{className:"ff-filetemplate",children:[Object(f.jsxs)(Ra.a,{container:!0,spacing:2,children:[Object(f.jsx)(Ra.a,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:Object(f.jsx)(ic,{name:"first_name",label:"First Name*",value:b.first_name,onChange:k,className:"demo-input",placeholder:"Enter first name*",meta:{error:v.includes("first_name")?"First Name is a required field.":"",touched:!0}})}),Object(f.jsx)(Ra.a,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:Object(f.jsx)(ic,{name:"last_name",label:"Last Name*",value:b.last_name,onChange:k,className:"demo-input",placeholder:"Enter last name*",meta:{error:v.includes("last_name")?"Last Name is a required field.":"",touched:!0}})})]}),Object(f.jsx)(ic,{name:"email",label:"Email*",value:b.email,onChange:k,className:"demo-input",type:"email",placeholder:"someone@company.com",meta:{error:v.includes("email")?"Email is a required field.":"",touched:!0}}),Object(f.jsx)("div",{className:"phone-number-wrapper",children:Object(f.jsx)(bs.a,{country:"in",value:b.phone,onChange:function(e,t,n,a){return k({target:{value:a,name:"phone"}})},enableSearch:!0,inputClass:"phn-inputClass",dropdownClass:"phn-dropdownClass",searchClass:"phn-searchClass",countryCodeEditable:!1})}),Object(f.jsx)(oc,{name:"message",label:"Message",value:b.message,onChange:k,className:"demo-input",type:"email",placeholder:"Your Message (optional)",meta:{error:"",touched:!0}}),j.recaptchaKey?Object(f.jsx)(Ua,{action:"bookDemo",buttonComponent:"button",buttonProps:{type:"button",className:"book-demo-button",disabled:o},onClick:C,onFailure:function(){return c("Failed to verify reCAPTCHA. Please reload!","error")},children:o?Object(f.jsx)(a.Fragment,{children:Object(f.jsx)(Lo.a,{color:"inherit",size:18})}):"Schedule Me"}):Object(f.jsx)("button",{type:"button",className:"book-demo-button",disabled:o,onClick:C,children:o?Object(f.jsx)(a.Fragment,{children:Object(f.jsx)(Lo.a,{color:"inherit",size:18})}):"Schedule Me"})]})})})},Os=Object(aa.b)((function(e){return{authState:e.auth}}),(function(e){return{initializeBookDemo:function(t,n){return e(function(e,t){return function(){var n=Object(i.a)(l.a.mark((function n(a){var c,o,s,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t?w("bookDemo","salesEmail",null===e||void 0===e||null===(c=e.email)||void 0===c?void 0:c.replace("@","[at]")):w("bookDemo","manually",null===e||void 0===e||null===(o=e.email)||void 0===o?void 0:o.replace("@","[at]")),a({type:zn}),n.prev=2,n.next=5,fetch("https://jsonip.com",{mode:"cors"});case 5:return s=n.sent,n.next=8,s.json();case 8:i=n.sent,a($n(i,{formData:e})),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),a($n({ip:"jsonipError"},{formData:e}));case 15:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},setSnackbar:function(t,n){return e(kn(t,n))}}}))(fs),vs=n(39),gs=n(72),xs=function(e){var t,n=e.initiateLogin,c=e.authState.ssoEnabledLogins,o=Object(_c.h)().pathname,s=null===(t=Object.values(c))||void 0===t?void 0:t.some((function(e){return e})),i=function(e){n(e)};return Object(f.jsx)(a.Fragment,{children:s&&Object(f.jsxs)("div",{className:"sso-view",children:[Object(f.jsxs)("div",{className:"login-sso-text",children:["/login"===o?"Login":"Signup"," Using"]}),Object(f.jsxs)("div",{className:"auth-buttons-wrapper",children:[c.google&&Object(f.jsx)("button",{onClick:function(){return i("google")},type:"button",className:"login-button",children:Object(f.jsx)(gs.c,{className:"auth-icon icon-google"})}),c.facebook&&Object(f.jsx)("button",{onClick:function(){return i("facebook")},type:"button",className:"login-button",children:Object(f.jsx)(vs.c,{className:"auth-icon icon-facebook"})}),c.linkedin&&Object(f.jsx)("button",{onClick:function(){return i("linkedin")},type:"button",className:"login-button",children:Object(f.jsx)(vs.i,{className:"auth-icon icon-linkedin"})})]}),Object(f.jsx)("div",{className:"or-line",children:Object(f.jsx)("span",{className:"or-text",children:"OR"})})]})})},ys=Object(aa.b)((function(e){return{authState:e.auth}}),(function(e){return{initiateLogin:function(t){return e(function(e){return function(){var t=Object(i.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w("ssoLogin","".concat(e,"-iconClicked")),fetch("".concat(j.server,"/api/auth/login/sso/").concat(e),{redirect:"manual"}).then((function(e){e.url?window.open(e.url,"_self"):n(wn({message:"Redirect URL not found!"}))})).catch((function(e){n(wn({message:"Unable to redirect"}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(xs),Ns=function(e){var t=e.onLogin,n=e.setBackdrop,a=e.setSnackbar;return Object(f.jsxs)("div",{className:"login-view",children:[Object(f.jsx)(ys,{}),Object(f.jsx)(wc,{form:"LOGIN",onSubmit:function(e){n(),t(e)},submitButtonLabel:"Login",recaptcha:{action:"login",onRecaptchaFailure:function(){a("Failed to verify reCAPTCHA. Please reload!","error")}}}),Object(f.jsxs)("div",{className:"login-alternate-links",children:[Object(f.jsx)(ra.a,{to:"/reset_password",className:"link",children:"Forgot Password?"}),Object(f.jsx)(ra.a,{to:"/verify",className:"link",children:"Verify Account"})]})]})},Ss=Object(aa.b)(null,(function(e){return{onLogin:function(t){return e(function(e){w("login","login");var t=new FormData;return t.append("username",e.email),t.append("password",e.password),d("".concat(j.server,"/api/auth/login"),{formData:t,method:"POST",success:Zn,error:wn})}(t))},setBackdrop:function(){return e(Sn())},setSnackbar:function(t,n){return e(kn(t,n))}}}))(Ns),Ts=function(e){var t,n,a=e.authState.userData,c="".concat((null===a||void 0===a||null===(t=a.first_name)||void 0===t?void 0:t.charAt(0))||"\u2022").concat((null===a||void 0===a||null===(n=a.last_name)||void 0===n?void 0:n.charAt(0))||"\u2022");return Object(f.jsxs)("div",{className:"profile-page",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Profile"}),Object(f.jsxs)("div",{className:"proifle-content",children:[Object(f.jsxs)("div",{className:"photo-wrapper",children:[Object(f.jsx)("div",{className:"photo",children:c}),Object(f.jsx)("div",{className:"account-info",children:Object(f.jsxs)("h2",{className:"fullname",children:[null===a||void 0===a?void 0:a.first_name," ",null===a||void 0===a?void 0:a.last_name]})})]}),Object(f.jsxs)("div",{className:"account-details",children:[Object(f.jsx)("div",{className:"title",children:"Account Details"}),Object(f.jsxs)("div",{className:"detail-row",children:[Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("p",{className:"detail-name",children:"First Name: "}),Object(f.jsx)("p",{className:"detail-value",children:null===a||void 0===a?void 0:a.first_name})]}),Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("p",{className:"detail-name",children:"Last Name: "}),Object(f.jsx)("p",{className:"detail-value",children:null===a||void 0===a?void 0:a.last_name})]})]}),Object(f.jsxs)("div",{className:"detail-row",children:[Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("p",{className:"detail-name",children:"Email: "}),Object(f.jsx)("p",{className:"detail-value",children:null===a||void 0===a?void 0:a.email})]}),Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("p",{className:"detail-name",children:"Member Since: "}),Object(f.jsx)("p",{className:"detail-value",children:b()(null===a||void 0===a?void 0:a.timestamp).format("LLL")})]})]})]})]})]})},ks=Object(aa.b)((function(e){return{authState:e.auth}}))(Ts),Cs=function(e){var t=e.setBackdrop,n=e.beginResetPassword,a=e.generateVerifyUserLink,c=e.match,o=e.setSnackbar;return Object(f.jsx)(wc,{form:"EMAIL",onSubmit:function(e){if(t(),"/verify"===c.path)return a(e);n(e)},recaptcha:{action:"/verify"===(null===c||void 0===c?void 0:c.path)?"verifyAccount":"beginResetPassword",onRecaptchaFailure:function(){o("Failed to verify reCAPTCHA. Please reload!","error")}}})},ws=Object(aa.b)(null,(function(e){return{setBackdrop:function(){return e(Sn())},beginResetPassword:function(t){return e(function(e){return w("login","resetPassword"),d("".concat(j.server,"/api/account/password/reset"),{args:{data:e.email},method:"POST",success:Jn,error:wn})}(t))},generateVerifyUserLink:function(t){return e(function(e){return d("".concat(j.server,"/api/account/email/confirmation/link"),{args:{data:e.email},method:"POST",success:Jn,error:wn})}(t))},setSnackbar:function(t,n){return e(kn(t,n))}}}))(Cs),_s=function(e){var t=e.setBackdrop,n=e.resetPassword,a=e.setSnackbar,c=e.match.params;return Object(f.jsx)(wc,{form:"NEW_PASSWORD",onSubmit:function(e){t(),n(Object(s.a)(Object(s.a)({},e),{},{data:c.token}))},recaptcha:{action:"resetPassword-newPassword",onRecaptchaFailure:function(){a("Failed to verify reCAPTCHA. Please reload!","error")}}})},As=Object(aa.b)(null,(function(e){return{setBackdrop:function(){return e(Sn())},resetPassword:function(t){return e(function(e){return d("".concat(j.server,"/api/account/password/change"),{args:e,method:"POST",success:Jn,error:wn})}(t))},setSnackbar:function(t,n){return e(kn(t,n))}}}))(_s),Es=function(e){var t=e.onSignup,n=e.setBackdrop,a=e.setSnackbar;return Object(f.jsxs)("div",{className:"signup-view",children:[Object(f.jsx)(ys,{}),Object(f.jsx)(wc,{form:"SIGNUP",onSubmit:function(e){n(),t(Object(s.a)(Object(s.a)({},e),{},{account:e.email}))},submitButtonLabel:"Signup",recaptcha:{action:"signup",onRecaptchaFailure:function(){a("Failed to verify reCAPTCHA. Please reload!","error")}}}),Object(f.jsxs)("p",{className:"signup-agree",children:["By signing up, you agree to our"," ",Object(f.jsx)("a",{href:"https://www.digite.com/kairon/terms-of-use/",target:"_blank",className:"link",rel:"noreferrer",children:"Terms Of Use"})," ","and acknowledge that Digit\xe9's"," ",Object(f.jsx)("a",{href:"https://www.digite.com/about-us/privacy-policy/",target:"_blank",className:"link",rel:"noreferrer",children:"Privacy Policy"})," ","applies to you."]})]})},Fs=Object(aa.b)(null,(function(e){return{onSignup:function(t){return e(function(e){return w("signup","addUser"),d("".concat(j.server,"/api/account/registration"),{args:e,method:"POST",success:Jn,error:wn})}(t))},setBackdrop:function(){return e(Sn())},setSnackbar:function(t,n){return e(kn(t,n))}}}))(Es),Is=function(e){var t=e.onSSORedirect,n=e.setScreenLoader,c=Object(a.useRef)(!1),o=Object(_c.i)().params.ssoType;Object(a.useEffect)((function(){c.current||(n(),t(o,location.search),c.current=!0)}),[]);return Object(f.jsxs)("div",{className:"login-view",children:[Object(f.jsx)(ys,{}),Object(f.jsx)(wc,{form:"LOGIN",onSubmit:function(){},submitButtonLabel:"Login"}),Object(f.jsxs)("div",{className:"login-alternate-links",children:[Object(f.jsx)(ra.a,{to:"/reset_password",className:"link",children:"Forgot Password?"}),Object(f.jsx)(ra.a,{to:"/verify",className:"link",children:"Verify Account"})]})]})},Ds=Object(aa.b)((function(e){return{authState:e.auth}}),(function(e){return{onSSORedirect:function(t,n){return e(function(e,t){return w("ssoLogin","".concat(e,"-authorized")),d("".concat(j.server,"/api/auth/login/sso/callback/").concat(e).concat(t),{method:"GET",success:ta,error:na,cookies:!0})}(t,n))},setScreenLoader:function(){return e({type:pn})}}}))(Is),Ps=function(e){var t=e.verifyUser,n=e.match.params;return Object(a.useEffect)((function(){setTimeout((function(){t(n.token)}),2e3)}),[]),Object(f.jsx)(Mo,{text:""})},Rs=Object(aa.b)(null,(function(e){return{verifyUser:function(t){return e(function(e){return d("".concat(j.server,"/api/account/email/confirmation"),{args:{data:e},method:"POST",success:Jn,error:Qn})}(t))}}}))(Ps),Ls="POPULATE_BOTS",Us="CREATE_BOT",Ms="UPDATE_NEW_BOT_NAME",Bs="CANCEL_ADD_BOT",Hs=function(e){var t;return{type:Ls,payload:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.account_owned}},Gs=function(){return d("".concat(j.server,"/api/account/bot"),{success:Hs,error:wn})},Vs=function(){return function(e){e({type:Bs})}},zs=function(e){return function(t){t(Gs()),t(Vs()),t(kn(null===e||void 0===e?void 0:e.message,"success"))}},qs=function(e){return function(t){t(Gs()),t(kn(null===e||void 0===e?void 0:e.message,"success"))}},Ws=function(e){return function(t){t(Gs()),t(kn(null===e||void 0===e?void 0:e.message,"success"))}},Ks=n(36),Ys=function(e){return e<=30?{color:"#dc3545"}:e<=50?{color:"#ffc107"}:{color:"#05BF8D"}},Qs=function(e){var t=e.name,n=e._id,c=e.performance,o=(e.created_at,e.handleBotNameChange),s=e.newBotName,i=e.cancelAddBot,r=e.onSaveBotClick,l=e.handleDeleteBotClick,d=e.handleBotNameEditClick,u=e.handleBotNameEditChange,m=e.handleBotNameEditCancel,b=e.handleBotNameEditKeyDown,p=e.actionData,j=e.id,h=e.index,O=Ys(c),v=Object(a.useState)(0),g=Object(sa.a)(v,2),x=g[0],y=g[1];return Object(a.useEffect)((function(){setTimeout((function(){y(c)}),500)}),[]),Object(f.jsxs)("div",{className:"ui-botcard",id:null!==j&&void 0!==j?j:"jride-bot-".concat(h),children:[Object(f.jsxs)("div",{className:"botcard-head",children:[Object(f.jsx)("div",{className:"ubc-logo",children:Object(f.jsx)(Ks.b,{className:"ubc-icon"})}),"newBot"!==n&&Object(f.jsxs)(a.Fragment,{children:[("edit"!==p.mode||p.id!==n)&&Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)("h2",{className:"text-overflow ubc-text",children:t}),Object(f.jsx)(ka.a,{title:"Rename Bot",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear edit-action",onClick:function(){d(n,t)},children:Object(f.jsx)(da.v,{className:"ibc-icon"})})})]}),"edit"===p.mode&&p.id===n&&Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(ka.a,{disableHoverListener:!0,title:"Press enter to save or escape to cancel",placement:"top",children:Object(f.jsx)("input",{className:"newBotName",placeholder:"Enter bot name",onChange:u,value:p.editedName,onKeyDown:b,autoFocus:!0})}),Object(f.jsx)("button",{type:"button",className:"icon-button-clear cancel-edit-action",onClick:function(){m()},children:Object(f.jsx)(Ks.c,{className:"ibc-icon"})})]})]}),"newBot"!==n&&p.id!==n&&Object(f.jsx)(ka.a,{title:"Delete Bot",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(){return l(n)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})}),"newBot"===n&&Object(f.jsx)("input",{className:"newBotName",placeholder:"Add name",onChange:o,value:s,autoFocus:!0})]}),Object(f.jsxs)("div",{className:"performance-bar-wrapper",children:[Object(f.jsxs)("span",{className:"measure",children:[c,"%"]}),Object(f.jsx)("div",{className:"p-bar",children:Object(f.jsx)("div",{className:"p-bar-indicate",style:{backgroundColor:O.color,width:"".concat(x,"%")}})}),"newBot"!==n&&Object(f.jsx)(ra.a,{to:"/bot/".concat(n),className:"edit-link",children:"View"}),"newBot"===n&&Object(f.jsxs)("div",{className:"addBotCardButtons",children:[Object(f.jsx)(Ia.a,{color:"secondary",disableElevation:!0,onClick:i,children:"Cancel"}),Object(f.jsx)(Ia.a,{variant:"contained",color:"primary",className:"saveBot",disableElevation:!0,onClick:r,children:"Save"})]})]})]})};Qs.defaultProps={performance:64,created_at:(new Date).getTime(),handleBotNameChange:function(){},cancelAddBot:function(){},onSaveBotClick:function(){},handleDeleteBotClick:function(){},newBotName:"",handleBotNameEditClick:function(){},handleBotNameEditChange:function(){},handleBotNameEditCancel:function(){},handleBotNameEditKeyDown:function(){},actionData:{}};var Js=Qs,Zs=n(64),Xs=n.n(Zs),$s=n(32),ei=function(e){var t=e.placeholder,n=e.onSearch,c=e.className,o=e.debounce,s=e.onKeyDown,i=Object(a.useState)(""),r=Object(sa.a)(i,2),l=r[0],d=r[1],u=Object(a.useCallback)(Xs.a.debounce(n,500),[]);return Object(f.jsxs)("div",{className:"ui-search ".concat(c),children:[Object(f.jsx)("input",{type:"text",value:l,onChange:function(e){d(e.target.value),o?u(e.target.value):n(e.target.value)},className:"ui-search-field",placeholder:t,onKeyDown:s}),Object(f.jsx)($s.g,{className:"search-icon"}),l&&Object(f.jsx)("button",{type:"button",className:"icon-button-clear close-icon",onClick:function(){d(""),n("")},children:Object(f.jsx)(qo.g,{className:"ibc-icon"})})]})};ei.defaultProps={placeholder:"Search...",onSearch:function(){},className:"",debounce:!0,onKeyDown:function(){}};var ti=ei,ni=n(359),ai=n(76),ci=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=n[0]?new Date(n[0]):void 0,c=n[1]?new Date(n[1]):void 0;return c||a?e.filter((function(e){var n=new Date(e.values[t]);return c&&a?n>=a&&n<=c:a?n>=a:c?n<=c:void 0})):e};var oi=function(e){var t,n,a,o=e.column,s=o.filterValue,i=void 0===s?[]:s,r=o.preFilteredRows,l=void 0===r?[]:r,d=o.setFilter,u=o.id,m=c.a.useMemo((function(){var e=l.length?new Date(l[0].values[u]):new Date(0),t=l.length?new Date(l[0].values[u]):new Date(0);return l.forEach((function(n){var a=new Date(n.values[u]);e=a<=e?a:e,t=a>=t?a:t})),[e,t]}),[u,l]),b=Object(sa.a)(m,2),p=b[0],j=b[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{min:"function"===typeof(null===p||void 0===p?void 0:p.toISOString)&&(null===p||void 0===p||null===(t=p.toISOString())||void 0===t?void 0:t.slice(0,10)),onChange:function(e){var t=e.target.value;d((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t||void 0,e[1]]}))},type:"date",value:i[0]||""})," to ",Object(f.jsx)("input",{max:"function"===typeof(null===j||void 0===j?void 0:j.toISOString)&&(null===j||void 0===j||null===(n=j.toISOString())||void 0===n?void 0:n.slice(0,10)),onChange:function(e){var t=e.target.value;d((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[e[0],t?t.concat("T23:59:59.999"):void 0]}))},type:"date",value:(null===(a=i[1])||void 0===a?void 0:a.slice(0,10))||""})]})};var si=function(e){var t=e.column,n=t.filterValue,a=t.preFilteredRows,c=t.setFilter,o=a.length;return Object(f.jsx)("input",{value:n||"",onChange:function(e){c(e.target.value||void 0)},placeholder:"Search ".concat(o," records...")})},ii=function(e){var t=e.column,n=t.filterValue,a=void 0===n?[]:n,o=t.preFilteredRows,s=void 0===o?[]:o,i=t.setFilter,r=t.id,l=c.a.useMemo((function(){var e=s.length?s[0].values[r]:0,t=s.length?s[0].values[r]:0;return s.forEach((function(n){e=Math.min(n.values[r],e),t=Math.max(n.values[r],t)})),[e,t]}),[r,s]),d=Object(sa.a)(l,2),u=d[0],m=d[1];return Object(f.jsxs)("div",{className:"numberRange",children:[Object(f.jsx)("input",{value:a[0]||"",type:"number",onChange:function(e){var t=e.target.value;i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t?parseInt(t,10):void 0,e[1]]}))},placeholder:"Min (".concat(u,")"),style:{width:"70px",marginRight:"0.5rem"}}),"to",Object(f.jsx)("input",{value:a[1]||"",type:"number",onChange:function(e){var t=e.target.value;i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[e[0],t?parseInt(t,10):void 0]}))},placeholder:"Max (".concat(m,")"),style:{width:"70px",marginLeft:"0.5rem"}})]})};var ri=function(e){var t=e.column,n=t.filterValue,a=t.setFilter,o=t.preFilteredRows,s=void 0===o?[]:o,i=t.id,r=c.a.useMemo((function(){var e=new Set;return s.forEach((function(t){e.add(t.values[i])})),Object(u.a)(e.values())}),[i,s]);return Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsxs)(Qa.a,{name:"selectColumnFilter",id:"selectColumnFilter",label:"",value:n||"",onChange:function(e){a(e.target.value||void 0)},children:[Object(f.jsx)(Ja.a,{value:"",children:Object(f.jsx)("span",{className:"ff-select-item",children:"All"})},"All"),r.map((function(e,t){return Object(f.jsx)(Ja.a,{value:e,children:Object(f.jsx)("span",{className:"ff-select-item",children:e})},e)}))]})})};var li=function(e){var t=e.column,n=t.filterValue,a=t.setFilter,o=t.preFilteredRows,s=t.id,i=c.a.useMemo((function(){var e=o.length?o[0].values[s]:0,t=o.length?o[0].values[s]:0;return o.forEach((function(n){e=Math.min(n.values[s],e),t=Math.max(n.values[s],t)})),[e,t]}),[s,o]),r=Object(sa.a)(i,2),l=r[0],d=r[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{type:"range",min:l,max:d,value:n||l,onChange:function(e){a(parseInt(e.target.value,10))}}),Object(f.jsx)("button",{type:"button",onClick:function(){return a(void 0)},children:"Off"})]})};function di(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,a=e.setGlobalFilter,o=t.length,s=c.a.useState(n),i=Object(sa.a)(s,2),r=(i[0],i[1]),l=Object(ai.useAsyncDebounce)((function(e){a(e||void 0)}),200);return Object(f.jsx)(ti,{placeholder:"Search in ".concat(o," records..."),onSearch:function(e){r(e),l(e)}})}var ui=function(e){var t=e.tableData,n=e.className,c=e.columns,o=e.showGlobalFilter,i=e.showPagination,r=e.defaultSortColumnId,l=e.defaultSortColumnOrder,d=e.rowProps,u=e.autoResetGlobalFilter,m=e.showColumnFilter,b=e.initialFilters,p=Object(a.useMemo)((function(){return{dateBetween:ci,text:function(e,t,n){return e.filter((function(e){var a=e.values[t];return void 0===a||String(a).toLowerCase().startsWith(String(n).toLowerCase())}))}}}),[]),j=Object(a.useMemo)((function(){return{Filter:si}}),[]),h=Object(a.useMemo)((function(){return t}),[t]),O=Object(a.useMemo)((function(){return c}),[c]);O.map((function(e){var t,n;switch(e.filterType){case"numberRange":t=ii;break;case"select":t=ri;break;case"slider":t=li;break;case"dateBetween":t=oi,n="dateBetween";break;default:t=si}e.Filter=t,n&&(e.filter=n)}));var v=Object(a.useCallback)((function(e,t,n){return e.filter((function(e){var t=!1;return b.forEach((function(n){t=t||e.values[n.id]&&"function"===typeof e.values[n.id].includes&&e.values[n.id].includes(n.value)})),t}))}),[b]),g={columns:O,data:h,defaultColumn:j,filterTypes:p,initialState:{pageSize:100,sortBy:r?[{id:r,desc:"desc"===l}]:[]},autoResetGlobalFilter:u};b.length&&(g.globalFilter=v);var x=Object(ai.useTable)(g,ai.useGlobalFilter,ai.useFilters,ai.useSortBy,ai.usePagination),y=x.getTableProps,N=x.getTableBodyProps,S=x.headerGroups,T=x.rows,k=x.prepareRow,C=x.visibleColumns,w=x.preGlobalFilteredRows,_=x.setGlobalFilter,A=x.state,E=(x.pageOptions,x.page),F=x.state,I=F.pageIndex,D=F.pageSize,P=x.gotoPage,R=(x.previousPage,x.nextPage,x.setPageSize),L=(x.canPreviousPage,x.canNextPage,x.setAllFilters);Object(a.useEffect)((function(){L([]),_([])}),[m,o]),Object(a.useEffect)((function(){b.length&&_(b)}),[b,t,_]);var U=i?E:T;return Object(f.jsx)("div",{className:"table-view ".concat(n),children:Object(f.jsxs)("div",{className:"tableWrap",children:[Object(f.jsxs)("table",Object(s.a)(Object(s.a)({},y()),{},{children:[Object(f.jsxs)("thead",{children:[Object(f.jsx)("tr",{children:Object(f.jsx)("th",{colSpan:C.length,style:{textAlign:"left"},children:o&&0===b.length&&Object(f.jsx)(di,{preGlobalFilteredRows:w,globalFilter:A.globalFilter,setGlobalFilter:_})})}),S.map((function(e){return Object(f.jsx)("tr",Object(s.a)(Object(s.a)({},e.getHeaderGroupProps()),{},{className:"thead",children:e.headers.map((function(e){return Object(f.jsxs)("th",Object(s.a)(Object(s.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),e.isSorted?e.isSortedDesc?Object(f.jsx)("span",{children:"\u2193"}):Object(f.jsx)("span",{children:"\u2191"}):"",m&&Object(f.jsx)("div",{className:"columnFilter",onClick:function(e){e.stopPropagation()},children:e.canFilter?e.render("Filter"):null})]}))}))}))}))]}),Object(f.jsx)("tbody",Object(s.a)(Object(s.a)({},N()),{},{children:U.map((function(e){return k(e),Object(f.jsx)("tr",Object(s.a)(Object(s.a)({},e.getRowProps(d(e))),{},{className:"table-row",children:e.cells.map((function(e){return Object(f.jsx)("td",Object(s.a)(Object(s.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),i&&Object(f.jsxs)("div",{className:"table-pagination",children:[Object(f.jsx)("span",{children:"Page Size: "}),Object(f.jsx)(Ma.a,{children:Object(f.jsx)(Qa.a,{value:D,onChange:function(e){R(Number(e.target.value))},className:"pageSize",label:"Page Size",children:[10,20,30,40,50,60,70,80,90,100].map((function(e){return Object(f.jsx)(Ja.a,{value:e,children:e},e)}))})}),Object(f.jsx)(ni.a,{count:Math.ceil(T.length/D),color:"primary",showFirstButton:!0,showLastButton:!0,page:I+1,onChange:function(e,t){P(t-1)}}),Object(f.jsx)("span",{children:"Go to page:"}),Object(f.jsx)(Ma.a,{children:Object(f.jsx)(nc.a,{value:I+1,onChange:function(e){P(Number(e.target.value)-1)},className:"pageNumber"})})]})]})})};ui.defaultProps={tableData:[],className:"",columns:[],showGlobalFilter:!1,showPagination:!1,defaultSortColumnId:"",defaultSortColumnOrder:"",rowProps:function(){},autoResetGlobalFilter:!0,showColumnFilter:!1,initialFilters:[]};var mi=ui,bi=n(70),pi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{Header:"Bot",accessor:"name",Cell:function(t){var n,c,o=t.value,s=t.row;return Object(f.jsxs)(a.Fragment,{children:["newBot"!==(null===(n=s.original)||void 0===n?void 0:n._id)&&Object(f.jsxs)("div",{className:"bot-name-wrapper",children:[Object(f.jsx)("div",{className:"bn-icon-wrapper",children:Object(f.jsx)(Ks.b,{className:"bn-icon"})}),Object(f.jsx)("span",{children:o})]}),"newBot"===(null===(c=s.original)||void 0===c?void 0:c._id)&&Object(f.jsxs)("div",{className:"bot-name-wrapper",children:[Object(f.jsx)("div",{className:"bn-icon-wrapper",children:Object(f.jsx)(Ks.b,{className:"bn-icon"})}),Object(f.jsx)("input",{className:"newBotName",placeholder:"Add name",onChange:e.handleBotNameChange,value:e.newBotName,autoFocus:!0})]})]})}},{Header:"Created At",accessor:function(e){return b()(e.created_at).fromNow()}},{Header:"Performance",accessor:"performance",Cell:function(e){e.value;return Object(f.jsxs)("div",{className:"performance-bar-wrapper",children:[Object(f.jsx)("span",{className:"measure",children:"64%"}),Object(f.jsx)("div",{className:"p-bar",children:Object(f.jsx)("div",{className:"p-bar-indicate",style:{width:"64%",backgroundColor:Ys(64).color}})})]})}},{Header:"",accessor:"_id",Cell:function(t){var n,c,o=t.value,s=t.row,i="/bot/".concat(o);return Object(f.jsxs)(a.Fragment,{children:["newBot"!==(null===(n=s.original)||void 0===n?void 0:n._id)&&Object(f.jsxs)("div",{className:"bot-list-actions",children:[Object(f.jsx)(ra.a,{className:"lv-edit-link",to:i,children:"View"}),Object(f.jsx)(ka.a,{title:"Delete Bot",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"delete-action",onClick:function(){var t;return e.handleDeleteBotClick(null===(t=s.original)||void 0===t?void 0:t._id)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]}),"newBot"===(null===(c=s.original)||void 0===c?void 0:c._id)&&Object(f.jsxs)("div",{className:"addBotCardButtons",children:[Object(f.jsx)(Ia.a,{variant:"contained",color:"primary",className:"saveBot",disableElevation:!0,onClick:e.onSaveBotClick,children:"Save"}),Object(f.jsx)(Ia.a,{color:"secondary",disableElevation:!0,onClick:e.cancelAddBot,children:"Cancel"})]})]})}}]},ji=function(e){var t=e.auth.userData,n=e.botsState,c=e.fetchBots,o=e.createBot,i=e.changeNewBotName,r=e.cancelAddBot,l=e.saveBot,d=e.deleteBot,m=e.editBot,b=e.setSnackbar,p=e.globalState.uiConfigs,j=e.updateUIConfigs,h=p.botsListView,O=Object(a.useState)(n.newBot.name),v=Object(sa.a)(O,2),g=v[0],x=v[1],y=Object(a.useState)(""),N=Object(sa.a)(y,2),S=N[0],T=N[1],k=Object(a.useState)({id:"",mode:"",editedName:""}),C=Object(sa.a)(k,2),w=C[0],_=C[1],A=[];A=S.trim().length>0?n.botsList.filter((function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===S||void 0===S?void 0:S.toLowerCase())})):n.botsList;var E=Object(a.useCallback)(Xs.a.debounce(i,500),[]),F=function(e){x(e.target.value),E(e.target.value)},I=function(e,t){_({id:e,mode:"edit",editedName:t})},D=function(e){_(Object(s.a)(Object(s.a)({},w),{},{editedName:e.target.value}))},P=function(){_({id:"",mode:"",editedName:""})},R=function(e){13===e.which&&w.editedName.trim().length>0&&"edit"===w.mode?(m(w.id,w.editedName),P()):27===e.which?P():13===e.which&&0===w.editedName.trim().length&&b("Bot name cannot be empty","warning")};Object(a.useEffect)((function(){t&&c(t)}),[t]);var L=function(){o()},U=function(e){j({botsListView:e})},M=function(){l(n.newBot.name)},B=function(e){_({mode:"delete",id:e})},H=function(){_({id:{},mode:""})};return Object(f.jsxs)("div",{className:"bot-listing-page",children:[Object(f.jsxs)("div",{className:"bl-head",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Chatbots"}),Object(f.jsxs)("button",{type:"button",className:"app-btn-icon",onClick:L,id:"jride-bots-addbutton",children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:Object(f.jsx)(Ks.b,{className:"btn-icon"})}),"Create Chatbot"]})]}),!n.botsFetched&&Object(f.jsx)(Mo,{text:"Fetching your bots..."}),n.botsFetched&&(0!==n.botsList.length||n.unsavedBot?Object(f.jsxs)("div",{className:"bots-list-content",children:[Object(f.jsxs)("div",{className:"listing-head",children:[Object(f.jsx)(ti,{className:"bots-search",onSearch:function(e){T(e)},placeholder:"Search bot..."}),Object(f.jsxs)("div",{className:"grid-list-view",children:[Object(f.jsx)("button",{className:"switch-view list ".concat(h?"sv-select":""),onClick:function(){return U(!0)},type:"button",children:h?Object(f.jsx)(ua.r,{}):Object(f.jsx)(ua.s,{})}),Object(f.jsx)("button",{className:"switch-view card ".concat(h?"":"sv-select"),onClick:function(){return U(!1)},type:"button",children:h?Object(f.jsx)(vs.g,{}):Object(f.jsx)(vs.h,{})})]})]}),Object(f.jsx)("div",{className:"bots-wrapper",children:h?Object(f.jsx)("div",{className:"bots-list-wrapper",children:Object(f.jsx)(mi,{tableData:n.unsavedBot?[].concat(Object(u.a)(A),[Object(s.a)({},n.newBot)]):Object(u.a)(A),rowProps:function(e){return{id:"jride-bot-".concat(null===e||void 0===e?void 0:e.id)}},columns:pi({handleBotNameChange:F,newBotName:g,cancelAddBot:r,onSaveBotClick:M,handleDeleteBotClick:B}),className:"bots-list-view"})}):Object(f.jsxs)(Ra.a,{container:!0,children:[A.map((function(e,t){return Object(f.jsx)(Ra.a,{item:!0,children:Object(f.jsx)(Js,Object(s.a)(Object(s.a)({},e),{},{index:t,handleDeleteBotClick:B,handleBotNameEditClick:I,handleBotNameEditChange:D,actionData:w,handleBotNameEditCancel:P,handleBotNameEditKeyDown:R}))},t)})),n.unsavedBot&&Object(f.jsx)(Ra.a,{item:!0,children:Object(f.jsx)(Js,Object(s.a)(Object(s.a)({},n.newBot),{},{handleBotNameChange:F,newBotName:g,cancelAddBot:r,onSaveBotClick:M,id:"newBot"}))}),Object(f.jsx)(Ra.a,{item:!0,children:Object(f.jsx)("div",{className:"add-bot-card",onClick:L,children:Object(f.jsx)(bi.a,{})})})]})})]}):Object(f.jsxs)("div",{className:"bl-empty",children:[Object(f.jsx)("img",{src:"/assets/images/chill.svg",alt:"No Bots Found",className:"nobots-image"}),Object(f.jsx)("h2",{className:"empty-text",children:"You haven\u2019t added any chatbots yet. Click below to create something awesome..."}),Object(f.jsx)("button",{type:"button",className:"add-bot-button",onClick:L,children:"Create Bot!"})]})),Object(f.jsx)(Pa,{open:"delete"===w.mode,title:"Are you sure?",onClose:H,onConfirm:function(){d(w.id),H()},children:"The bot will be deleted permanently. Do you wish to proceed?"})]})},hi=Object(aa.b)((function(e){return{auth:e.auth,botsState:e.bots,globalState:e.global}}),(function(e){return{fetchBots:function(t){return e(Gs())},createBot:function(){e((function(e){e({type:Us}),e(Mn())}))},changeNewBotName:function(t){e({type:Ms,payload:t})},cancelAddBot:function(){e(Vs())},saveBot:function(t){e(function(e){return w("bots","addBot"),d("".concat(j.server,"/api/account/bot"),{args:{data:e},method:"POST",success:zs,error:wn})}(t))},deleteBot:function(t){e(function(e){return w("bots","deleteBot"),d("".concat(j.server,"/api/account/bot/").concat(e),{method:"DELETE",success:qs,error:wn})}(t))},editBot:function(t,n){e(function(e,t){return w("bots","updateBot"),d("".concat(j.server,"/api/account/bot/").concat(e),{args:{data:t},method:"PUT",success:Ws,error:wn})}(t,n))},setSnackbar:function(t,n){e(kn(t,n))},updateUIConfigs:function(t){return e(Dn(t,{showMsg:!1}))}}}))(ji),fi="SET_CONFIG_MENU",Oi="POPULATE_CLIENT_CONFIG",vi="UPDATE_CONFIG",gi="UPDATE_TOKEN",xi="SET_URL_TOKEN",yi=function(){var e,t,n,a,c,o,s,i,r,l,d,u,m,b,p,j,h,f,O,v,g,x,y,N,S,T,k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",w=k.name,_=void 0===w?"":w,A=k.buttonType,E=void 0===A?"button":A,F=k.welcomeMessage,I=void 0===F?"Hello! How are you?":F,D=k.container,P=void 0===D?"#root":D,R=k.host,L=void 0===R?"https://kairon-api.digite.com/api/bot/".concat(C,"/chat"):R,U=k.userType,M=void 0===U?"random":U,B=k.userStorage,H=void 0===B?"ls":B,G=k.styles,V=void 0===G?{}:G,z=k.headerClassName,q=void 0===z?"":z,W=k.containerClassName,K=void 0===W?"":W,Y=k.chatContainerClassName,Q=void 0===Y?"":Y,J=k.userClassName,Z=void 0===J?"":J,X=k.botClassName,$=void 0===X?"":X,ee=k.formClassName,te=void 0===ee?"":ee,ne=k.dialogMessageMap,ae=void 0===ne?{}:ne,ce=k.defaultDialogMessage,oe=void 0===ce?"":ce,se=k.dialogCloseTime,ie=void 0===se?0:se,re=k.dialogBgColor,le=void 0===re?"#ffffff":re,de=k.dialogTextColor,ue=void 0===de?"#000000":de,me=k.dialogWidth,be=void 0===me?180:me,pe=k.openButtonClassName,je=void 0===pe?"":pe,he=k.headers,fe=void 0===he?{"X-USER":"",authorization:""}:he,Oe=k.ribbonData,ve=void 0===Oe?[]:Oe;return{name:_,buttonType:E,welcomeMessage:I,container:P,host:null!==L&&void 0!==L&&L.includes("localhost:")?"https://kairon-api.digite.com/api/bot/".concat(C,"/chat"):L,userType:M,userStorage:H,styles:{headerStyle:{backgroundColor:(null===(e=V.headerStyle)||void 0===e?void 0:e.backgroundColor)||"#203089",color:(null===(t=V.headerStyle)||void 0===t?void 0:t.color)||"#ffffff",height:(null===(n=V.headerStyle)||void 0===n?void 0:n.height)||"60px",align:(null===(a=V.headerStyle)||void 0===a?void 0:a.align)||"center",src:(null===(c=V.headerStyle)||void 0===c?void 0:c.src)||""},botStyle:{backgroundColor:(null===(o=V.botStyle)||void 0===o?void 0:o.backgroundColor)||"#e0e0e0",color:(null===(s=V.botStyle)||void 0===s?void 0:s.color)||"#000000",iconSrc:(null===(i=V.botStyle)||void 0===i?void 0:i.iconSrc)||"",fontFamily:(null===(r=V.botStyle)||void 0===r?void 0:r.fontFamily)||"'Roboto', sans-serif",fontSize:(null===(l=V.botStyle)||void 0===l?void 0:l.fontSize)||"14px",showIcon:!["false",!1,void 0].includes(null===(d=V.botStyle)||void 0===d?void 0:d.showIcon)},userStyle:{backgroundColor:(null===(u=V.userStyle)||void 0===u?void 0:u.backgroundColor)||"#2b3595",color:(null===(m=V.userStyle)||void 0===m?void 0:m.color)||"#ffffff",iconSrc:(null===(b=V.userStyle)||void 0===b?void 0:b.iconSrc)||"",fontFamily:(null===(p=V.userStyle)||void 0===p?void 0:p.fontFamily)||"'Roboto', sans-serif",fontSize:(null===(j=V.userStyle)||void 0===j?void 0:j.fontSize)||"14px",showIcon:!["false",!1,void 0].includes(null===(h=V.userStyle)||void 0===h?void 0:h.showIcon)},buttonStyle:{color:(null===(f=V.buttonStyle)||void 0===f?void 0:f.color)||"#ffffff",backgroundColor:(null===(O=V.buttonStyle)||void 0===O?void 0:O.backgroundColor)||"#2b3595"},openButtonStyle:{backgroundColor:(null===(v=V.openButtonStyle)||void 0===v?void 0:v.backgroundColor)||"#2b3595",svgFillcolor:(null===(g=V.openButtonStyle)||void 0===g?void 0:g.svgFillcolor)||"#ffffff",src:(null===(x=V.openButtonStyle)||void 0===x?void 0:x.src)||""},containerStyles:{height:(null===(y=V.containerStyles)||void 0===y?void 0:y.height)||"500px",width:(null===(N=V.containerStyles)||void 0===N?void 0:N.width)||"350px",backgroundColor:(null===(S=V.containerStyles)||void 0===S?void 0:S.backgroundColor)||"#ffffff",showIcon:!["false",!1,void 0].includes(null===(T=V.containerStyles)||void 0===T?void 0:T.showIcon)}},headerClassName:q,containerClassName:K,chatContainerClassName:Q,userClassName:Z,botClassName:$,formClassName:te,dialogMessageMap:ae,defaultDialogMessage:oe,dialogCloseTime:ie,dialogBgColor:le,dialogTextColor:ue,dialogWidth:be,openButtonClassName:je,headers:{"X-USER":"random"===M?"":fe["X-USER"]||"",authorization:fe.authorization||""},ribbonData:ve}},Ni=function(e){if(!e)return{};var t=e.headers,n=e.styles,a=e.ribbonData,c=Object(s.a)(Object(s.a)({},e),{},{"X-USER":t["X-USER"],authorization:null===t||void 0===t?void 0:t.authorization,headerStyle:null===n||void 0===n?void 0:n.headerStyle,botStyle:null===n||void 0===n?void 0:n.botStyle,userStyle:null===n||void 0===n?void 0:n.userStyle,buttonStyle:null===n||void 0===n?void 0:n.buttonStyle,containerStyles:null===n||void 0===n?void 0:n.containerStyles,openButtonStyle:n.openButtonStyle,ribbonData:(null===a||void 0===a?void 0:a.filter((function(e){return!!e.constrains})))||[]});return delete c.headers,delete c.styles,c},Si=function(e){var t=e.dialogData,n=e.handleEdit,a=e.handleDelete,c=[{Header:"Message",accessor:function(e){return Object(f.jsx)("p",{className:"dialog-message",children:e.text})}},{Header:"Route",accessor:function(e){return Object(f.jsx)("p",{className:"dialog-text",children:e.route})}},{Header:"Type",accessor:function(e){return Object(f.jsx)("p",{className:"dialog-text",style:{textTransform:"capitalize"},children:e.type})}},{Header:"Actions",accessor:function(e){return Object(f.jsxs)("div",{className:"dialog-actions",children:[Object(f.jsx)(ka.a,{title:"Edit",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear edit-action",onClick:function(){return n(e.route)},children:Object(f.jsx)(da.v,{className:"ibc-icon"})})}),Object(f.jsx)(ka.a,{title:"Delete",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(){return a(e.route)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]})}}];return t?{columns:c,tableData:Object.keys(t).map((function(e){return Object(s.a)({route:e},t[e])}))}:{columns:c,tableData:[]}},Ti=function(e){switch(e){case 0:return{height:"420px",width:"310px"};case 1:default:return{height:"500px",width:"350px"};case 2:return{height:"600px",width:"380px"}}},ki=function(e){switch(e){case 0:return{color:"#ffffff",backgroundColor:"#0f22a7"};case 1:return{color:"#ffffff",backgroundColor:"#ff0072"};case 2:return{color:"#404040",backgroundColor:"#e9ca29"};default:return{color:"#ffffff",backgroundColor:"#008f7e"}}},Ci=function(e,t){return function(n){var a=t.botId;n(Tn()),n({type:Oi,payload:{data:yi(e.data,a)}})}},wi=function(e,t){return function(n){var a=t.data;n({type:vi,payload:{data:a}}),n(kn(e.message,"success"))}},_i=function(e){var t;return{type:gi,payload:{token:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.access_token)||""}}},Ai=function(e){var t=e.data;return{type:xi,payload:{token:t.substr(t.lastIndexOf("/")+1,t.length)}}},Ei=n(8),Fi=n(183),Ii=n(368),Di=function(e){var t,n,c,o=e.formState,i=e.setFormState,r=e.saveConfigs,l=(e.selectedMenu,e.scrollToTop),d=Object(a.useRef)(null),m=Object(a.useReducer)(Nc,{}),b=Object(sa.a)(m,2),p=b[0],j=b[1],h=Object(a.useState)([]),v=Object(sa.a)(h,2),g=v[0],x=v[1],y=Object(a.useState)(null),N=Object(sa.a)(y,2),S=N[0],T=N[1],k=Object(a.useState)(!1),C=Object(sa.a)(k,2),w=C[0],_=C[1],A=Object(aa.c)(),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",n=e.content,a=e.constrains,c=e.placement,s=e.height,i=e.buttonHeight,l=e.openDelay,d=e.fontSize,m=e.fontFamily,b=e.bgColor,p=void 0===b?"#093690":b,h=e.textColor,f=void 0===h?"#ffffff":h,O=e.linkBgColor,v=void 0===O?"#99c6f0":O,y=e.linkTextColor,N=void 0===y?"#093690":y;if(null!==n&&void 0!==n&&n.trim()||void 0!==e.index)if(x([]),a&&null!==a&&void 0!==a&&a.length||void 0!==e.index){if(a){var S=[];if(null===a||void 0===a||a.forEach((function(e,t){e.path||S.push("path_error_".concat(t)),e.condition||S.push("condition_error_".concat(t))})),S.length){var k=g.filter((function(e){return!e.includes("path_error")&&!e.includes("condition_error")}));return void x([].concat(Object(u.a)(k),S))}}var C;if(x([]),j({type:"FORM_RESET"}),"delete"!==t)C={ribbonData:[].concat(Object(u.a)(o.ribbonData),[{constrains:a,buttonHeight:i,content:n,placement:c,height:s,fontSize:d,fontFamily:m,openDelay:l,bgColor:p,textColor:f,linkBgColor:v,linkTextColor:N}])};else{var w,_=null===o||void 0===o||null===(w=o.ribbonData)||void 0===w?void 0:w.filter((function(t,n){return n!==e.index}));C={ribbonData:Object(u.a)(_)}}T(null),r(C)}else A(wn({message:"Please add at least one path to enable the ribbon."}));else x([].concat(Object(u.a)(g),["ribbonContent"]))},F=function(e){var t,n;null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.name&&null!==e&&void 0!==e&&null!==(n=e.target)&&void 0!==n&&n.value&&j({type:"FORM_SET_DATA",payload:Object(D.a)({},e.target.name,e.target.value)})},I=function(e,t){var n=null!==p&&void 0!==p&&p.constrains?Object(u.a)(null===p||void 0===p?void 0:p.constrains):[],a=Object(s.a)({},n[t]);a[e.target.name]=e.target.value,n.splice(t,1,a),j({type:"FORM_SET_DATA",payload:{constrains:n}})};return Object(f.jsxs)("div",{className:"ribbon-wrapper",children:[Object(f.jsx)("h2",{className:"sub-title",children:"Add Ribbon"}),Object(f.jsx)(oc,{name:"content",label:"Content*",value:p.content||"",onChange:function(e){return j({type:"FORM_SET_DATA",payload:{content:e.target.value}})},placeholder:"e.g., Hey, thanks for trying out Kairon.",meta:{error:g.includes("ribbonContent")&&"Content is a required field.",touched:!0}}),Object(f.jsx)("div",{className:"add-buttons",children:Object(f.jsxs)("button",{className:"insert-link",type:"button",onClick:function(){return _(!0)},children:[Object(f.jsx)($s.e,{className:"link-icon"}),Object(f.jsx)("span",{className:"link-text",children:"Add Link"})]})}),Object(f.jsx)(wc,{form:"CLIENT_RIBBON",onSubmit:E,customReducer:[p,j],clearOnUnmount:!0,submitButton:Object(f.jsx)("button",{type:"submit",style:{display:"none"},ref:function(e){return d=e},children:"submit"})}),Object(f.jsxs)("div",{className:"ribbon-colors-wrapper",children:[Object(f.jsxs)("div",{className:"ribbon-color-pickers",children:[Object(f.jsxs)("div",{className:"picker-wrapper",children:[Object(f.jsx)("label",{htmlFor:"bgColor",children:"Background Color"}),Object(f.jsx)("input",{type:"color",name:"bgColor",className:"color-picker",value:p.bgColor||"#093690",onChange:F})]}),Object(f.jsxs)("div",{className:"picker-wrapper",children:[Object(f.jsx)("label",{htmlFor:"textColor",children:"Text Color"}),Object(f.jsx)("input",{type:"color",name:"textColor",className:"color-picker",value:p.textColor||"#ffffff",onChange:F})]})]}),Object(f.jsxs)("div",{className:"ribbon-color-pickers",children:[Object(f.jsxs)("div",{className:"picker-wrapper",children:[Object(f.jsx)("label",{htmlFor:"linkBgColor",children:"Link Background Color"}),Object(f.jsx)("input",{type:"color",name:"linkBgColor",className:"color-picker",value:p.linkBgColor||"#99c6f0",onChange:F})]}),Object(f.jsxs)("div",{className:"picker-wrapper",children:[Object(f.jsx)("label",{htmlFor:"linkTextColor",children:"Link Text Color"}),Object(f.jsx)("input",{type:"color",name:"linkTextColor",className:"color-picker",value:p.linkTextColor||"#093690",onChange:F})]})]})]}),Object(f.jsxs)("div",{className:"ribbon-constrains-wrapper",children:[Object(f.jsx)("div",{className:"ribbon-constrains",children:p.constrains&&!(null===(t=p.constrains)||void 0===t||!t.length)&&p.constrains.map((function(e,t){return Object(f.jsxs)(Ra.a,{container:!0,spacing:2,children:[Object(f.jsx)(ic,{name:"path",label:"Path*",value:e.path,onChange:function(e){return I(e,t)},placeholder:"e.g., /kairon/",meta:{error:g.includes("path_error_".concat(t))&&"Path is a required field.",touched:!0},grid:{xs:12,sm:12,md:6,lg:6,xl:6}}),Object(f.jsx)(Xa,{name:"condition",label:"Condition*",value:e.condition,onChange:function(e){return I(e,t)},options:[{value:"is",label:"is"},{value:"includes",label:"includes"},{value:"is_not",label:"is not"},{value:"not_includes",label:"not includes"},{value:"excludes",label:"path to exclude"}],meta:{error:g.includes("condition_error_".concat(t))&&"Condition is a required field.",touched:!0},grid:{xs:12,sm:12,md:5,lg:5,xl:5}}),Object(f.jsx)(Ra.a,{item:!0,xs:12,sm:12,md:1,lg:1,xl:1,children:Object(f.jsx)("button",{type:"button",className:"constrain-delete-button",onClick:function(){return function(e){var t=p.constrains;if(t){var n=t.filter((function(t,n){return n!==e}));j({type:"FORM_SET_DATA",payload:{constrains:n}})}}(t)},children:Object(f.jsx)(da.k,{className:"constrain-delete-icon"})})})]},t)}))}),Object(f.jsxs)("button",{type:"button",className:"add-constrain",onClick:function(){var e=null!==p&&void 0!==p&&p.constrains?Object(u.a)(null===p||void 0===p?void 0:p.constrains):[];e.push({path:"",condition:""}),j({type:"FORM_SET_DATA",payload:{constrains:e}})},children:[Object(f.jsx)(da.a,{className:"icon"}),Object(f.jsx)("span",{className:"text",children:"Add Path"})]})]}),Object(f.jsxs)("div",{className:"ribbon-buttons",children:[S&&Object(f.jsx)("button",{className:"form-button cancel-button",type:"button",onClick:function(){var e=S.content,t=S.constrains,n=S.placement,a=S.height,c=S.buttonHeight,s=S.openDelay,r=S.fontSize,l=S.fontFamily,d=S.bgColor,m=S.textColor,b=S.linkBgColor,p=S.linkTextColor,h={ribbonData:[].concat(Object(u.a)(o.ribbonData),[{constrains:t,buttonHeight:c,content:e,placement:n,height:a,fontSize:r,fontFamily:l,openDelay:s,bgColor:d,textColor:m,linkBgColor:b,linkTextColor:p}])};x([]),j({type:"FORM_RESET"}),T(null),i({type:"FORM_SET_DATA",payload:{ribbonData:h.ribbonData}})},children:"CANCEL"}),Object(f.jsx)("button",{className:"form-button",type:"button",onClick:function(){return d.click()},children:S?"UPDATE":"ADD"})]}),Object(f.jsxs)("div",{className:"ribbons-map-wrapper",children:[Object(f.jsx)("h2",{className:"sub-title",children:"Active Ribbons"}),(!o.ribbonData||0===(null===(n=o.ribbonData)||void 0===n?void 0:n.length))&&!S&&Object(f.jsx)("span",{children:"No Active Ribbons"}),null===o||void 0===o||null===(c=o.ribbonData)||void 0===c?void 0:c.map((function(e,t){var n=e.bgColor,a=e.constrains,c=e.content,r=e.fontFamily,d=e.fontSize,u=e.height,m=e.buttonHeight,b=e.linkBgColor,p=e.linkTextColor,h=e.openDelay,v=e.placement,g=e.textColor;return Object(f.jsxs)("div",{className:"ribbon-view",children:[Object(f.jsxs)("div",{className:"ribbon-content",children:[Object(f.jsx)("span",{className:"content-text",children:O(c)}),Object(f.jsxs)("div",{className:"ribbon-actions",children:[Object(f.jsx)(ka.a,{title:"Duplicate",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear duplicate-action",onClick:function(){return function(e){var t=o.ribbonData[e];j({type:"FORM_SET_DATA",payload:Object(s.a)({},t)}),l()}(t)},children:Object(f.jsx)(zo.b,{className:"ibc-icon"})})}),Object(f.jsx)(ka.a,{title:"Edit",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear edit-action",onClick:function(){return function(e){var t,n=Object(s.a)({},o.ribbonData[e]),a=null===(t=o.ribbonData)||void 0===t?void 0:t.filter((function(t,n){return n!==e}));i({type:"FORM_SET_DATA",payload:{ribbonData:a}}),j({type:"FORM_SET_DATA",payload:Object(s.a)({},n)}),T(Object(s.a)({},n)),l()}(t)},children:Object(f.jsx)(da.v,{className:"ibc-icon"})})}),Object(f.jsx)(ka.a,{title:"Delete",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(){return E({index:t},"delete")},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]})]}),a&&Object(f.jsx)("div",{className:"ribbon-head",children:a.map((function(e,t){var n;return Object(f.jsxs)("div",{className:"constrain-wrapper",children:[Object(f.jsxs)("div",{className:"path-info",children:[Object(f.jsx)("span",{className:"info-name",children:"Path:"}),Object(f.jsx)("span",{className:"info-text",title:e.path,children:e.path})]}),Object(f.jsxs)("div",{className:"condition-info",children:[Object(f.jsx)("span",{className:"info-name",children:"Condition:"}),Object(f.jsx)("span",{className:"info-text",children:null===(n=e.condition)||void 0===n?void 0:n.replace("_"," ")})]})]},t)}))}),Object(f.jsxs)("div",{className:"ribbon-info",children:[Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"info-name",children:"Placement:"}),Object(f.jsx)("span",{className:"info-text",children:v})]}),Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"info-name",children:"Height:"}),Object(f.jsx)("span",{className:"info-text",children:u})]}),Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"info-name",children:"Button Height:"}),Object(f.jsx)("span",{className:"info-text",children:m})]})]}),Object(f.jsxs)("div",{className:"ribbon-info",children:[Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"info-name",children:"Open Delay:"}),Object(f.jsxs)("span",{className:"info-text",children:[h," sec"]})]}),Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"info-name",children:"Font Size:"}),Object(f.jsx)("span",{className:"info-text",children:d})]}),Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("span",{className:"info-name",children:"Font Family:"}),Object(f.jsx)("span",{className:"info-text",children:r})]})]}),Object(f.jsx)("div",{className:"ribbon-preview",style:{background:n,color:g},children:Object(f.jsxs)("div",{className:"preview-content",children:["This is Ribbon Preview."," ",Object(f.jsx)("a",{href:"https://digite.com",rel:"noreferrer",target:"_blank",style:{background:b,color:p},children:"Digit\xe9"})]})})]},t)}))]}),Object(f.jsx)(Pa,{open:w,title:"Add link",onClose:function(){return _(!1)},noDialogActions:!0,children:Object(f.jsx)(wc,{form:"ADD_URL",onSubmit:function(e){var t=e.link,n=e.linkText,a="".concat(p.content||"",' <a target="_blank" href="').concat(t,'">').concat(n,"</a>");_(!1),j({type:"FORM_SET_DATA",payload:{content:a}})},submitButton:Object(f.jsx)(Ia.a,{type:"submit",color:"primary",className:"ff-form-button",children:"Save"}),secondaryButton:Object(f.jsx)(Ia.a,{onClick:function(){return _(!1)},className:"ff-form-button",children:"Cancel"})})})]})},Pi=[{id:"bot",text:"Bot",name:"botStyle"},{id:"user",text:"User",name:"userStyle"},{id:"hdr",text:"Header",name:"headerStyle"},{id:"send",text:"Send Icon",name:"buttonStyle"},{id:"cont",text:"Chatbox",name:"containerStyles"},{id:"open",text:"Open Icon",name:"openButtonStyle"}],Ri=[{text:"Bot Icon",name:"botStyle",accessor:"iconSrc",showToggleIcon:!0},{text:"User Icon",name:"userStyle",accessor:"iconSrc",showToggleIcon:!0},{text:"Header Icon",name:"headerStyle",accessor:"src"},{text:"Open Button Icon",name:"openButtonStyle",accessor:"src"}],Li=function(e){var t=e.open,n=e.value,a=e.children;return Object(f.jsx)(ka.a,{open:t,enterTouchDelay:0,placement:"top",title:n,children:a})},Ui=function(e){var t,n,c,o,i,r,l,d,m,b=e.clientState,p=e.customReducer,j=e.saveConfigs,h=e.getToken,O=Object(a.useRef)(null),v=Object(a.useRef)(null),g=Object(a.useState)([]),x=Object(sa.a)(g,2),N=x[0],S=x[1],T=Object(a.useState)(null),k=Object(sa.a)(T,2),C=k[0],w=k[1],_=Object(a.useState)(null),A=Object(sa.a)(_,2),E=A[0],F=A[1],I=b.selectedMenu,P=Object(sa.a)(p,2),R=P[0],L=P[1],U=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new",a=e.route,c=e.text,o=e.type;w(null),"delete"!==n?t={dialogMessageMap:Object(s.a)(Object(s.a)({},R.dialogMessageMap),{},Object(D.a)({},a,{text:c,type:o}))}:(delete R.dialogMessageMap[a],t={dialogMessageMap:Object(s.a)({},R.dialogMessageMap)}),F(null),"cancelEdit"!==n?j(t):L({type:"FORM_SET_DATA",payload:{dialogMessageMap:t.dialogMessageMap}})},M=function(e,t){var n=t.name,a=t.value,c=Object(s.a)(Object(s.a)({},R[n]),{},Object(D.a)({},e,a));L({type:"FORM_SET_DATA",payload:Object(D.a)({},n,c)})};return Object(a.useEffect)((function(){S([]),w(null),E&&3!==I&&U(E,"cancelEdit")}),[I]),Object(f.jsxs)("div",{className:"client-configs",ref:v,children:[0===I&&Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(wc,{schema:Sc(R),onSubmit:function(e){var t=e.userType,n=e["X-USER"],a=e.buttonType,c=e.container,o=e.host,s=e.name,i=e.userStorage,r=e.welcomeMessage;if(R.authorization){S([]);var l={buttonType:a,container:c,host:o,name:s,userStorage:i,welcomeMessage:r,userType:t,headers:{authorization:R.authorization,"X-USER":"custom"===t?n:""}};j(l)}else S([].concat(Object(u.a)(N),["auth"]))},customReducer:[R,L],submitButton:Object(f.jsx)("button",{type:"submit",style:{display:"none"},ref:function(e){return O=e},children:"submit"})}),Object(f.jsxs)("div",{className:"token-wrapper",children:[Object(f.jsx)(ic,{name:"authorization",label:"Authorization Token*",value:null===R||void 0===R?void 0:R.authorization,onChange:function(e){return L({type:"FORM_SET_DATA",payload:{authorization:e.target.value}})},placeholder:"Authorization Token",meta:{error:!N.includes("auth")||null!==R&&void 0!==R&&R.authorization?"":"Token is a required field.",touched:!0},className:"token"}),Object(f.jsx)(ka.a,{title:"Generate Token",placement:"top",children:Object(f.jsx)(Ia.a,{className:"gen-button",variant:"contained",color:"primary",disableElevation:!0,onClick:h,children:Object(f.jsx)(qo.i,{size:20})})})]})]}),1===I&&Object(f.jsxs)("div",{className:"client-theme-section",children:[Object(f.jsxs)("div",{className:"auto-config",children:[Object(f.jsxs)("div",{className:"color-theme",children:[Object(f.jsx)("h3",{className:"sub-title",children:"Color Theme"}),Object(f.jsx)("div",{className:"themes-wrapper",children:Object(u.a)(new Array(4)).map((function(e,t){var n=function(e){var t=ki(e),n=R.headerStyle,a=R.openButtonStyle,c=R.userStyle,o=R.buttonStyle,i=R.botStyle,r=R.containerStyles,l=Object(s.a)(Object(s.a)({},n),t),d=Object(s.a)(Object(s.a)({},a),{},{backgroundColor:t.backgroundColor,svgFillcolor:t.color}),u=Object(s.a)(Object(s.a)({},c),t),m=Object(s.a)(Object(s.a)({},o),t),b=Object(s.a)(Object(s.a)({},i),{},{color:"#000000",backgroundColor:"#e0e0e0"});return!!(y(l,n)&&y(d,a)&&y(u,c)&&y(m,o)&&y(b,i)&&"#ffffff"===(null===r||void 0===r?void 0:r.backgroundColor))}(t);return Object(f.jsx)("div",{className:"chat-theme theme-".concat(t),role:"button",tabIndex:0,onClick:function(){return function(e){var t=ki(e),n=R.headerStyle,a=R.openButtonStyle,c=R.userStyle,o=R.buttonStyle,i=R.botStyle,r=R.containerStyles;L({type:"FORM_SET_DATA",payload:{headerStyle:Object(s.a)(Object(s.a)({},n),t),openButtonStyle:Object(s.a)(Object(s.a)({},a),{},{svgFillcolor:t.color,backgroundColor:t.backgroundColor}),userStyle:Object(s.a)(Object(s.a)({},c),t),buttonStyle:Object(s.a)(Object(s.a)({},o),t),botStyle:Object(s.a)(Object(s.a)({},i),{},{color:"#000000",backgroundColor:"#e0e0e0"}),containerStyles:Object(s.a)(Object(s.a)({},r),{},{backgroundColor:"#ffffff"})}})}(t)},children:Object(f.jsx)(qo.a,{className:"select-icon ".concat(n?"theme-selected":"")})},t)}))})]}),Object(f.jsxs)("div",{className:"chatbox-size",children:[Object(f.jsx)("h3",{className:"sub-title",children:"Chatbox Size"}),Object(f.jsx)("div",{className:"size-wrapper",children:Object(u.a)(new Array(3)).map((function(e,t){var n=function(e){var t=Ti(e),n=t.height,a=t.width,c=R.containerStyles;return(null===c||void 0===c?void 0:c.height)===n&&(null===c||void 0===c?void 0:c.width)===a}(t);return Object(f.jsx)("div",{className:"size-box size-".concat(t," ").concat(n?"size-selected":""),role:"button",tabIndex:0,onClick:function(){return function(e){var t=Ti(e);L({type:"FORM_SET_DATA",payload:{containerStyles:Object(s.a)(Object(s.a)({},R.containerStyles),t)}})}(t)}},t)}))})]})]}),Object(f.jsx)("div",{className:"or-seperator",children:Object(f.jsx)("p",{className:"or-text",children:"OR"})}),Object(f.jsx)("h2",{className:"customize-heading",children:"Customize as you need"}),Object(f.jsxs)("div",{className:"color-picker-wrapper",children:[Pi.map((function(e){return Object(f.jsx)("div",{style:{gridArea:e.id},className:"row-first",children:e.text},e.id)})),Object(f.jsxs)("div",{className:"row-second pick-labels",children:[Object(f.jsx)("div",{className:"row-first",children:"Primary Color"}),Object(f.jsx)("div",{className:"row-first",children:"Background"})]}),Pi.map((function(e){var t,n,a,c=e.id,o=e.name;return Object(f.jsxs)("div",{style:{gridArea:"".concat(c,"-pick")},className:"row-second",children:[["containerStyles"].includes(o)?"__":Object(f.jsx)("input",{type:"color",className:"color-picker",value:("openButtonStyle"===o?null===(t=R[o])||void 0===t?void 0:t.svgFillcolor:null===(n=R[o])||void 0===n?void 0:n.color)||"#ffffff",onChange:function(e){return M("openButtonStyle"===o?"svgFillcolor":"color",{name:o,value:e.target.value})}}),Object(f.jsx)("input",{type:"color",className:"color-picker",value:(null===(a=R[o])||void 0===a?void 0:a.backgroundColor)||"#adf",onChange:function(e){return M("backgroundColor",{name:o,value:e.target.value})}})]},c)}))]}),Object(f.jsx)("h3",{className:"sub-title",children:"Size and Alignment"}),Object(f.jsxs)("div",{className:"size-sliders",children:[Object(f.jsxs)("div",{className:"configure-size-wrapper",children:[Object(f.jsx)("h4",{className:"title",children:"Chat Container"}),Object(f.jsxs)("div",{className:"sliders-wrapper",children:[Object(f.jsxs)("div",{className:"configure-size",children:[Object(f.jsx)("p",{className:"slider-title",children:"Height"}),Object(f.jsx)(Ii.a,{value:parseInt(null===R||void 0===R||null===(t=R.containerStyles)||void 0===t?void 0:t.height)||500,onChange:function(e,t){return M("height",{name:"containerStyles",value:"".concat(t,"px")})},min:280,max:720,ValueLabelComponent:Li})]}),Object(f.jsxs)("div",{className:"configure-size",children:[Object(f.jsx)("p",{className:"slider-title",children:"Width"}),Object(f.jsx)(Ii.a,{value:parseInt(null===R||void 0===R||null===(n=R.containerStyles)||void 0===n?void 0:n.width)||350,onChange:function(e,t){return M("width",{name:"containerStyles",value:"".concat(t,"px")})},min:280,max:500,ValueLabelComponent:Li})]})]})]}),Object(f.jsxs)("div",{className:"configure-size-wrapper",children:[Object(f.jsx)("h4",{className:"title",children:"Header"}),Object(f.jsxs)("div",{className:"sliders-wrapper",children:[Object(f.jsxs)("div",{className:"configure-size",children:[Object(f.jsx)("p",{className:"slider-title",children:"Height"}),Object(f.jsx)(Ii.a,{value:parseInt(null===R||void 0===R||null===(c=R.headerStyle)||void 0===c?void 0:c.height)||60,onChange:function(e,t){return M("height",{name:"headerStyle",value:"".concat(t,"px")})},min:20,max:100,ValueLabelComponent:Li})]}),Object(f.jsxs)("div",{className:"configure-size",children:[Object(f.jsx)("p",{className:"slider-title",children:"Alignment"}),Object(f.jsx)(Ii.a,{value:"left"===(null===R||void 0===R||null===(o=R.headerStyle)||void 0===o?void 0:o.align)?0:"right"===(null===R||void 0===R||null===(i=R.headerStyle)||void 0===i?void 0:i.align)?2:1,onChange:function(e,t){return M("align",{name:"headerStyle",value:0===t?"left":2===t?"right":"center"})},step:1,min:0,max:2,ValueLabelComponent:function(e){var t=e.open,n=e.value,a=e.children;return Object(f.jsx)(ka.a,{open:t,enterTouchDelay:0,placement:"top",title:0===n?"Left":1===n?"Center":"Right",children:a})}})]})]})]})]}),Object(f.jsx)("h3",{className:"sub-title",children:"Custom CSS Classes"}),Object(f.jsx)(wc,{form:"CLIENT_CLASSNAMES",onSubmit:function(e){var t=R.headerStyle,n=R.containerStyles,a=R.userStyle,c=R.buttonStyle,o=R.botStyle,s=R.openButtonStyle,i=R.botClassName,r=R.chatContainerClassName,l=R.containerClassName,d=R.formClassName,u=R.headerClassName,m=R.openButtonClassName,b=R.userClassName;j({botClassName:i,chatContainerClassName:r,containerClassName:l,formClassName:d,headerClassName:u,openButtonClassName:m,userClassName:b,styles:{headerStyle:t,containerStyles:n,userStyle:a,buttonStyle:c,botStyle:o,openButtonStyle:s}})},customReducer:[R,L],submitButton:Object(f.jsx)("button",{type:"submit",style:{display:"none"},ref:function(e){return O=e},children:"submit"})})]}),2===I&&Object(f.jsxs)("div",{className:"assets-wrapper",children:[Object(f.jsx)("h3",{className:"sub-title",children:"Font Settings"}),Object(f.jsx)(wc,{form:"CLIENT_FONTS",onSubmit:function(e){var t=e.userFontFamily,n=e.userFontSize,a=e.botFontFamily,c=e.botFontSize,o=R.headerStyle,i=R.containerStyles,r=R.userStyle,l=R.buttonStyle,d=R.botStyle,u={headerStyle:o,containerStyles:i,buttonStyle:l,openButtonStyle:R.openButtonStyle,userStyle:Object(s.a)(Object(s.a)({},r),{},{fontFamily:t,fontSize:n}),botStyle:Object(s.a)(Object(s.a)({},d),{},{fontFamily:a,fontSize:c})};j({styles:u})},populateData:{userFontFamily:null===R||void 0===R||null===(r=R.userStyle)||void 0===r?void 0:r.fontFamily,userFontSize:null===R||void 0===R||null===(l=R.userStyle)||void 0===l?void 0:l.fontSize,botFontFamily:null===R||void 0===R||null===(d=R.botStyle)||void 0===d?void 0:d.fontFamily,botFontSize:null===R||void 0===R||null===(m=R.botStyle)||void 0===m?void 0:m.fontSize},submitButton:Object(f.jsx)("button",{type:"submit",style:{display:"none"},ref:function(e){return O=e},children:"submit"})}),Object(f.jsxs)("div",{className:"icon-uploads-section",children:[Object(f.jsx)("h3",{className:"sub-title",children:"Icons and Images"}),Object(f.jsx)("div",{className:"icon-uploads-wrapper",children:Ri.map((function(e,t){var n=e.accessor,a=e.name,c=e.text,o=e.showToggleIcon;return Object(f.jsxs)("div",{className:"icon-upload",children:[Object(f.jsxs)("div",{className:"upload-header",children:[Object(f.jsx)("p",{className:"text",children:c}),o&&Object(f.jsx)($a.a,{checked:R[a].showIcon,onChange:function(e,t){return M("showIcon",{name:a,value:t})},color:"primary"})]}),Object(f.jsxs)("label",{className:"app-btn-icon",htmlFor:"".concat(a,"_").concat(n),children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:Object(f.jsx)(da.n,{})}),"Upload"]}),Object(f.jsx)("input",{type:"file",id:"".concat(a,"_").concat(n),name:"".concat(a,"_").concat(n),hidden:!0,onChange:function(e){return function(e,t){var n,a,c=t.accessor,o=t.name;if((null===(n=e.target)||void 0===n||null===(a=n.files)||void 0===a?void 0:a.length)>0){var i=e.target.files[0];if(0===i.type.indexOf("image/svg+xml")){var r=new FileReader;r.onload=function(e){L({type:"FORM_SET_DATA",payload:Object(D.a)({},o,Object(s.a)(Object(s.a)({},R[o]),{},Object(D.a)({},c,e.target.result)))})},r.readAsText(i)}}}(e,{accessor:n,name:a})},accept:"image/svg+xml"}),Object(f.jsx)("div",{className:"or-seperator",children:Object(f.jsx)("p",{className:"or-text",children:"OR"})}),Object(f.jsx)(ic,{name:"".concat(n,"_").concat(t),label:"URL or Relative path",value:R[a]&&R[a][n]||"",onChange:function(e){return L({type:"FORM_SET_DATA",payload:Object(D.a)({},a,Object(s.a)(Object(s.a)({},R[a]),{},Object(D.a)({},n,e.target.value)))})},placeholder:"URL or Relative path",meta:{error:!1,touched:!0},className:"upload-text"})]},t)}))})]})]}),3===I&&Object(f.jsxs)("div",{className:"dialog-messages-wrapper",children:[Object(f.jsx)("h3",{className:"sub-title",children:"Dialog Theme"}),Object(f.jsxs)("div",{className:"dialog-color-picker-wrapper",children:[Object(f.jsxs)("div",{className:"color-picker-div",children:[Object(f.jsx)("label",{children:"Background Color"}),Object(f.jsx)("input",{name:"dialogBgColor",type:"color",className:"color-picker",value:(null===R||void 0===R?void 0:R.dialogBgColor)||"#ffffff",onChange:function(e){return L({type:"FORM_SET_DATA",payload:{dialogBgColor:e.target.value}})}}),Object(f.jsx)("label",{children:"Text Color"}),Object(f.jsx)("input",{name:"dialogTextColor",type:"color",className:"color-picker",value:(null===R||void 0===R?void 0:R.dialogTextColor)||"#000000",onChange:function(e){return L({type:"FORM_SET_DATA",payload:{dialogTextColor:e.target.value}})}})]}),Object(f.jsx)(ic,{name:"dialogWidth",label:"Dialog Width",value:R.dialogWidth,onChange:function(e){L({type:"FORM_SET_DATA",payload:{dialogWidth:parseInt(e.target.value)>=0?parseInt(e.target.value):0}})},placeholder:"e.g., 180",type:"number",meta:{error:!1,touched:!0},className:"dialog-close-field"})]}),Object(f.jsx)("h3",{className:"sub-title",children:"Dialog Message"}),Object(f.jsx)(oc,{name:"defaultDialogMessage",label:"Default Dialog Message",value:R.defaultDialogMessage,onChange:function(e){return L({type:"FORM_SET_DATA",payload:{defaultDialogMessage:e.target.value}})},placeholder:"e.g., Welcome to Kairon. Have a great day!",meta:{error:!1,touched:!0}}),Object(f.jsx)(ic,{name:"dialogCloseTime",label:"Dialog Close Time (in seconds)",value:R.dialogCloseTime,onChange:function(e){L({type:"FORM_SET_DATA",payload:{dialogCloseTime:parseInt(e.target.value)>=0?parseInt(e.target.value):0}})},placeholder:"e.g., 5",type:"number",meta:{error:!1,touched:!0},className:"dialog-close-field"}),Object(f.jsx)("div",{className:"dialog-save-buttons",children:Object(f.jsx)("button",{className:"form-button",type:"button",onClick:function(){j({defaultDialogMessage:R.defaultDialogMessage,dialogCloseTime:R.dialogCloseTime,dialogBgColor:R.dialogBgColor,dialogTextColor:R.dialogTextColor,dialogWidth:R.dialogWidth})},children:"SAVE"})}),Object(f.jsx)("p",{className:"section-title",children:"Add as per routes"}),Object(f.jsx)(wc,{form:"CLIENT_DIALOG",onSubmit:U,onCancel:function(){return U(E,"cancelEdit")},populateData:C,submitButtonLabel:E?"UPDATE":"ADD",showCancelButton:!!E,clearOnSubmit:!0,clearOnCancel:!0}),Object(f.jsx)(mi,Object(s.a)(Object(s.a)({},Si({dialogData:R.dialogMessageMap,handleEdit:function(e){var t=R.dialogMessageMap[e],n=t.text,a=t.type;F(Object(s.a)(Object(s.a)({},R.dialogMessageMap[e]),{},{route:e})),delete R.dialogMessageMap[e],w({route:e,text:n,type:a})},handleDelete:function(e){return U({route:e},"delete")}})),{},{className:"dialog-list"}))]}),4===I&&Object(f.jsx)(Di,{formState:R,setFormState:L,saveConfigs:j,selectedMenu:I,scrollToTop:function(){v&&v.current.scrollTo({top:0,behavior:"smooth"})}}),![3,4].includes(I)&&Object(f.jsx)("div",{className:"client-buttons",children:Object(f.jsx)("button",{className:"form-button",type:"button",onClick:function(){return O.click()},children:"SAVE"})})]})},Mi=["userType","headerStyle","botStyle","userStyle","containerStyles","openButtonStyle","buttonStyle","X-USER","authorization"],Bi=[{name:"Essentials"},{name:"Theme"},{name:"Assets"},{name:"Dialog Message"},{name:"Ribbon"}],Hi=function(e){var t=e.clientState,n=e.setMenu,c=e.updateConfigs,o=e.getToken,i=e.fetchClientConfigs,r=e.getClientConfigURL,l=Object(a.useState)(!1),d=Object(sa.a)(l,2),u=d[0],m=d[1],b=t.config,p=t.selectedMenu,j=t.configFetched,h=Object(a.useReducer)(Nc,Ni(b)),O=Object(sa.a)(h,2),v=O[0],g=O[1],x=Object(_c.i)().params.botId,y=window.location.origin.includes("://kairon")?"https://kairon-api.digite.com":"http://192.168.100.109:8080",N=(v.userType,v.headerStyle),S=v.botStyle,T=v.userStyle,k=v.containerStyles,C=v.openButtonStyle,w=v.buttonStyle,_=v["X-USER"],A=v.authorization,E=Object(Ei.a)(v,Mi);Object(a.useEffect)((function(){j||i(x)}),[]),Object(a.useEffect)((function(){b&&g({type:"FORM_SET_DATA",payload:Ni(b)})}),[b]);return Object(f.jsxs)("div",{className:"app-page chatClient-wrapper",children:[Object(f.jsxs)("div",{className:"client-head",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Configure Client"}),Object(f.jsxs)("button",{type:"button",className:"app-btn-icon",onClick:function(){r(x),m(!0)},children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:Object(f.jsx)($s.c,{className:"btn-icon"})}),"Generate"]})]}),Object(f.jsxs)("div",{className:"clientContents-wrapper",children:[Object(f.jsx)("div",{className:"client-menu",children:Bi.map((function(e,t){return Object(f.jsxs)("div",{className:"menu-item ".concat(t===p?"menu-selected":""),role:"button",tabIndex:0,onClick:function(){return n(t)},children:[e.name,Object(f.jsx)("div",{className:"complete-ui"})]},t)}))}),Object(f.jsx)(Ui,{clientState:t,customReducer:[v,g],saveConfigs:function(e){var t=function(e,t){var n=Object(s.a)(Object(s.a)({},t),e);return yi(n)}(e,b);c(x,t)},getToken:function(){return o(x)}}),Object(f.jsx)("div",{className:"client-chatbox",children:Object(f.jsx)(Fi.a,Object(s.a)(Object(s.a)({styles:{headerStyle:N,botStyle:S,buttonStyle:w,containerStyles:k,openButtonStyle:C,userStyle:T},headers:{"X-USER":_,authorization:A}},E),{},{userType:"random",containerClassName:"client-realtime",openButtonClassName:"open-button",ribbonData:[]}))})]}),Object(f.jsx)(Pa,{open:u,onClose:function(){return m(!1)},noDialogActions:!0,children:Object(f.jsxs)("div",{className:"client-dialog",children:[Object(f.jsx)("h3",{className:"copy-note",children:"Add Chat Widget to your website"}),Object(f.jsx)("p",{className:"test-note",children:"In order to add Chat Widget to your website, copy the following code snippet and insert into every page of your website codebase."}),Object(f.jsxs)(wa,{children:['<script id="kairon-client-src" type="text/javascript" ','src="https://kairon.digite.com/cdn/kaironLoader.js?botid='.concat(x,"&token=").concat(t.urlToken,'"><\/script>')]}),Object(f.jsx)("div",{className:"divider"}),Object(f.jsx)("h3",{className:"copy-note",children:"Test Chat Widget"}),Object(f.jsx)("p",{className:"test-note",children:"You can also test Chat Widget by running the following code in browser console of your website."}),Object(f.jsxs)(wa,{foldable:!0,children:["const botId = '".concat(x,"', token = '").concat(t.urlToken,"', kaironURL = '").concat(y,"';"),"const initClient=()=>{fetch(`${kaironURL}/api/bot/${botId}/chat/client/config/${token}`,{headers:{Accept:'application/json','Content-Type':'application/json'}}).then(t=>t.json()).then(t=>{if(t.success){const n=t.data;n.container='#kairon-client-container',n.host=`${kaironURL}/api/bot/${botId}/chat`,window.ChatClient?window.ChatClient(n):top.ChatClient&&top.ChatClient(n)}})},body=document.getElementsByTagName('body')[0],container=document.createElement('div');container.id='kairon-client-container';const scriptTag=document.createElement('script');scriptTag.src='https://kairon.digite.com/cdn/kairon_client.js',scriptTag.onload=initClient,body.appendChild(container),body.appendChild(scriptTag);"]})]})})]})},Gi=Object(aa.b)((function(e){return{clientState:e.client}}),(function(e){return{setMenu:function(t){return e(function(e){return{type:fi,payload:{menu:e}}}(t))},updateConfigs:function(t,n){return e(function(e,t){return w("chatClient","saveClientConfig"),d("".concat(j.server,"/api/bot/").concat(e,"/chat/client/config"),{args:{data:t},method:"POST",callbackParams:{data:t},success:wi,error:wn})}(t,n))},getToken:function(t){return e(function(e){return ga(e,{onSuccess:_i,onError:wn})}(t))},fetchClientConfigs:function(t){return e(function(e){return function(t){t(Sn()),t(d("".concat(j.server,"/api/bot/").concat(e,"/chat/client/config"),{callbackParams:{botId:e},success:Ci,error:wn}))}}(t))},getClientConfigURL:function(t){return e(function(e){return w("chatClient","generateScript"),d("".concat(j.server,"/api/bot/").concat(e,"/chat/client/config/url"),{success:Ai,error:wn})}(t))}}}))(Hi),Vi="POPULATE_CHAT_HISTORY_USERS",zi="CHANGE_SELECTED_USER",qi="CHANGE_CHAT_PAGE",Wi="POPULATE_CHAT_HISTORY",Ki="POPULATE_USER_CHAT_HISTORY",Yi="POPULATE_TRAINING_EXAMPLE_VS_INTENT",Qi="CHANGE_CHAT_HISTORY_PAGE_NUMBER",Ji="CHAT_HISTORY_FETCHING",Zi="USERS_FETCHING",Xi=function(e){var t;return{type:Vi,payload:{users:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.users}}},$i=function(e){var t;return{type:Ki,payload:{chatHistory:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.history}}},er=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return d("".concat(j.server,"/api/history/").concat(e,"/users/").concat(t,"?month=").concat(n),{success:$i,error:wn})},tr=function(e){var t;return{type:Wi,payload:{chatHistory:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.conversation_data}}},nr=function(e){return{type:Yi,payload:{trainingExampleVsIntent:null===e||void 0===e?void 0:e.data}}},ar=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/training_examples"),{method:"GET",success:nr,error:wn})},cr=function(e,t){return function(n){var a;n(kn((null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.message)||"Training Example moved","success")),n(ar(t.botId))}},or=function(e,t){return function(n){n(kn("File download finished","success")),k(e,t.filename)}},sr=n(370),ir=n(187),rr=n(369),lr=function(e){var t,n=e.onUserCardClick,a=e.user,c=e.selectedUser;return Object(f.jsxs)("div",{onClick:function(){n(a.sender_id)},className:a.sender_id===c?"selected userCard":"userCard",children:[Object(f.jsx)(rr.a,{children:a.sender_id.charAt(0)}),Object(f.jsxs)("div",{className:"userInfo",children:[Object(f.jsx)("div",{className:"userName",children:a.sender_id}),Object(f.jsxs)("div",{className:"lastActivity",children:[b.a.unix(a.latest_event_time).fromNow(!0)," ago"]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{className:"steps",children:1===a.steps?"1 step":"".concat(a.steps," steps")}),Object(f.jsxs)("span",{className:"totalTime",children:["Total time: ",null===(t=a.time)||void 0===t?void 0:t.toFixed(2)]})]})]})]},a.sender_id)};lr.defaultProps={onUserCardClick:function(){},user:{latest_event_time:0,steps:0,time:0,sender_id:""},selectedUser:""};var dr=lr,ur=n(342),mr=n(190),br=n(73),pr=function(e){var t=e.anchorEl,n=e.closeIntentMenu,c=e.onIntentMenuClick,o=e.intents,s=e.open,i=e.addIntent,r=Object(a.useState)(""),l=Object(sa.a)(r,2),d=l[0],u=l[1],m=Object(a.useRef)(null),b=Object(a.useMemo)((function(){return d.trim()?o.filter((function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes(d)})):o}),[d,o]);return Object(f.jsx)(ur.a,{onClickAway:n,children:Object(f.jsx)("div",{children:Object(f.jsxs)(ir.a,{id:"fade-menu",anchorEl:t,keepMounted:!0,open:s,onClose:n,TransitionComponent:mr.a,PaperProps:{style:{maxHeight:"300px",maxWidth:"500px"}},className:"intents-menu-cnt",children:[Object(f.jsx)(Ja.a,{className:"addNew-button",children:Object(f.jsxs)("div",{className:"addNew-button-cnt",children:[Object(f.jsx)(ka.a,{disableHoverListener:!0,title:"Press shift + enter to add, esc to cancel",placement:"top",children:Object(f.jsx)("input",{ref:m,placeholder:"Search or add",className:"text",value:d,onChange:function(e){u(e.target.value)},onKeyDown:function(e){return(t=e).stopPropagation(),void(t.shiftKey&&13===t.which?(d.trim().length>0&&i(d.trim()),u(""),m.current.blur()):27===t.which&&(m.current.blur(),u("")));var t}})}),Object(f.jsx)(da.c,{className:"icon"})]})}),b.map((function(e){return Object(f.jsx)(Ja.a,{onClick:function(){c(e.name)},children:Object(f.jsx)(br.a,{variant:"inherit",noWrap:!0,children:e.name})},e.name)}))]})})})};pr.defaultProps={};var jr=pr,hr=function(e){var t,n,o,s=e.value,i=e.row,r=e.config,l=r.trainingExampleVsIntent,d=void 0===l?{}:l,u=c.a.useState(null),m=Object(sa.a)(u,2),b=m[0],p=m[1],j=Object(a.useState)(!1),h=Object(sa.a)(j,2),O=h[0],v=h[1],g=function(){p(null),v(!1)};d[null===i||void 0===i||null===(t=i.original)||void 0===t?void 0:t.user_input]!==s&&(n=d[null===i||void 0===i||null===(o=i.original)||void 0===o?void 0:o.user_input]);return Object(f.jsxs)(a.Fragment,{children:[Object(f.jsxs)("div",{className:"intentCell-cnt",children:[Object(f.jsx)(ka.a,{title:n?Object(f.jsx)(a.Fragment,{children:Object(f.jsxs)("p",{style:{fontSize:"12px"},children:["Current Intent: ",n]})}):"",enterDelay:200,enterNextDelay:200,arrow:!0,placement:"top",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:s}),n&&Object(f.jsx)("span",{className:"changedIntent",children:Object(f.jsx)(vs.b,{})})]})}),Object(f.jsx)(ka.a,{title:"Change intent",children:Object(f.jsx)("span",{children:Object(f.jsx)(ua.a,{className:"intent-dropdown-icon",onClick:function(e){var t;t=e.currentTarget,p(t),v(!0)}})})})]}),O&&Object(f.jsx)(jr,{anchorEl:b,closeIntentMenu:g,onIntentMenuClick:function(e){var t,n,a,c;d[null===i||void 0===i||null===(t=i.original)||void 0===t?void 0:t.user_input]!==s?a=d[null===i||void 0===i||null===(c=i.original)||void 0===c?void 0:c.user_input]:a=s;r.onIntentMenuClick(e,a,null===i||void 0===i||null===(n=i.original)||void 0===n?void 0:n.user_input),g()},intents:r.intents,open:O,addIntent:r.addIntent})]})},fr=function(e){var t,n,c,o,s,i=e.chatDetail,r=e.onIntentDropdownIconClick,l=e.index,d=e.selectedIntentIndex,u=e.anchorEl,m=e.closeIntentMenu,p=e.intents,j=e.addIntent,h=e.trainingExampleVsIntent;return h[i.text]!==i.intent&&(s=h[i.text]),Object(f.jsxs)(a.Fragment,{children:["user"===i.event&&Object(f.jsxs)("div",{className:"msg-user-cnt ",children:[Object(f.jsxs)("div",{className:"cp-msg-wrapper cp-msg-user",children:[Object(f.jsx)("div",{className:"chat-msg",children:O(null!==(t=i.text)&&void 0!==t?t:"")}),Object(f.jsx)("div",{className:"msg-icon-wrapper",children:Object(f.jsx)(ua.A,{className:"msg-icon"})})]}),Object(f.jsxs)("div",{className:"more-info",children:[Object(f.jsx)(vs.d,{className:Number((100*i.confidence).toFixed(0))>=80?"success indicator":Number((100*i.confidence).toFixed(0))>=50?"warning indicator":"danger indicator"}),Object(f.jsx)(ka.a,{title:"Confidence",enterDelay:500,enterNextDelay:500,children:Object(f.jsxs)("span",{className:"confidence",children:[(100*i.confidence).toFixed(0),"%"]})}),Object(f.jsxs)("div",{className:"intent",children:[Object(f.jsx)(ka.a,{title:s?Object(f.jsx)(a.Fragment,{children:Object(f.jsxs)("p",{style:{fontSize:"12px"},children:["Current Intent: ",s]})}):"",enterDelay:200,enterNextDelay:200,arrow:!0,placement:"top",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{title:i.intent,children:i.intent}),s&&Object(f.jsx)("span",{className:"changedIntent",children:Object(f.jsx)(vs.b,{})})]})}),Object(f.jsx)(ka.a,{title:"Change intent",children:Object(f.jsx)("span",{children:Object(f.jsx)(ua.a,{className:"intent-dropdown-icon",onClick:function(e){r(e.currentTarget,l)}})})}),d===l&&Object(f.jsx)(jr,{chatDetail:i,index:l,selectedIntentIndex:d,anchorEl:u,closeIntentMenu:m,onIntentMenuClick:function(t){var n;n=h[null===i||void 0===i?void 0:i.text]!==(null===i||void 0===i?void 0:i.intent)?h[null===i||void 0===i?void 0:i.text]:null===i||void 0===i?void 0:i.intent,e.onIntentMenuClick(t,n,null===i||void 0===i?void 0:i.text)},intents:p,open:d===l,addIntent:j})]})]}),Object(f.jsx)("div",{className:"time-info",children:Object(f.jsx)("div",{children:"".concat(b()(i.date).format("DD MMM YYYY")," ").concat(null===(n=i.time)||void 0===n?void 0:n.split(".")[0])})})]}),"bot"===i.event&&Object(f.jsxs)("div",{className:"msg-bot-cnt ",children:[Object(f.jsxs)("div",{className:"cp-msg-wrapper cp-msg-bot",children:[Object(f.jsx)("div",{className:"msg-icon-wrapper",children:Object(f.jsx)(ua.e,{className:"msg-icon"})}),Object(f.jsx)("div",{className:"chat-msg",children:O(null!==(c=i.text)&&void 0!==c?c:"")})]}),Object(f.jsx)("div",{className:"more-info",children:Object(f.jsx)("div",{title:i.action,className:"utterance",children:i.action})}),Object(f.jsx)("div",{className:"time-info",children:Object(f.jsx)("div",{children:"".concat(b()(i.date).format("DD MMM YYYY")," ").concat(null===(o=i.time)||void 0===o?void 0:o.split(".")[0])})})]},l)]})};fr.defaultProps={chatDetail:{},trainingExampleVsIntent:{}};var Or=fr,vr=function(e){var t,n,c=e.fetchChatHistoryUsers,o=e.users,s=e.changeSelectedUser,i=e.selectedUser,r=e.chatHistory,l=e.selectedUserChatHistory,d=e.loadChatHistory,u=e.chatHistoryFetched,m=(e.setSnackbar,e.usersFetched),p=e.intents,j=e.intentsFetched,h=e.fetchIntents,O=e.changeTrainingExampleIntent,v=e.changeUserChatHistoryPageNumber,g=e.selectedChatPageNumber,x=e.selectedUserChatHistoryDisplay,y=e.addComponentItems,N=e.downloadChatHistory,S=e.authState,T=e.selectedUserChatHistoryFetched,k=e.updateUIConfigs,C=e.uiConfigs,w=e.fetchTrainingExampleVsIntent,_=e.trainingExampleVsIntent,A=e.uiConfigsFetched,E=C.chatHistoryTableView,F=void 0===E||E,D=Object(a.useState)(F),P=Object(sa.a)(D,2),R=P[0],L=P[1],U=Object(a.useState)(1),M=Object(sa.a)(U,2),B=M[0],H=M[1],G=Object(a.useState)(1),V=Object(sa.a)(G,2),z=V[0],q=V[1],W=Object(a.useState)(!1),K=Object(sa.a)(W,2),Y=K[0],Q=K[1],J=Object(a.useState)(-1),Z=Object(sa.a)(J,2),X=Z[0],$=Z[1],ee=Object(a.useState)(null),te=Object(sa.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(null),oe=Object(sa.a)(ce,2),se=oe[0],ie=oe[1],re=Object(a.useState)(!1),le=Object(sa.a)(re,2),de=le[0],ue=le[1],me=Object(a.useState)(""),be=Object(sa.a)(me,2),pe=be[0],je=be[1],he=Object(_c.i)().params.botId,fe=Object(a.useRef)(null),Oe=Object(a.useRef)(null);n=R?B:z;var ve=function(e){R?H(e):q(e)};Object(a.useEffect)((function(){L(null===C||void 0===C?void 0:C.chatHistoryTableView)}),[C]),Object(a.useEffect)((function(){var e;null===Oe||void 0===Oe||null===(e=Oe.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[T]),Object(a.useEffect)((function(){S.userData&&(c(he),d(he,n),j||h(he),w(he))}),[S.userData]);var ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;s(he,e,i,t,n)},xe=function(){ae(null),$(-1)},ye=function(e,t){$(t),ae(e)},Ne=function(e,t,n){e!==t&&O(he,e,t,n),ae(null),$(-1)},Se=function(e){L(e),A&&k({chatHistoryTableView:e})},Te=function(e){y(he,{dataName:e},"intent")},ke=function(e){ie(null),ue(!1),N(he,e.target.innerText)},Ce=[];Ce=(null===pe||void 0===pe?void 0:pe.length)>0?o.filter((function(e){var t;return null===(t=e.sender_id)||void 0===t?void 0:t.toLowerCase().includes(null===pe||void 0===pe?void 0:pe.toLowerCase())})):o;var we,_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;R?d(he,e):((null===i||void 0===i?void 0:i.length)>0&&ge(i,!0,e),c(he,e)),w(he)},Ae=function(){var e=Object(_c.h)().search;return Object(a.useMemo)((function(){return new URLSearchParams(e)}),[e])}(),Ee=Ae.get("action"),Fe=Ae.get("intent"),Ie=Number(Ae.get("noOfMonths")),De=!1,Pe=[];return(Ee||Fe||Ie)&&(Pe.push({id:"action",value:Ee||""}),Pe.push({id:"intent",value:Fe||""}),Ie&&Se(!0),n!==Ie&&Ie>0&&Ie<7&&(_e(Ie),ve(Ie)),Ae.delete("noOfMonths"),De=!0),Object(f.jsxs)("div",{className:"chatHistory-wrapper app-page",children:[Object(f.jsxs)("div",{className:"chatHistory-head",children:[Object(f.jsxs)("div",{className:"chatHistory-title",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Chat History"}),Object(f.jsx)(ka.a,{title:"Refresh Chat History",placement:"top",children:Object(f.jsx)("button",{type:"button",className:"refresh-action",onClick:function(){_e(n)},children:Object(f.jsx)(qo.l,{className:"ibc-icon"})})})]}),De&&R&&Object(f.jsx)(ka.a,{title:"Clear filters applied through query parameters in the URL",placement:"top",children:Object(f.jsx)(sr.a,{icon:Object(f.jsx)(da.y,{}),label:"Clear filters",onClick:function(){Ae.delete("noOfMonths"),Ae.delete("action"),Ae.delete("intent"),_e(n),I.push("/bot/".concat(he,"/history"))}})}),Object(f.jsxs)("div",{className:"grid-list-view",children:[Object(f.jsxs)(a.Fragment,{children:[R&&Object(f.jsx)(ka.a,{title:Y?"Disable and clear filters":"Enable filters",placement:"top",children:Object(f.jsx)("button",{className:"filter-icon ".concat(Y?"sv-select":""),onClick:function(){return Q(!Y)},type:"button",children:Y?Object(f.jsx)(vs.f,{}):Object(f.jsx)(vs.e,{})})}),Object(f.jsxs)("div",{className:"month-buttons-cnt",children:[Object(f.jsx)(Ro,{selectedNoOfMonths:n,onMonthClick:function(e){_e(e),ve(e)}}),Object(f.jsx)(ka.a,{title:"Download Chat History",placement:"top",children:Object(f.jsx)("button",{onClick:function(){ie(fe.current),ue(!0)},className:"switch-view downloadButton",type:"button",ref:fe,children:Object(f.jsx)(ua.i,{})})})]})]}),Object(f.jsx)("button",{className:"switch-view list ".concat(R?"sv-select":""),onClick:function(){return Se(!0)},type:"button",children:R?Object(f.jsx)(ua.r,{}):Object(f.jsx)(ua.s,{})}),Object(f.jsx)("button",{className:"switch-view card ".concat(R?"":"sv-select"),onClick:function(){return Se(!1)},type:"button",children:R?Object(f.jsx)(vs.g,{}):Object(f.jsx)(vs.h,{})})]})]}),Object(f.jsxs)(ir.a,{id:"months-menu",anchorEl:se,keepMounted:!0,open:de,onClose:function(e){ie(null),ue(!1)},children:[Object(f.jsx)(Ja.a,{disabled:!0,children:"Select number of months to download"}),Object(f.jsx)(Ja.a,{onClick:ke,children:"1"}),Object(f.jsx)(Ja.a,{onClick:ke,children:"2"}),Object(f.jsx)(Ja.a,{onClick:ke,children:"3"}),Object(f.jsx)(Ja.a,{onClick:ke,children:"4"}),Object(f.jsx)(Ja.a,{onClick:ke,children:"5"}),Object(f.jsx)(Ja.a,{onClick:ke,children:"6"})]}),Object(f.jsxs)("div",{className:"chatHistory-content",children:[!R&&Object(f.jsxs)(Ra.a,{wrap:"nowrap",container:!0,spacing:0,className:"chatHistory-container",children:[Object(f.jsxs)(Ra.a,{item:!0,xs:4,className:"chatUsers-containter",children:[Object(f.jsx)("div",{className:"chatUsers-header",children:Object(f.jsx)("h3",{children:Object(f.jsx)(ti,{onSearch:function(e){je(e)},debounce:!0,placeholder:"Search user..."})})}),Object(f.jsx)("div",{className:"chatUsers-content",children:Object(f.jsxs)("div",{className:"chatUsers-list",children:[!m&&Object(f.jsx)(Mo,{text:"Fetching users..."}),m&&0===o.length&&Object(f.jsx)("p",{children:"No users to show!"}),m&&o.length>0&&0===(null===(t=Ce)||void 0===t?void 0:t.length)&&Object(f.jsx)("p",{children:"No results found!"}),m&&Ce.map((function(e,t){return Object(f.jsx)(dr,{user:e,onUserCardClick:function(e){ge(e,!1,n)},selectedUser:i},e+t)}))]})})]}),Object(f.jsxs)(Ra.a,{item:!0,xs:8,className:"chatDetail-containter",children:[Object(f.jsxs)("div",{className:"chatDetail-header",children:[Object(f.jsx)("h3",{children:i||"Know your user"}),!i&&Object(f.jsx)("span",{children:"Select chat to get started"})]}),Object(f.jsxs)("div",{className:"chatDetail-content",children:[!i&&Object(f.jsx)("div",{className:"no-selected-user",children:Object(f.jsx)("img",{src:"/assets/images/no_chat_selected_illustration.svg",alt:"No Users Select",className:"nobots-image"})}),i&&!T&&Object(f.jsx)(Mo,{text:"Fetching chat history..."}),i&&T&&(null===x||void 0===x?void 0:x.map((function(e,t){return Object(f.jsx)(Or,{chatDetail:e,onIntentDropdownIconClick:ye,index:t,selectedIntentIndex:X,anchorEl:ne,closeIntentMenu:xe,onIntentMenuClick:Ne,intents:p,addIntent:Te,trainingExampleVsIntent:_},e.text+t)}))),Object(f.jsx)("div",{ref:Oe})]}),Object(f.jsx)("div",{className:"chatDetail-pagination",children:Object(f.jsx)(ni.a,{count:Math.ceil(l.length/100),size:"small",color:"primary",showFirstButton:!0,showLastButton:!0,page:g,onChange:function(e,t){v(t)}})})]})]}),R&&!u&&Object(f.jsx)(Mo,{text:"Fetching chat history..."}),R&&u&&Object(f.jsx)("div",{className:"chatHistory-table-cnt",children:Object(f.jsx)("div",{className:"chatHistory-table-wrapper",children:Object(f.jsx)(mi,{tableData:r,columns:(we={onIntentDropdownIconClick:ye,closeIntentMenu:xe,anchorEl:ne,selectedIntentIndex:X,intents:p,onIntentMenuClick:Ne,addIntent:Te,trainingExampleVsIntent:_},[{Header:"ID",accessor:"_id"},{Header:"User Input",accessor:"user_input"},{Header:"Intent",accessor:"intent",Cell:function(e){var t=e.value,n=e.row;return Object(f.jsx)(hr,{value:t,row:n,config:we})},filterType:"select"},{Header:"Time",accessor:function(e){return new Date(b()(null===e||void 0===e?void 0:e.timestamp,"DD-MM-YYYY HH:mm:ss").format()).getTime()},Cell:function(e){var t=e.value;return Object(f.jsx)("span",{children:b()(t).format("DD MMM YYYY HH:mm")})},filterType:"dateBetween",id:"timestamp"},{Header:"Action",accessor:"action",Cell:function(e){var t=e.value;return Object(f.jsx)("ul",{children:t.map((function(e,t){return Object(f.jsx)("li",{children:e},e+t)}))})}},{Header:"Bot Response",accessor:"bot_response",Cell:function(e){var t=e.value;return Object(f.jsx)("ul",{children:t.map((function(e,t){return Object(f.jsx)("li",{children:e},e+t)}))})}}]),className:"chatHistory-table-view",showPagination:!0,showGlobalFilter:Y,defaultSortColumnId:"timestamp",defaultSortColumnOrder:"desc",showColumnFilter:Y,initialFilters:Pe})})})]})]})};vr.defaultProps={};var gr=vr,xr=Object(aa.b)((function(e){var t=e.chatHistory,n=t.users,a=t.selectedUser,c=t.chatHistory,o=t.selectedUserChatHistory,s=t.chatHistoryFetched,i=t.usersFetched,r=t.selectedChatPageNumber,l=t.selectedUserChatHistoryDisplay,d=t.chatHistoryPageNumber,u=t.chatHistoryDisplay,m=t.selectedUserChatHistoryFetched,b=t.trainingExampleVsIntent,p=e.storyComponents,j=p.intents,h=p.intentsFetched,f=e.global,O=f.uiConfigs,v=f.uiConfigsFetched;return{users:n,selectedUser:a,chatHistory:c,selectedUserChatHistory:o,chatHistoryFetched:s,usersFetched:i,intents:j,intentsFetched:h,selectedChatPageNumber:r,selectedUserChatHistoryDisplay:l,chatHistoryPageNumber:d,chatHistoryDisplay:u,authState:e.auth,selectedUserChatHistoryFetched:m,uiConfigs:O,uiConfigsFetched:v,trainingExampleVsIntent:b}}),(function(e){return{fetchChatHistoryUsers:function(t,n){e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){n({type:Zi}),n(d("".concat(j.server,"/api/history/").concat(e,"/metrics/users?month=").concat(t),{success:Xi,error:wn}))}}(t,n))},changeSelectedUser:function(t,n,a,c,o){e(function(e,t,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return function(o){o({type:zi,payload:{selectedUser:t,isRefresh:a}}),(t!==n||a)&&o(er(e,t,c))}}(t,n,a,c,o))},loadChatHistory:function(t,n){e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){n({type:Ji}),n(d("".concat(j.server,"/api/history/").concat(e,"/conversations?month=").concat(t),{success:tr,error:wn}))}}(t,n))},setSnackbar:function(t,n){e(kn(t,n))},fetchIntents:function(t){e(et(t))},changeTrainingExampleIntent:function(t,n,a,c){e(function(e,t,n,a){return w("chatHistory","changeTrainingExampleIntent"),d("".concat(j.server,"/api/bot/").concat(e,"/training_examples/move/").concat(encodeURIComponent(t)),{args:{data:[a]},callbackParams:{botId:e},method:"POST",success:cr,error:wn})}(t,n,0,c))},changeUserChatHistoryPageNumber:function(t){e(function(e){return{type:qi,payload:{pageNumber:e}}}(t))},changeChatHistoryPageNumber:function(t){e(function(e){return{type:Qi,payload:{pageNumber:e}}}(t))},demoFeature:function(){return e(_n())},addComponentItems:function(t,n,a){e(an(t,n,a))},downloadChatHistory:function(t,n){e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return w("chatHistory","downloadChatHistory"),function(n){n(kn("Preparing your file for download","info")),n(d("".concat(j.server,"/api/history/").concat(e,"/conversations/download?month=").concat(t),{success:or,error:wn}))}}(t,n))},updateUIConfigs:function(t){return e(Dn(t,{showMsg:!1}))},fetchTrainingExampleVsIntent:function(t){e(ar(t))}}}))(gr),yr="POPULATE_CURRENT_CONFIG",Nr="POPULATE_CONFIG_PROPERTIES",Sr="POPULATE_CONFIG_TEMPLATES",Tr="POPULATE_FALLBACK_ACTIONS",kr=function(e){return{type:Nr,payload:{data:e.data}}},Cr=function(e,t){return function(n){var a,c=t.botId;n({type:yr,payload:{data:null===(a=e.data)||void 0===a?void 0:a.config}}),n(function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/config/properties"),{success:kr,error:wn})}(c))}},wr=function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/config"),{callbackParams:{botId:e},success:Cr,error:wn})},_r=function(e){return{type:Sr,payload:{data:e.data["config-templates"]}}},Ar=function(e,t){return function(n){var a=t.botId;n(kn(e.message,"success")),n(wr(a))}},Er=function(e,t){return function(n){var a=t.botId;n(kn(e.message,"success")),n(wr(a))}},Fr=function(e){var t=e.data,n=t.actions,a=t.email_action,c=t.google_search_action,o=t.http_action,s=t.jira_action,i=t.utterances,r=t.zendesk_action;return{type:Tr,payload:{fallbackActions:{actions:n,email_action:a,google_search_action:c,http_action:o,jira_action:s,utterances:i,zendesk_action:r}}}},Ir=n(344),Dr=n(343),Pr=n(345),Rr=n(346),Lr=n(347),Ur=n(348),Mr=n(349),Br=[{name:"Long Answer",templateName:"long-answer",icon:gs.f},{name:"Word Embedding",templateName:"word-embedding",icon:gs.e},{name:"Contextual",templateName:"contextual",icon:gs.a},{name:"Default",templateName:"default",icon:gs.d}],Hr=["epochs","threshold","core_fallback_threshold","core_fallback_action_name"],Gr={DIETClassifier:"nlu_epochs",FallbackClassifier:"nlu_confidence_threshold",ResponseSelector:"response_epochs"},Vr={epochs:"ted_epochs",core_fallback_action_name:"action_fallback",core_fallback_threshold:"action_fallback_threshold"},zr=function(e){var t,n,c=e.configState,o=e.getCurrentConfiguration,i=e.getConfigTemplates,r=e.setConfigTemplate,l=e.setConfigProperties,d=e.fetchFallbackActions,u=c.currentConfig,m=c.configTemplates,b=c.configProperties,p=c.fallbackActions,j=Object(_c.i)().params.botId,h=Object(a.useState)(-1),O=Object(sa.a)(h,2),v=O[0],g=O[1],x=Object(a.useState)(null),y=Object(sa.a)(x,2),N=y[0],S=y[1],T=Object(a.useState)({}),k=Object(sa.a)(T,2),C=k[0],w=k[1],_=Object(a.useState)(""),A=Object(sa.a)(_,2),E=A[0],F=A[1],I=Object(a.useState)(!1),D=Object(sa.a)(I,2),P=D[0],R=D[1],L=p.actions,U=p.email_action,M=p.google_search_action,B=p.http_action,H=p.jira_action,G=p.utterances,V=p.zendesk_action,z=function(){w({}),F("")},q=function(e){if(z(),-1===e)return g(e),void S(u);var t=Br[e].templateName,n=null===m||void 0===m?void 0:m.find((function(e){return e.name===t}));null!==n&&void 0!==n&&n.config&&(g(e),S(n.config))},W=function(e,t){if(!C)return!1;var n=C.timelineName,a=C.nodeName,c=C.property,o=C.value;return n===e&&(a===t.name&&!(!t[c]||t[c]!==o))},K=function(){if(z(),E){var e=Object(s.a)({},b),t=C.timelineName,n=C.nodeName,a=C.property;"pipeline"===t?e[Gr[n]]="threshold"!==a?parseInt(E):parseFloat(E):e[Vr[a]]="core_fallback_action_name"!==a?"core_fallback_threshold"===a?parseFloat(E):parseInt(E):E,l(j,e)}};Object(a.useEffect)((function(){o(j),i(j),d(j)}),[]),Object(a.useEffect)((function(){u&&S(u)}),[u]);var Y=function(e,t){return Object(f.jsxs)(Dr.a,{children:[e.name,W(t,e)?Object(f.jsx)(ur.a,{onClickAway:z,mouseEvent:"core_fallback_action_name"!==C.property&&"onClick",children:Object(f.jsx)("div",{className:"editingNode-wrapper",children:Object(f.jsxs)("div",{className:"editingNode",children:[Object(f.jsx)("p",{className:"editingProperty-name",children:C.property}),"core_fallback_action_name"!==C.property?Object(f.jsx)(ic,{name:C.property,label:"",value:E,onChange:function(e){e.target.value&&F(e.target.value)},placeholder:"Enter new value",type:"number",meta:{error:"",touched:!0}}):Object(f.jsxs)(Qa.a,{name:C.property,label:"",value:E,onChange:function(e){F(e.target.value)},placeholder:"Select",fullWidth:!0,children:[(null===G||void 0===G?void 0:G.length)&&Object(f.jsx)(Ir.a,{children:"Utterances"}),null===G||void 0===G?void 0:G.map((function(e){return Object(f.jsx)(Ja.a,{className:"config-menu-item",value:e,children:e},e)})),(null===B||void 0===B?void 0:B.length)&&Object(f.jsx)(Ir.a,{children:"HTTP Actions"}),null===B||void 0===B?void 0:B.map((function(e){return Object(f.jsx)(Ja.a,{className:"config-menu-item",value:e,children:e},e)})),(null===L||void 0===L?void 0:L.length)&&Object(f.jsx)(Ir.a,{children:"Actions"}),null===L||void 0===L?void 0:L.map((function(e){return Object(f.jsx)(Ja.a,{className:"config-menu-item",value:e,children:e},e)})),(null===U||void 0===U?void 0:U.length)&&Object(f.jsx)(Ir.a,{children:"Email Actions"}),null===U||void 0===U?void 0:U.map((function(e){return Object(f.jsx)(Ja.a,{className:"config-menu-item",value:e,children:e},e)})),(null===M||void 0===M?void 0:M.length)&&Object(f.jsx)(Ir.a,{children:"Google Search Actions"}),null===M||void 0===M?void 0:M.map((function(e){return Object(f.jsx)(Ja.a,{className:"config-menu-item",value:e,children:e},e)})),(null===H||void 0===H?void 0:H.length)&&Object(f.jsx)(Ir.a,{children:"JIRA Actions"}),null===H||void 0===H?void 0:H.map((function(e){return Object(f.jsx)(Ja.a,{className:"config-menu-item",value:e,children:e},e)})),(null===V||void 0===V?void 0:V.length)&&Object(f.jsx)(Ir.a,{children:"Zendesk Actions"}),null===V||void 0===V?void 0:V.map((function(e){return Object(f.jsx)(Ja.a,{className:"config-menu-item",value:e,children:e},e)})),Object(f.jsx)(Ja.a,{className:"config-menu-item",value:"action_default_fallback",children:"action_default_fallback"},"action_default_fallback")]}),Object(f.jsxs)("div",{className:"buttons-wrapper",children:[Object(f.jsx)(Ia.a,{onClick:z,color:"secondary",size:"small",children:"Cancel"}),Object(f.jsx)(Ia.a,{onClick:K,color:"primary",size:"small",children:"Save"})]})]})})}):Object(f.jsx)("div",{children:Object.keys(e).map((function(n,c){return Object(f.jsx)(a.Fragment,{children:"name"!==n&&Object(f.jsxs)("div",{className:"tline-property",children:[Object(f.jsxs)("div",{className:"tline-property-content",children:[n,":"," ",Object(f.jsx)("span",{className:"property-value",children:e[n]})]}),Hr.includes(n)&&-1===v&&Object(f.jsx)("div",{className:"tline-property-edit",children:Object(f.jsx)("button",{type:"button",onClick:function(){return function(e){var t=e.timelineName,n=e.nodeName,a=e.property,c=e.value;w({timelineName:t,nodeName:n,property:a,value:c}),F(c)}({timelineName:t,nodeName:e.name,property:n,value:e[n]})},className:"icon-button-clear edit-button",title:"Edit Value",children:Object(f.jsx)(da.l,{className:"ibc-icon"})})})]})},c)}))})]})};return Object(f.jsxs)("div",{className:"app-page config-wrapper",children:[Object(f.jsxs)("div",{className:"config-head",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Model Configuration"}),Object(f.jsxs)("p",{className:"support-text",children:["These configurations are the components and policies that your model will use to make predictions for given user input. Read more"," ",Object(f.jsx)("a",{target:"_blank",href:"https://rasa.com/docs/rasa/model-configuration/",rel:"noreferrer",className:"rasa-link",children:"here"}),"."]})]}),Object(f.jsxs)("div",{className:"configurations",children:[Object(f.jsxs)("div",{className:"config-header",children:[Object(f.jsx)("h2",{className:"configurations-title",children:"Manage Configurations"}),-1!==v&&Object(f.jsx)("button",{type:"button",className:"config-apply-btn",onClick:function(){R(!0)},children:"Apply"})]}),Object(f.jsxs)("div",{className:"configs-view",children:[Object(f.jsxs)("div",{className:"configs-list",children:[Object(f.jsxs)("div",{className:"config-listItem ".concat(-1===v?"selected-config":""),role:"button",tabIndex:0,onClick:function(){return q(-1)},children:[Object(f.jsx)(gs.b,{className:"config-icon"}),Object(f.jsx)("p",{className:"config-text",children:"Current Configuration"})]}),Object(f.jsx)("div",{className:"divider"}),Object(f.jsx)("div",{className:"templates-title",children:"Templates"}),Br.map((function(e,t){var n=e.icon,a=e.templateName,c=e.name;return Object(f.jsxs)("div",{className:"config-listItem ".concat(v===t?"selected-config":""),role:"button",tabIndex:0,onClick:function(){return q(t)},children:[Object(f.jsx)(n,{className:"config-icon"}),Object(f.jsx)("p",{className:"config-text",children:c})]},a)}))]}),Object(f.jsxs)("div",{className:"timeline-wrapper",children:[Object(f.jsx)("p",{className:"title-text",children:"Pipeline"}),Object(f.jsx)("div",{className:"pipeline-timeline",children:Object(f.jsx)(Pr.a,{align:"alternate",children:null===N||void 0===N||null===(t=N.pipeline)||void 0===t?void 0:t.map((function(e,t){var n;return Object(f.jsxs)(Rr.a,{children:[Object(f.jsxs)(Lr.a,{children:[Object(f.jsx)(Ur.a,{color:"primary"}),(null===N||void 0===N||null===(n=N.pipeline)||void 0===n?void 0:n.length)-1!==t&&Object(f.jsx)(Mr.a,{})]}),Y(e,"pipeline")]},t)}))})}),Object(f.jsx)("p",{className:"title-text",children:"Policies"}),Object(f.jsx)("div",{className:"policies-timeline",children:Object(f.jsx)(Pr.a,{align:"alternate",children:null===N||void 0===N||null===(n=N.policies)||void 0===n?void 0:n.map((function(e,t){var n;return Object(f.jsxs)(Rr.a,{children:[Object(f.jsxs)(Lr.a,{children:[Object(f.jsx)(Ur.a,{color:"primary"}),(null===N||void 0===N||null===(n=N.policies)||void 0===n?void 0:n.length)-1!==t&&Object(f.jsx)(Mr.a,{})]}),Y(e,"policies")]},t)}))})})]})]})]}),Object(f.jsxs)(Pa,{open:P,title:"Attention!",onClose:function(){return R(!1)},onConfirm:function(){var e=Br[v].templateName;R(!1),r(j,e)},children:["This will change the way your model makes predictions. Do this only if you are sure of what you're doing.",Object(f.jsx)("p",{children:" Are you sure you want to proceed?"})]})]})},qr=Object(aa.b)((function(e){return{configState:e.config}}),(function(e){return{getCurrentConfiguration:function(t){return e(wr(t))},getConfigTemplates:function(t){return e(function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/templates/config"),{success:_r,error:wn})}(t))},setConfigTemplate:function(t,n){e(function(e,t){return d("".concat(j.server,"/api/bot/").concat(e,"/templates/config"),{method:"POST",args:{data:t},callbackParams:{botId:e},success:Er,error:wn})}(t,n))},setConfigProperties:function(t,n){e(function(e,t){return d("".concat(j.server,"/api/bot/").concat(e,"/config/properties"),{method:"PUT",args:Object(s.a)({},t),callbackParams:{botId:e},success:Ar,error:wn})}(t,n))},fetchFallbackActions:function(t){return e(function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/actions"),{success:Fr,error:wn})}(t))}}}))(zr),Wr="ADD_FILES",Kr="REMOVE_FILES",Yr="LOADING_FILES",Qr="LOADING_MODEL",Jr="CLEAR_SELECTED_FILES",Zr="FILE_UPLOAD_STATUS",Xr=function(){return{type:Zr}},$r=function(e){return function(t){t(Xr()),t({type:Jr}),t(kn(null===e||void 0===e?void 0:e.message,"success"))}},el=function(e){return function(t){t(Xr()),t(wn(e))}},tl=function(e,t,n,a){return w("file","fileUpload"),function(c){c(Xr()),c(function(e,t,n,a){for(var c=new FormData,o=0;o<t.length;o++)c.append("training_files",t[o]);return d("".concat(j.server,"/api/bot/").concat(e,"/upload?overwrite=").concat(n,"&import_data=").concat(a),{method:"POST",fileUpload:c,success:$r,error:el})}(e,t,n,a))}},nl=function(e,t){return k(e,t.filename),function(e){e(kn("File download finished","success")),e({type:Yr})}},al=function(){return{type:Yr}},cl=function(e){return function(t){t(al()),t(wn(e))}},ol=function(){return{type:Qr}},sl=function(e){return function(t){t(ol()),t(wn(e))}},il=function(e,t){return k(e,t.filename),function(e){e(kn("Model download finished","success")),e({type:Qr})}},rl=n(185),ll=function(e){var t=c.a.useState(!0),n=Object(sa.a)(t,2),a=n[0],o=n[1],i=c.a.useState(!1),r=Object(sa.a)(i,2),l=r[0],d=r[1],u=Object(_c.i)().params.botId,m=function(e){"validate"===e.target.name?d(!1):"importControl"===e.target.name&&d(!0)},b=function(e){"overwrite"===e.target.name?o(!0):"append"===e.target.name&&o(!1)};return Object(f.jsxs)("div",{className:"app-page file-upload-page",children:[Object(f.jsxs)("div",{className:"file-upload-head",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Advanced Configurations"}),Object(f.jsx)(ra.a,{to:"/bot/".concat(u,"/uploadlogs"),className:"logs-link",children:Object(f.jsxs)("button",{type:"button",className:"app-btn-icon",children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:Object(f.jsx)(ua.l,{className:"btn-icon"})}),"File Upload Logs"]})})]}),Object(f.jsx)("div",{className:"file-upload-block",children:Object(f.jsxs)("div",{className:"file-upload-wraper",children:[Object(f.jsxs)("div",{className:"file-upload-row",children:[Object(f.jsx)("h3",{className:"file-upload-title",children:"Upload Files"}),Object(f.jsxs)("div",{className:"file-upload-row-container",children:[Object(f.jsxs)("div",{className:"file-upload-cell",children:[Object(f.jsxs)("div",{className:"file-upload-dropzone",children:[Object(f.jsx)(rl.a,{onDrop:function(t){if(0!==t.length){for(var n=[],a=[],c=0;c<t.length;c++){for(var o=0;o<e.fileUpload.files.length;o++)e.fileUpload.files[o].name===t[c].name&&n.push(t[c].name);-1===n.indexOf(t[c].name)&&a.push(t[c])}a.length>0&&e.addFiles(a),n.length>0&&e.onError({message:"".concat(n.toString()+(1===n.length?" is":" are")," already selected for upload")})}},accept:".md, .yml, .zip",onDropRejected:function(t){for(var n=[],a=0;a<t.length;a++)for(var c=t[a].errors,o=0;o<c.length;o++)n.indexOf(c[o].message)>-1||("file-too-large"===c[o].code?n.push("File size should not be larger than 25 MB"):n.push(c[o].message));e.onError({message:n.toString()})},minSize:0,maxSize:25e6,multiple:!0,children:function(e){var t=e.getRootProps,n=e.getInputProps,a=e.isDragActive;return Object(f.jsx)("section",{className:"dropzoneContainer",children:Object(f.jsxs)("div",Object(s.a)(Object(s.a)({},t({className:"dropzone"})),{},{children:[Object(f.jsx)("input",Object(s.a)({},n())),!a&&"Click here or drop a file to upload!",a&&"Drop files here!"]}))})}}),"File types must be .zip / .md / .yml.",Object(f.jsx)("br",{}),"Maximum file size is 25MB."]}),Object(f.jsx)("div",{className:"file-upload-status",children:0===e.fileUpload.files.length?"No files selected for upload":e.fileUpload.files.map((function(t){return Object(f.jsxs)("div",{className:"file-name-row",children:[t.name,Object(f.jsx)(da.k,{className:"file-deleteicon",onClick:function(){return n=t.name,void e.removeFiles(n);var n}})]},t.name)}))})]}),Object(f.jsxs)("div",{className:"file-upload-cell valign",children:[Object(f.jsx)("h3",{className:"file-upload-title",children:"Choose upload mode"}),Object(f.jsxs)("div",{className:"file-upload-cell",children:[Object(f.jsxs)("div",{className:"file-upload-vertical-align",children:[Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:!l,onChange:m,name:"validate",icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),color:"primary",size:"medium",className:"validate-checkbox"}),label:Object(f.jsx)("p",{className:"list-text",children:"Validate files"})}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:l,onChange:m,name:"importControl",icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),color:"primary",size:"medium",className:"importControl-checkbox"}),label:Object(f.jsx)("p",{className:"list-text",children:"Import files"})})]}),l&&Object(f.jsxs)("div",{className:"file-upload-vertical-align",children:[Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:a,onChange:b,name:"overwrite",icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),color:"primary",size:"medium",className:"overwrite-checkbox"}),label:Object(f.jsx)("p",{className:"list-text",children:"Overwrite files"})}),Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:!a,onChange:b,name:"append",icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),color:"primary",size:"medium",className:"append-checkbox"}),label:Object(f.jsx)("p",{className:"list-text",children:"Append files"})})]})]}),Object(f.jsxs)("button",{type:"button",onClick:function(){e.fileUpload.files.length>0?e.uploadFiles(u,e.fileUpload.files,a,l):e.onError({message:"Select files to upload"})},className:"file-action-button upload-btn",children:[Object(f.jsx)("div",{className:"file-action-button-wrapper",children:Object(f.jsx)(Ks.f,{className:"file-downloadicon"})}),e.fileUpload.isFileUploading?"File upload in-progress":"Upload files"]})]})]})]}),Object(f.jsxs)("div",{className:"file-upload-row",children:[Object(f.jsx)("h3",{className:"file-upload-title",children:"Download Resources"}),Object(f.jsx)("div",{className:"file-upload-row-container",children:Object(f.jsxs)("div",{className:"file-upload-cell",children:[Object(f.jsxs)("div",{className:"file-download-card",children:[Object(f.jsxs)("div",{className:"file-download-card-header",children:[Object(f.jsx)(Vo.h,{className:"file-icon"}),"Training Files"]}),Object(f.jsx)("div",{className:"file-download-card-content",children:"Bot configuration and data files which can be downloaded and modified to your needs. These files can be uploaded again to train new models."}),Object(f.jsxs)("button",{type:"button",onClick:function(){e.downloadFiles(u)},className:"file-action-button",children:[Object(f.jsx)("div",{className:"file-action-button-wrapper",children:Object(f.jsx)(Ks.e,{className:"file-downloadicon"})}),e.fileUpload.isFileDownloading?"Downloading...":"File Download"]})]}),Object(f.jsxs)("div",{className:"file-download-card",children:[Object(f.jsxs)("div",{className:"file-download-card-header",children:[Object(f.jsx)(ua.m,{className:"file-icon"}),"Training Model"]}),Object(f.jsx)("div",{className:"file-download-card-content",children:"Model file which can be downloaded. This model contains data which is currently in kAIron You can deploy this model to other bot instance."}),Object(f.jsxs)("button",{type:"button",onClick:function(){e.downloadModel(u)},className:"file-action-button",children:[Object(f.jsx)("div",{className:"file-action-button-wrapper",children:Object(f.jsx)(Ks.e,{className:"file-downloadicon"})}),e.fileUpload.isModelDownloading?"Downloading...":"Model Download"]})]})]})})]})]})})]})},dl=Object(aa.b)((function(e){return{fileUpload:e.fileUpload}}),(function(e){return{addFiles:function(t){return e(function(e){return{type:Wr,payload:{files:e}}}(t))},downloadFiles:function(t){e(al()),e(function(e){return w("file","fileDownload"),d("".concat(j.server,"/api/bot/").concat(e,"/download/data"),{method:"GET",success:nl,error:cl})}(t))},downloadModel:function(t){e(ol()),e(function(e){return w("file","modelDownload"),d("".concat(j.server,"/api/bot/").concat(e,"/download/model"),{method:"GET",success:il,error:sl})}(t))},removeFiles:function(t){return e({type:Kr,payload:{fileName:t}})},uploadFiles:function(t,n,a,c){e(tl(t,n,a,c))},onError:function(t){return e(wn(t))}}}))(ll),ul="FETCH_FORM_DATA",ml="POPULATE_FORM_DATA",bl="CLEAR_FORM_STATE",pl="UPDATE_FORMDATA_FIELD",jl="STORE_SELECTED_NODE_INDEX",hl="CLEAR_NODE_SELECTION",fl="STORE_FORM_ACTIONS_POPUP_ID",Ol="ADD_NODE_IN_FORM_FLOW",vl="DELETE_FORM_NODE",gl="ADD_BLANK_FORM_NODE",xl="SET_FORM_PICKERS",yl="UPDATE_FORM_FLOW",Nl="ADD_UPDATE_DELETE_FORM_SETTINGS",Sl="FORM_ADD_UPDATE_ERROR",Tl="POST_FORM_SAVE",kl=function(e){return{type:ml,payload:{formData:e.data}}},Cl=function(e,t){return function(n){(n({type:ul}),"NEW_FORM"!==t)?n(d("".concat(j.server,"/api/bot/").concat(e,"/forms/").concat(t),{success:kl,error:wn})):n(kl({data:{bot:e,name:"Untitled",required_slots:[],settings:[],_id:t}}))}},wl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:fl,payload:{popupId:e}}},_l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return function(n,a){var c=a().form.formData;(null===c||void 0===c?void 0:c.settings.some((function(t){return t.slot===e})))?n(kn("Slot already in use","error")):n({type:Ol,payload:{slotName:e,addIndex:t}})}},Al=function(e){return{type:vl,payload:{nodeIndex:e}}},El=function(e){return{type:xl,payload:{openFormPickers:e}}},Fl=function(e,t){return function(n){var a=t.botId,c=t.formId,o=t.method;if(n(kn(e.message,"success")),n({type:Tl}),"POST"===o)return w("forms","addForm"),I.replace("/bot/".concat(a,"/form/").concat(e.data)),void n(Cl(a,e.data));w("forms","updateForm"),n(Cl(a,c))}},Il=function(e){if("untitled"===e.name.toLowerCase())return{error:!0,message:"Please enter form name"};if(!e.settings.length)return{error:!0,message:"Please add slots"};if(e.settings.some((function(e){var t;return!(null!==e&&void 0!==e&&null!==(t=e.ask_questions)&&void 0!==t&&t.length)})))return{error:!0,message:"Questions list cannot be empty"};var t=e.settings.map((function(e){var t=Object(s.a)(Object(s.a)({},e),{},{ask_questions:e.ask_questions.map((function(e){var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.text}))});return delete t.validation,t}));return{name:e.name,settings:t}},Dl=function(e){return function(t){t({type:Sl}),t(wn(e))}},Pl=function(e,t){return function(n){var a,c=t.mode,o=t.data,s=t.slot,i=t.responseText,r=t.id;n(kn(e.message,"success")),n({type:Nl,payload:{id:"add"===c?null===(a=e.data)||void 0===a?void 0:a._id:null===o||void 0===o?void 0:o.id,text:"add"===c?i:null===o||void 0===o?void 0:o.text,slot:s,deleteId:r,mode:c}})}},Rl=n(33),Ll=function(e){var t,n,c=e.id,o=e.data,s=e.selected,i=e.formState,r=e.deleteFormNode,l=e.addBlankFormNode,d=e.selectNodeForPanelData,u=e.setFormActionsPopupId,m=e.setSnackbar,b=Object(a.useRef)(!0),p=i.formNodeActionsPopupId,j=i.formData,h=c===p,O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?u(c):u()};return Object(a.useEffect)((function(){b.current?b.current=!1:s&&d(o.nodeIndex)}),[s]),Object(f.jsxs)("div",{className:"formnode-wrapper",children:[Object(f.jsx)(Rl.d,{id:"target-".concat(c),type:"target",position:"top",className:"formnode-target-handle"}),Object(f.jsxs)("div",{className:"form-node ".concat(s?"form-node__selected":""),children:[Object(f.jsxs)("div",{className:"label-wrapper",children:[Object(f.jsx)("div",{className:"slot-icon-wrapper",children:Object(f.jsx)(Vo.a,{className:"slot-icon"})}),Object(f.jsxs)("div",{className:"formnode-data-wrapper",children:[Object(f.jsxs)("div",{className:"formnode-top",children:[Object(f.jsx)("p",{className:"node-type",children:"SLOT"}),0===(null===j||void 0===j||null===(t=j.settings[o.nodeIndex])||void 0===t||null===(n=t.ask_questions)||void 0===n?void 0:n.length)&&Object(f.jsx)("div",{className:"warning-dot",title:"Please add questions to this step"})]}),Object(f.jsx)("span",{className:"node-label",title:o.label,children:o.label})]})]}),Object(f.jsx)("div",{className:"action-more-btn nodrag",role:"button",tabIndex:0,onClick:function(){return O(!0)},children:Object(f.jsx)(da.x,{className:"vert-icon"})}),h&&Object(f.jsx)(ur.a,{onClickAway:function(){return O()},children:Object(f.jsxs)("div",{className:"app-popup formnode-actions-popup nodrag",children:[Object(f.jsx)("div",{className:"node-action-button",role:"button",tabIndex:0,onClick:function(){l(o.nodeIndex+1)},title:"Add Node Below",children:Object(f.jsx)(da.c,{className:"icon",color:"#2f45c5"})}),Object(f.jsx)("div",{className:"node-action-button",role:"button",tabIndex:0,onClick:function(){var e;1!==(null===j||void 0===j||null===(e=j.settings)||void 0===e?void 0:e.length)?r(o.nodeIndex):m("Can't delete only question of the form","warning")},title:"Delete",children:Object(f.jsx)(da.k,{className:"icon",color:"#dc3545"})})]})})]}),Object(f.jsx)(Rl.d,{id:"source-".concat(c),type:"source",position:"bottom",className:"formnode-source-handle"})]})},Ul=Object(aa.b)((function(e){return{formState:e.form}}),(function(e){return{selectNodeForPanelData:function(t){return e(function(e){return{type:jl,payload:{nodeIndex:e}}}(t))},setFormActionsPopupId:function(t){return e(wl(t))},deleteFormNode:function(t){return e(Al(t))},setSnackbar:function(t,n){return e(kn(t,n))},addBlankFormNode:function(t){return e(function(e){return{type:gl,payload:{insertIndex:e}}}(t))}}}))(Ll),Ml=n(350),Bl=function(e){e.formState;var t=e.storyComponentsState,n=e.addNodeToForm,c=e.fetchSlotMappings,o=e.setFormPickers,s=t.slotMappingsFetched,i=t.slotMappings,r=Object(_c.i)().params,l=r.botId;r.formId;return Object(a.useEffect)((function(){s||c(l)}),[]),Object(f.jsxs)("div",{className:"formnode-picker-wrapper nowheel",children:[Object(f.jsx)("button",{type:"button",title:"Minimize",className:"icon-button-clear close-picker",onClick:function(){o([])},children:Object(f.jsx)(da.i,{className:"ibc-icon"})}),Object(f.jsxs)("div",{className:"picker-heading",children:[Object(f.jsxs)("div",{className:"picker-title",children:[Object(f.jsx)(Vo.a,{className:"icon"}),Object(f.jsx)("h3",{className:"title",children:"Mapped Slots"})]}),Object(f.jsx)("p",{className:"sub-text",children:"Click on + icon to add."})]}),Object(f.jsx)("div",{className:"picker-list",children:s?0!==i.length?i.map((function(e,t){return Object(f.jsxs)("div",{className:"list-node",children:[Object(f.jsx)("p",{className:"text text-overflow",title:"",children:e.slot}),Object(f.jsx)(ka.a,{title:"Add to form",placement:"top",children:Object(f.jsx)("div",{className:"icon-wrapper",role:"button",tabIndex:0,onClick:function(t){return function(e,t){n(t.slot)}(0,e)},children:Object(f.jsx)(da.c,{className:"icon"})})})]},t)})):Object(f.jsxs)("p",{className:"picker-message",children:["Add slot mappings ",Object(f.jsx)(ra.a,{to:"/bot/".concat(l,"/components"),children:"here"})," ","before you create forms."]}):Object(f.jsx)(a.Fragment,{children:Object(u.a)(new Array(5).fill(0)).map((function(e,t){return Object(f.jsx)(Ml.a,{height:32,variant:"rect",classes:{root:"picker-skeleton"}},t)}))})}),Object(f.jsx)("div",{className:"picker-footer",children:Object(f.jsx)(ua.t,{className:"drag-icon"})})]})},Hl=Object(aa.b)((function(e){return{formState:e.form,storyComponentsState:e.storyComponents}}),(function(e){return{fetchSlotMappings:function(t){return e(Ot(t))},addNodeToForm:function(t,n){return e(_l(t,n))},setFormPickers:function(t){return e(El(t))}}}))(Bl),Gl=function(e){var t=e.id,n=e.data,c=e.storyComponentsState,o=e.addNodeToForm,s=e.deleteFormNode,i=e.fetchSlotMappings,r=e.setFormActionsPopupId,l=c.slotMappingsFetched,d=c.slotMappings,m=Object(a.useState)(""),b=Object(sa.a)(m,2),p=b[0],j=b[1],h=Object(_c.i)().params.botId,O=Object(a.useMemo)((function(){return p.trim()?d.filter((function(e){var t,n;return null===(t=e.slot)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===p||void 0===p?void 0:p.toLowerCase())})):d}),[p,d]);return Object(a.useEffect)((function(){l||i(h)}),[]),Object(f.jsxs)("div",{className:"formnode-wrapper",children:[Object(f.jsx)(Rl.d,{id:"target-".concat(t),type:"target",position:"top",className:"formnode-target-handle"}),Object(f.jsx)(ur.a,{onClickAway:function(){s(n.nodeIndex)},children:Object(f.jsx)("div",{className:"form-node",children:Object(f.jsxs)("div",{className:"label-wrapper",children:[Object(f.jsx)("div",{className:"slot-icon-wrapper",children:Object(f.jsx)(da.b,{className:"slot-icon"})}),Object(f.jsx)("div",{className:"nodes-list",children:Object(f.jsxs)("div",{className:"app-popup select-dropdown nodrag nowheel",children:[l&&Object(f.jsx)(ti,{debounce:!1,className:"popup-search",onSearch:j}),Object(f.jsx)("div",{className:"select-items-wrapper",children:l?O.map((function(e,t){return Object(f.jsx)("div",{title:e.slot,role:"button",tabIndex:0,onClick:function(){return t=e.slot,o(t,n.nodeIndex),void r();var t},className:"select-item",children:e.slot},t)})):Object(f.jsx)(a.Fragment,{children:Object(u.a)(new Array(3).fill(0)).map((function(e,t){return Object(f.jsx)(Ml.a,{height:28,variant:"rect",classes:{root:"select-skeleton"}},t)}))})})]})})]})})}),Object(f.jsx)(Rl.d,{id:"source-".concat(t),type:"source",position:"bottom",className:"formnode-source-handle"})]})},Vl=Object(aa.b)((function(e){return{formState:e.form,storyComponentsState:e.storyComponents}}),(function(e){return{addNodeToForm:function(t,n){return e(_l(t,n))},deleteFormNode:function(t){return e(Al(t))},fetchSlotMappings:function(t){return e(Ot(t))},setFormActionsPopupId:function(){return e(wl())}}}))(Gl),zl={style:{stroke:"#FD6491",strokeWidth:2}},ql=[{icon:Vo.a,name:"Mapped Slots",id:"formpicker_mappedslots"}],Wl={FORM_NODE:Ul,NEW_FORM_NODE:Vl,FORM_NODE_PICKER:Hl},Kl=function(e){return e.map((function(e){return function(e){var t={id:e,type:"FORM_NODE_PICKER",data:{id:e},connectable:!1};return"formpicker_mappedslots"===e?Object(s.a)(Object(s.a)({},t),{},{position:{x:50,y:30}}):{}}(e)}))},Yl=function(e){var t,n,c,o=e.formState,i=e.storyComponentsState,r=e.fetchSlotMappings,l=e.updateFormFlow,d=e.setSnackbar,u=e.addFormQuestion,m=e.updateFormQuestion,b=e.deleteFormQuestion,p=e.addUpdateDeleteQuestionInState,j=o.formData,h=o.formDataInDB,v=o.selectedNodeIndex,x=i.slotMappings,y=i.slotMappingsFetched,N=Object(a.useState)(!1),S=Object(sa.a)(N,2),T=S[0],k=S[1],C=Object(a.useState)(null),w=Object(sa.a)(C,2),_=w[0],A=w[1],E=Object(a.useState)(""),F=Object(sa.a)(E,2),I=F[0],P=F[1],R=Object(a.useState)({_id:"",mode:""}),L=Object(sa.a)(R,2),U=L[0],M=L[1],B=Object(a.useRef)(),H=Object(_c.i)().params,G=H.botId,V=(H.formId.includes("NEW"),null===h||void 0===h||null===(t=h.settings)||void 0===t?void 0:t.some((function(e){return e.slot&&e.slot===(null===_||void 0===_?void 0:_.slot)}))),z=function(){P(""),M({_id:"",mode:""}),B.current&&B.current.blur()},q=function(e){A(Object(s.a)(Object(s.a)({},_),{},Object(D.a)({},e.target.name,e.target.value)))},W=function(e){var t=Object(s.a)(Object(s.a)({},j),{},{settings:j.settings.map((function(e){return e.slot===_.slot?_:e}))});l(t)};return Object(a.useEffect)((function(){y||r(G)}),[]),Object(a.useEffect)((function(){return P(""),-1!==v&&null!==j&&void 0!==j&&j.settings?v<j.settings.length?(k(!0),void A(j.settings[v])):void k(!1):(k(!1),void A(null))}),[v,j]),Object(f.jsxs)("div",{className:"formnode-details-panel ".concat(T?"formnode-details-panel__open":""),children:[-1!==v&&Object(f.jsx)("button",{type:"button",className:"icon-button-clear open-panel-button",onClick:function(){k(!T)},children:Object(f.jsx)($s.a,{className:"ibc-icon"})}),_&&Object(f.jsxs)("div",{className:"formpanel-contents-wrapper",children:[Object(f.jsx)("h3",{className:"formpanel-title",children:"Form Step Details"}),Object(f.jsxs)("div",{className:"formspanel-scrollable",children:[Object(f.jsx)(Xa,{label:"Slot to Fill*",value:_.slot,name:"slot",options:x.map((function(e){return{label:e.slot,value:e.slot}})),meta:{error:"",touched:!0},onChange:function(e){var t;if(null===(t=j.settings)||void 0===t?void 0:t.some((function(t){return t.slot===e.target.value})))d("Slot already in use","error");else{var n=Object(s.a)(Object(s.a)({},j),{},{settings:j.settings.map((function(t){return t.slot===_.slot?Object(s.a)(Object(s.a)({},_),{},{slot:e.target.value}):t}))});l(n)}},className:"formspanel-input",readOnly:V}),Object(f.jsx)(ic,{label:"Bot reply on valid user response",value:_.valid_response,name:"valid_response",placeholder:"Valid Response",meta:{error:"",touched:!0},onChange:q,onBlur:W,className:"formspanel-input"}),Object(f.jsx)(ic,{label:"Bot reply on invalid user response",value:_.invalid_response,name:"invalid_response",placeholder:"Invalid Response",meta:{error:"",touched:!0},onChange:q,onBlur:W,className:"formspanel-input"}),Object(f.jsx)("p",{className:"responses-title",children:"Questions"}),Object(f.jsx)(nc.a,{value:I,onChange:function(e){return P(e.target.value)},multiline:!0,variant:"outlined",size:"small",fullWidth:!0,minRows:2,maxRows:2,placeholder:"edit"===U.mode?"Edit question":"Enter new question",id:"questionText",name:"questionText",className:"input-field",onKeyDown:function(e){if(27!==e.keyCode||"edit"!==U.mode){if(13===e.keyCode&&e.shiftKey){if(e.preventDefault(),P(""),!I.trim())return;var t="utter_ask_".concat(j.name,"_").concat(_.slot);if(V)return"edit"===U.mode?(z(),void m(G,{utterance:t,id:U._id,text:I,slot:_.slot})):void u(G,{utteranceName:t,questionText:I,slot:_.slot});if("edit"===U.mode)return z(),void p({mode:"update",slot:_.slot,id:U._id,text:I});p({mode:"add",slot:_.slot,id:"".concat(Date.now().toString(36)),text:I})}}else z()},inputRef:B}),Object(f.jsx)("div",{className:"info-data",children:Object(f.jsx)("p",{className:"helper-text",children:"Press Shift + Enter to save".concat("edit"===U.mode?", Esc to cancel":"")})}),0!==(null===_||void 0===_||null===(n=_.ask_questions)||void 0===n?void 0:n.length)?Object(f.jsx)("div",{className:"list-wrapper",children:null===_||void 0===_||null===(c=_.ask_questions)||void 0===c?void 0:c.map((function(e,t){var n,a;return!(U._id===e._id&&"edit"===U.mode)&&Object(f.jsxs)("div",{className:"list-content-wrapper",children:[Object(f.jsxs)("div",{className:"list-content",children:[Object(f.jsx)("p",{className:"list-text",children:O(g(null===(n=e.value)||void 0===n?void 0:n.text))}),(null===(a=e.value)||void 0===a?void 0:a.image)&&Object(f.jsx)("img",{src:e.value.image,alt:"",className:"image-response"})]}),Object(f.jsxs)("div",{className:"list-actions",children:[Object(f.jsx)(ka.a,{title:"Edit",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear edit-action",onClick:function(){return function(e){var t;P(null===(t=e.value)||void 0===t?void 0:t.text),M({mode:"edit",_id:e._id}),B.current&&B.current.focus()}(e)},children:Object(f.jsx)(da.v,{className:"ibc-icon"})})}),Object(f.jsx)(ka.a,{title:"Delete",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(){return function(e){M({mode:"delete",_id:e._id})}(e)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]})]},e._id)}))}):Object(f.jsx)("p",{className:"notfound-text",children:"No responses found!"})]})]}),Object(f.jsx)(Pa,{open:"delete"===U.mode,onClose:z,onConfirm:function(){z(),V?b(G,{responseId:U._id,slot:_.slot}):p({mode:"delete",slot:_.slot,deleteId:U._id})},title:"Are you sure?",children:"The response will be deleted permanently. Do you wish to proceed?"})]})},Ql=Object(aa.b)((function(e){return{formState:e.form,storyComponentsState:e.storyComponents}}),(function(e){return{fetchSlotMappings:function(t){return e(Ot(t))},updateFormFlow:function(t){return e(function(e){return{type:yl,payload:{formFlow:e}}}(t))},setSnackbar:function(t,n){return e(kn(t,n))},addFormQuestion:function(t,n){return e(function(e,t){var n=t.questionText,a=t.utteranceName;return Nt(e,n,a,{callbackParams:{slot:t.slot,mode:"add"},onSuccess:Pl,onError:wn})}(t,n))},updateFormQuestion:function(t,n){return e(function(e,t){return kt(e,t,{callbackParams:{slot:t.slot,mode:"update"},onSuccess:Pl,onError:wn})}(t,n))},deleteFormQuestion:function(t,n){return e(function(e,t){var n=t.responseId,a=t.slot;return Ct(e,n,{callbackParams:{slot:a,mode:"delete"},onSuccess:Pl,onError:wn})}(t,n))},addUpdateDeleteQuestionInState:function(t){return e(function(e){var t=e.id,n=e.text,a=e.slot,c=e.deleteId,o=e.mode;return{type:Nl,payload:{id:t,text:n,slot:a,deleteId:c,mode:o,setAsUnsaved:!0}}}(t))}}}))(Yl),Jl=function(e){var t=e.formState,n=e.clearNodeSelection,c=e.setFormPickers,o=t.formData,i=t.openFormPickers,r=Object(a.useState)([]),l=Object(sa.a)(r,2),d=l[0],m=l[1],b=Object(_c.i)().params.formId;null===b||void 0===b||b.includes("NEW");return Object(a.useEffect)((function(){if(null!==o&&void 0!==o&&o.settings){var e=function(e,t){var n=!1,a=e.map((function(e,a){var c,o;0!==t.length&&a<t.length&&(null===(c=t[a].data)||void 0===c?void 0:c.label)===e.slot&&!n?o=t[a].id:n=!0;var i={id:o||"node_".concat(Date.now()).concat(a),type:"FORM_NODE",data:{label:e.slot,nodeIndex:a},position:{x:420,y:105*a+50}};return"NEW_FORM_NODE"===e.slot?Object(s.a)(Object(s.a)({},i),{},{type:"NEW_FORM_NODE",data:{nodeIndex:a},selectable:!1}):i})),c=a.map((function(e,t){if(0!==t)return Object(s.a)({id:"edge_".concat(Date.now()).concat(t),source:a[t-1].id,target:e.id},zl)}));return c.shift(),[].concat(Object(u.a)(a),Object(u.a)(c))}(o.settings,d),t=Kl(i);m([].concat(Object(u.a)(e),Object(u.a)(t)))}}),[o]),Object(a.useEffect)((function(){m((function(e){var t=e.filter((function(e){return!e.id.includes("formpicker")})),n=Kl(i);return[].concat(Object(u.a)(t),Object(u.a)(n))}))}),[i]),Object(f.jsxs)("div",{className:"form-editor-view",children:[Object(f.jsxs)("div",{className:"form-editor-sidepanel",children:[Object(f.jsxs)("div",{className:"sidepanel-title",children:[Object(f.jsx)($s.d,{className:"icon"}),Object(f.jsx)("h3",{className:"title",children:"Form Components"})]}),Object(f.jsx)("div",{className:"form-components-wrapper",children:ql.map((function(e){var t=e.icon,n=e.name,a=e.id,o=i.includes(a);return Object(f.jsx)(ka.a,{title:n,placement:"right",children:Object(f.jsxs)("button",{className:"component ".concat(o?"is-open":""),type:"button",onClick:function(){return function(e){i.includes(e)?c([]):c([e])}(a)},children:[Object(f.jsx)("div",{className:"icon-wrapper",children:Object(f.jsx)(t,{className:"icon"})}),Object(f.jsx)("p",{className:"name",children:n})]})},a)}))})]}),Object(f.jsxs)(Rl.e,{nodeTypes:Wl,elements:d,className:"form-editor",arrowHeadColor:"#fd6491",markerEndId:"react-flow__arrowclosed",onSelectionChange:function(e){e||n()},selectNodesOnDrag:!1,children:[Object(f.jsx)(Rl.c,{showFitView:!1}),Object(f.jsx)(Rl.a,{variant:"dots",size:1.5,color:"var(--editor1)"})]}),Object(f.jsx)(Ql,{})]})},Zl=Object(aa.b)((function(e){return{formState:e.form}}),(function(e){return{clearNodeSelection:function(){return e({type:hl})},setFormPickers:function(t){return e(El(t))}}}))(Jl),Xl=function(e){var t=e.fetchFormData,n=e.formState,c=e.clearFormState,o=e.updateFormDataState,s=e.addUpdateForm,i=n.formFetching,r=n.formData,l=n.unsavedForm,d=Object(_c.i)().params,u=d.botId,m=d.formId,b=Object(a.useState)(""),p=Object(sa.a)(b,2),j=p[0],h=p[1],O=Object(a.useState)(!1),v=Object(sa.a)(O,2),g=v[0],x=v[1],y=!1,N=m.includes("NEW"),S=Object(a.useRef)();return Object(a.useEffect)((function(){return N&&S&&(S.current.focus(),setTimeout((function(){S.current.select()}),500)),t(u,m),function(){c()}}),[]),Object(a.useEffect)((function(){var e,t="Kairon - AI Powered Contextual Chatbot Builder";r&&(h(null===r||void 0===r?void 0:r.name),document.title=null!==r&&void 0!==r&&r.name?"".concat(null===r||void 0===r||null===(e=r.name)||void 0===e?void 0:e.slice(0,20)," | ").concat(t):t)}),[r]),Object(f.jsxs)("div",{className:"form-wrapper",children:[Object(f.jsxs)("div",{className:"form-header",children:[Object(f.jsxs)("div",{className:"form-breadcrumbs",children:[Object(f.jsx)(ra.a,{to:"/bot/".concat(u),className:"breadcrumb breadcrumb-link",children:"FORMS"}),Object(f.jsx)($s.b,{className:"breadcrumb-sep"}),Object(f.jsx)("p",{className:"breadcrumb",title:null===r||void 0===r?void 0:r.name,children:(null===r||void 0===r?void 0:r.name)||""})]}),Object(f.jsxs)("div",{className:"form-title-wrapper",children:[N?Object(f.jsx)(ka.a,{title:g?"":"Rename",disableFocusListener:!0,children:Object(f.jsx)("input",{className:"text-overflow app-heading heading-edit ".concat("untitled"!==(null===j||void 0===j?void 0:j.toLowerCase())||g?"":"noname-form"),value:j,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){27===e.keyCode?(y=!0,e.target.blur()):13===e.keyCode&&e.target.blur()},spellCheck:!1,onBlur:function(){x(!1);var e=j.trim();if(e!==(null===r||void 0===r?void 0:r.name)){if(""===e&&(y=!0),y)return h(null===r||void 0===r?void 0:r.name),void(y=!1);o("name",e),h(e)}else h(e)},style:{width:"".concat(16*(null===j||void 0===j?void 0:j.length)+20,"px")},ref:S,onFocus:function(){x(!0),"untitled"===(null===j||void 0===j?void 0:j.toLowerCase())&&S.current.select()}})}):Object(f.jsx)("h2",{className:"app-heading form-name",style:{paddingLeft:"6px"},children:(null===r||void 0===r?void 0:r.name)||""}),r&&Object(f.jsx)(ka.a,{title:"".concat(!l&&!N||i?"":"Click to Save"),placement:"top",children:Object(f.jsxs)("div",{role:"button",tabIndex:0,className:"icon-button-clear save-form-button ".concat(l||N?"unsaved-button":""," ").concat(i?"unsaved-loading":""),onClick:function(){!l&&!N||i||s(u,r,N?"POST":"PUT")},children:[i?Object(f.jsx)(Lo.a,{color:"primary",size:16,thickness:4,style:{marginLeft:"8px"}}):Object(f.jsx)(Ks.g,{className:"ibc-icon"}),Object(f.jsx)("span",{className:"button-text",children:l||N?i?"Saving":"Save":"Synced"})]})})]})]}),Object(f.jsx)("div",{className:"form-editor-wrapper",children:Object(f.jsx)(Zl,{})})]})},$l=Object(aa.b)((function(e){return{formState:e.form}}),(function(e){return{fetchFormData:function(t,n){return e(Cl(t,n))},clearFormState:function(){return e({type:bl})},updateFormDataState:function(t,n){return e(function(e,t){return{type:pl,payload:{field:e,value:t}}}(t,n))},addUpdateForm:function(t,n,a){return e(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return function(a){var c=Il(t);c.error?a(wn({message:c.message})):(a({type:ul}),a(d("".concat(j.server,"/api/bot/").concat(e,"/forms"),{method:n,args:Object(s.a)({},c),callbackParams:{botId:e,formId:t._id,method:n},success:Fl,error:Dl})))}}(t,n,a))}}}))(Xl),ed=function(){return Object(f.jsx)("div",{className:"cookies-page",children:Object(f.jsxs)("div",{className:"cookie-content",children:[Object(f.jsxs)("div",{className:"cookie-header",children:[Object(f.jsxs)("a",{href:"/login",className:"logo",children:[Object(f.jsx)("img",{src:"/assets/logo/logo.svg",alt:"Kairon",className:"logo-primary"}),Object(f.jsx)("img",{src:"/assets/logo/kAIron.svg",alt:"kAIron",className:"logo-text"})]}),Object(f.jsx)("h3",{className:"logo-desc",children:"Powered by Digit\xe9"})]}),Object(f.jsx)("h1",{className:"page-title",children:"Cookie Policy"}),Object(f.jsx)("h2",{className:"section-title",children:"Google Analytics"}),Object(f.jsx)("p",{className:"section",children:"We track visitors to our website using Google Analytics from Google, Inc. Google Analytics records how you arrived at our site, what pages you view within our site, the time spent on different parts of our site, and some basic information about your computer and browser. All of that information is anonymous \u2013 so we don\u2019t know who you are; we just know that somebody visited our site. We actually look at data in aggregate, so, while we know that several people visited a page on a given day, we cannot identify who specifically visited."}),Object(f.jsx)("h2",{className:"section-title",children:"Why do we collect this information?"}),Object(f.jsxs)("p",{className:"section",children:["The information we collect from Google Analytics helps us understand what parts of our sites are working well, how people arrive at our site and so on. Like most websites, we use this information to make our website better. To learn more about how Google Analytics processes and collects this data please follow this link \u2013"," ",Object(f.jsx)("a",{href:"https://www.google.com/policies/privacy/partners",target:"_blank",rel:"noreferrer",children:"https://www.google.com/policies/privacy/partners"}),Object(f.jsx)("br",{}),"You can also opt-out of Google Analytics tracking as well, please follow this link \u2013"," ",Object(f.jsx)("a",{href:"https://tools.google.com/dlpage/gaoptout",target:"_blank",rel:"noreferrer",children:"https://tools.google.com/dlpage/gaoptout"})]}),Object(f.jsx)("button",{type:"button",className:"back-link",onClick:function(){return I.goBack()},children:"Back"})]})})},td=n(56),nd=n.n(td),ad=function(e,t){var n=t.handleOpenDialog;return[{Header:"Action Name",accessor:"action",Cell:function(e){var t=e.value,a=e.row;return Object(f.jsx)("div",{title:t,className:"log-data log-details-button",role:"button",tabIndex:0,onClick:function(){return n(a)},children:t})}},{Header:"URL",accessor:"url",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{title:t,className:"log-data",style:{maxWidth:"300px"},children:t})}},{Header:"Intent",accessor:"intent",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{title:t,className:"log-data",children:t})}},{Header:"Sender",accessor:"sender",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{title:t,className:"log-data ",children:t})}},{Header:"Status",accessor:"status",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("div",{className:"log-data",children:Object(f.jsx)("p",{className:"log-status ".concat("SUCCESS"===t?"log-success":"log-fail"),children:null===t||void 0===t?void 0:t.toLowerCase()})})}}]},cd=function(e,t){var n=t.handleOpenDialog;return[{Header:"Files Uploaded",accessor:"files_received",Cell:function(e){var t=e.value,a=e.row;return Object(f.jsx)("div",{className:"log-data log-details-button",role:"button",tabIndex:0,onClick:function(){return n(a)},children:t?t.join(", "):"Data Validation"})}},{Header:"Start Time",accessor:"start_timestamp",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{className:"log-data",children:b()(b.a.utc(t).toDate()).format("DD MMM hh:mm")})}},{Header:"End Time",accessor:"end_timestamp",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{className:"log-data",children:t?b()(b.a.utc(t).toDate()).format("DD MMM hh:mm"):"In Progress"})}},{Header:"Upload Status",accessor:"event_status",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{title:t,className:"log-data",children:t})}},{Header:"File Processing Status",accessor:"status",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{title:t,className:"log-status ".concat("Success"===t?"log-success":"log-fail"),children:t})}}]},od=function(e){var t,n,c,o,i,r,l,d,u,m,p,j,h,O,v,g,x,y,N,S,T,k,C,w,_,E,F,I,D,P,R,L,U,M,B,H,G,V,z,q,W,K,Y,Q=e.logsState,J=e.fetchHttpActionLogs,Z=e.globalState,X=Object(a.useState)(10),$=Object(sa.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(10),ae=Object(sa.a)(ne,2),ce=ae[0],oe=ae[1],se=Object(a.useState)(0),ie=Object(sa.a)(se,2),re=ie[0],le=ie[1],de=Object(a.useState)({open:!1,data:null}),ue=Object(sa.a)(de,2),me=ue[0],be=ue[1],pe=Q.httpLogs,je=Q.fetching,he=Q.totalLogs,fe=Z.uiConfigs,Oe=Object(_c.i)().params.botId;Object(a.useEffect)((function(){J(Oe,0,ee)}),[]);var ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e*ee;J(Oe,t,ee),le(e)},ge=function(){if(le(0),ce<10||"NaN"===parseInt(ce))return oe(10),te(10),void J(Oe,0,10);var e=Math.round(ce);oe(e=e>1e3?1e3:e),te(e),J(Oe,0,e)},xe=function(){be(Object(s.a)(Object(s.a)({},me),{},{open:!1})),setTimeout((function(){return be({open:!1,data:null})}),500)},ye=function(e){try{return JSON.parse(e.replaceAll("'",'"'))}catch(t){return e}};return Object(f.jsxs)("div",{className:"app-page httplogs-wrapper",children:[Object(f.jsxs)("div",{className:"logs-header",children:[Object(f.jsx)("h1",{className:"app-heading",children:"HTTP Action Logs"}),je?Object(f.jsx)(Mo,{text:""}):Object(f.jsx)("button",{type:"button",className:"icon-button-clear",onClick:function(){ve()},children:Object(f.jsx)(qo.l,{className:"ibc-icon"})})]}),Object(f.jsx)("div",{className:"logs-table-wrapper",children:je||0!==pe.length?Object(f.jsx)(mi,{tableData:pe,columns:ad(0,{handleOpenDialog:function(e){be({open:!0,data:e})}}),className:"logs-table",showGlobalFilter:!0,autoResetGlobalFilter:!1}):Object(f.jsx)("p",{children:"No HTTP Action Logs Found"})}),Object(f.jsxs)("div",{className:"logs-footer",children:[Object(f.jsx)(ni.a,{count:Math.ceil(he/ee),size:"small",color:"primary",showFirstButton:!0,showLastButton:!0,page:re+1,onChange:function(e,t){return ve(t-1)}}),Object(f.jsx)("div",{className:"per-page-count",children:Object(f.jsx)(nc.a,{value:ce,onChange:function(e){return oe(e.target.value)},onBlur:ge,onKeyDown:function(e){"Enter"===e.key&&ge()},type:"number",label:"Records Per Page",size:"small",placeholder:"Records Per Page"})})]}),Object(f.jsxs)(Pa,{open:me.open,title:null===(t=me.data)||void 0===t||null===(n=t.original)||void 0===n?void 0:n.intent,onClose:xe,noDialogActions:!0,maxWidth:"md",className:"logs-dialog",children:[Object(f.jsxs)("div",{className:"logs-details-wrapper",children:[Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Action Name"}),Object(f.jsx)("div",{className:"detail-view",children:null===(c=me.data)||void 0===c||null===(o=c.original)||void 0===o?void 0:o.action})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Request Headers"}),Object(f.jsx)("div",{className:"detail-view",children:"object"===typeof ye(null===(i=me.data)||void 0===i||null===(r=i.original)||void 0===r?void 0:r.headers)?Object(f.jsx)(nd.a,{src:ye(null===(l=me.data)||void 0===l||null===(d=l.original)||void 0===d?void 0:d.headers),collapsed:!0,theme:"dark"===(null===fe||void 0===fe?void 0:fe.theme)?"railscasts":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}}):null===(u=me.data)||void 0===u||null===(m=u.original)||void 0===m?void 0:m.headers})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Request Parameters"}),Object(f.jsx)("div",{className:"detail-view",children:"object"===typeof ye(null===(p=me.data)||void 0===p||null===(j=p.original)||void 0===j?void 0:j.request_params)?Object(f.jsx)(nd.a,{src:ye(null===(h=me.data)||void 0===h||null===(O=h.original)||void 0===O?void 0:O.request_params),collapsed:!0,theme:"dark"===(null===fe||void 0===fe?void 0:fe.theme)?"railscasts":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}}):null===(v=me.data)||void 0===v||null===(g=v.original)||void 0===g?void 0:g.request_params})]}),(null===(x=me.data)||void 0===x||null===(y=x.original)||void 0===y?void 0:y.exception)&&Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Exception"}),Object(f.jsx)("div",{className:"detail-view",children:null===(N=me.data)||void 0===N||null===(S=N.original)||void 0===S?void 0:S.exception})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Sender"}),Object(f.jsx)("div",{className:"detail-view",children:null===(T=me.data)||void 0===T||null===(k=T.original)||void 0===k?void 0:k.sender})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Status"}),Object(f.jsx)("div",{className:"detail-view",children:Object(f.jsx)("p",{className:"log-status ".concat("SUCCESS"===(null===(C=me.data)||void 0===C||null===(w=C.original)||void 0===w?void 0:w.status)?"log-success":"log-fail"),children:null===(_=me.data)||void 0===_||null===(E=_.original)||void 0===E||null===(F=E.status)||void 0===F?void 0:F.toLowerCase()})})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Timestamp"}),Object(f.jsx)("div",{className:"detail-view",children:b()(null===(I=me.data)||void 0===I||null===(D=I.original)||void 0===D?void 0:D.timestamp).format("LLLL")})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"URL"}),Object(f.jsx)("div",{className:"detail-view",children:null===(P=me.data)||void 0===P||null===(R=P.original)||void 0===R?void 0:R.url})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"API Response"}),Object(f.jsx)("div",{className:"detail-view",children:"object"===typeof ye(null===(L=me.data)||void 0===L||null===(U=L.original)||void 0===U?void 0:U.api_response)?Object(f.jsx)(nd.a,{src:ye(null===(M=me.data)||void 0===M||null===(B=M.original)||void 0===B?void 0:B.api_response),collapsed:!0,theme:"dark"===(null===fe||void 0===fe?void 0:fe.theme)?"eighties":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}}):null===(H=me.data)||void 0===H||null===(G=H.original)||void 0===G?void 0:G.api_response})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Bot Response"}),Object(f.jsx)("div",{className:"detail-view",children:"object"===typeof ye(null===(V=me.data)||void 0===V||null===(z=V.original)||void 0===z?void 0:z.bot_response)?Object(f.jsx)(nd.a,{src:ye(null===(q=me.data)||void 0===q||null===(W=q.original)||void 0===W?void 0:W.bot_response),collapsed:!0,theme:"dark"===(null===fe||void 0===fe?void 0:fe.theme)?"railscasts":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}}):null===(K=me.data)||void 0===K||null===(Y=K.original)||void 0===Y?void 0:Y.bot_response})]})]}),Object(f.jsx)("div",{className:"dialog-actions",children:Object(f.jsx)(Ia.a,{onClick:xe,color:"secondary",children:"Close"})})]})]})},sd="LOGS_FETCHING",id="POPULATE_HTTP_LOGS",rd="POPULATE_UPLOAD_LOGS",ld="START_DATA_VALIDATION",dd="END_DATA_VALIDATION",ud=function(e){var t,n;return{type:id,payload:{data:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.logs)||[],total:(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.total)||0}}},md=function(e){return{type:rd,payload:{data:(null===e||void 0===e?void 0:e.data)||[]}}},bd=function(e){return function(t){t({type:sd}),t(d("".concat(j.server,"/api/bot/").concat(e,"/importer/logs"),{method:"GET",success:md,error:wn}))}},pd=function(e,t){return function(e){var n=t.botId;e(bd(n)),e(kn("Event triggered! Check File Upload logs.","success")),e({type:dd})}},jd=function(e){return function(t){t(wn(e)),t({type:dd})}},hd=Object(aa.b)((function(e){return{logsState:e.logs,globalState:e.global}}),(function(e){return{fetchHttpActionLogs:function(t,n,a){e(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return function(a){a({type:sd}),a(d("".concat(j.server,"/api/bot/").concat(e,"/actions/logs?start_idx=").concat(t,"&page_size=").concat(n),{method:"GET",success:ud,error:wn}))}}(t,n,a))}}}))(od),fd=[{key:"intents",name:"Intents"},{key:"training_examples",name:"Training Examples"},{key:"utterances",name:"Utterances"},{key:"config",name:"Config"},{key:"http_actions",name:"HTTP Actions"},{key:"stories",name:"Stories"}],Od=[{key:"actions_count",name:"Actions"},{key:"entities_count",name:"Entities"},{key:"forms_count",name:"Forms"},{key:"intents_count",name:"Intents"},{key:"slots_count",name:"Slots"},{key:"utterances_count",name:"Utterances"}],vd=function(e){var t,n,c,o,i,r,l,d,u,m,b,p=e.logsState,j=e.fetchFileUploadLogs,h=e.validateData,O=e.globalState,v=Object(a.useState)({open:!1,data:null}),g=Object(sa.a)(v,2),x=g[0],y=g[1],N=p.uploadLogs,S=p.fetching,T=p.validating,k=O.uiConfigs,C=Object(_c.i)().params.botId;Object(a.useEffect)((function(){j(C)}),[]);var w=function(){y(Object(s.a)(Object(s.a)({},x),{},{open:!1})),setTimeout((function(){return y({open:!1,data:null})}),500)},_=function(e){try{return JSON.parse(e.replaceAll("'",'"'))}catch(t){return e}};return Object(f.jsxs)("div",{className:"app-page uploadlogs-wrapper",children:[Object(f.jsxs)("div",{className:"logs-header",children:[Object(f.jsxs)("div",{className:"heading",children:[Object(f.jsx)("h1",{className:"app-heading",children:"File Upload Logs"}),S?Object(f.jsx)(Mo,{text:""}):Object(f.jsx)("button",{type:"button",className:"icon-button-clear",onClick:function(){j(C)},children:Object(f.jsx)(qo.l,{className:"ibc-icon"})})]}),Object(f.jsx)(ka.a,{title:"Validate previously uploaded data",disableFocusListener:!0,placement:"top",children:Object(f.jsxs)("button",{type:"button",className:"app-btn-icon",disabled:T,onClick:function(){return h(C)},children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:T?Object(f.jsx)(Lo.a,{className:"btn-icon loader"}):Object(f.jsx)(qo.f,{className:"btn-icon"})}),T?"Validating":"Validate Data"]})})]}),Object(f.jsx)("div",{className:"logs-table-wrapper",children:S||0!==N.length?Object(f.jsx)(mi,{tableData:N,columns:cd(0,{handleOpenDialog:function(e){y({open:!0,data:e.original})}}),className:"logs-table"}):Object(f.jsx)("p",{children:"No File Upload Logs Found"})}),Object(f.jsxs)(Pa,{open:x.open,title:"File upload details",onClose:w,noDialogActions:!0,maxWidth:"md",className:"logs-dialog",children:[Object(f.jsxs)("div",{className:"logs-details-wrapper",children:[Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Files Uploaded"}),Object(f.jsx)("div",{className:"detail-view",children:null!==(t=x.data)&&void 0!==t&&t.files_received?null===(n=x.data)||void 0===n?void 0:n.files_received.join(", "):"Data Validation"})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"File Upload Status"}),Object(f.jsx)("div",{className:"detail-view",children:null===(c=x.data)||void 0===c?void 0:c.event_status})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Files Processing Status"}),Object(f.jsx)("div",{className:"detail-view",children:Object(f.jsx)("p",{className:"log-status ".concat("Success"===(null===(o=x.data)||void 0===o?void 0:o.status)?"log-success":"log-fail"),children:null===(i=x.data)||void 0===i||null===(r=i.status)||void 0===r?void 0:r.toLowerCase()})})]}),(null===(l=x.data)||void 0===l?void 0:l.exception)&&Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Exception"}),Object(f.jsx)("div",{className:"detail-view",children:null===(d=x.data)||void 0===d?void 0:d.exception})]}),fd.map((function(e){var t,n,c,o,s,i;return Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:e.name}),x.data&&Object(f.jsx)("div",{className:"detail-view",children:"object"===typeof _(x.data[e.key])?Object(f.jsxs)("div",{className:"value-block",children:["config"!==e.key&&Object(f.jsxs)("span",{children:["Total ",e.name,":"," ",Object(f.jsx)("span",{className:"count-value",children:null===(t=x.data[e.key])||void 0===t?void 0:t.count})]}),null!==(n=x.data[e.key])&&void 0!==n&&null!==(c=n.data)&&void 0!==c&&c.length?Object(f.jsxs)(a.Fragment,{children:[Object(f.jsxs)("p",{className:"log-status log-warning",children:[null===(o=x.data[e.key])||void 0===o||null===(s=o.data)||void 0===s?void 0:s.length," ","Warnings"]}),Object(f.jsx)(nd.a,{src:_(null===(i=x.data[e.key])||void 0===i?void 0:i.data),collapsed:!0,theme:"dark"===(null===k||void 0===k?void 0:k.theme)?"eighties":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}})]}):Object(f.jsx)("p",{className:"log-status log-success",children:"No Errors"})]}):x.data[e.key]})]},e.key)})),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Domain"}),x.data&&Object(f.jsxs)("div",{className:"detail-view",children:["object"===typeof _(x.data.domain)?null!==(u=x.data.domain)&&void 0!==u&&null!==(m=u.data)&&void 0!==m&&m.length?Object(f.jsx)(nd.a,{src:_(null===(b=x.data.domain)||void 0===b?void 0:b.data),collapsed:!0,theme:"dark"===(null===k||void 0===k?void 0:k.theme)?"eighties":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}}):Object(f.jsx)("p",{className:"log-status log-success",children:"No Errors"}):x.data.domain,Od.map((function(e){var t;return Object(f.jsx)("div",{className:"value-block",children:Object(f.jsxs)("span",{children:["Total ",e.name,":"," ",Object(f.jsx)("span",{className:"count-value",children:null===(t=x.data)||void 0===t?void 0:t.domain[e.key]})]})},e.key)}))]})]})]}),Object(f.jsx)("div",{className:"dialog-actions",children:Object(f.jsx)(Ia.a,{onClick:w,color:"secondary",children:"Close"})})]})]})},gd=Object(aa.b)((function(e){return{logsState:e.logs,globalState:e.global}}),(function(e){return{fetchFileUploadLogs:function(t){e(bd(t))},validateData:function(t){e(function(e){return function(t){t({type:ld}),t(d("".concat(j.server,"/api/bot/").concat(e,"/validate"),{method:"POST",callbackParams:{botId:e},success:pd,error:jd}))}}(t))}}}))(vd),xd="MODEL_TESTING_EVENT_START",yd="MODEL_TESTING_EVENT_STOP",Nd="POPULATE_MODEL_TESTING_LOGS",Sd="TESTING_LOGS_FETCHING",Td=function(e){var t,n=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>=1?null===e||void 0===e?void 0:e.data[0]:null;return{type:Nd,payload:{data:(null===e||void 0===e?void 0:e.data)||[],lastTestingReport:n}}},kd=function(e){return function(t){t({type:Sd}),t(d("".concat(j.server,"/api/bot/").concat(e,"/logs/test"),{method:"GET",success:Td,error:wn}))}},Cd=function(e,t){return function(n){var a=t.botId;n(kn(e.message,"success")),n({type:yd}),n(kd(a))}},wd=function(e){return function(t){t(wn(e)),t({type:yd})}},_d=function(e){return function(t){t({type:xd}),t(d("".concat(j.server,"/api/bot/").concat(e,"/test"),{method:"POST",callbackParams:{botId:e},success:Cd,error:wd}))}},Ad=function(e,t){var n=t.handleOpenDialog;return[{Header:"Test Event Id",accessor:"_id",Cell:function(e){var t=e.value,a=e.row;return Object(f.jsx)("div",{className:"log-data log-details-button",role:"button",tabIndex:0,onClick:function(){return n(a)},children:t})}},{Header:"Start Time",accessor:"start_timestamp",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{className:"log-data",children:b()(b.a.utc(t).toDate()).format("DD MMM hh:mm")})}},{Header:"End Time",accessor:"end_timestamp",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{className:"log-data",children:t?b()(b.a.utc(t).toDate()).format("DD MMM hh:mm"):"In Progress"})}},{Header:"Event Status",accessor:"event_status",Cell:function(e){var t=e.value;e.row;return Object(f.jsx)("p",{title:t,className:"log-data",children:t})}},{Header:"Test Result",accessor:"status",Cell:function(e){var t=e.value;e.row;return!!t&&Object(f.jsx)("p",{title:t,className:"log-status ".concat("SUCCESS"===t?"log-success":"log-fail"),children:t})}}]},Ed=function(e){var t,n,c,o,i,r,l,d,u,m,p,j,h=e.modelTestingState,O=e.startModelTesting,v=e.fetchModelTestingLogs,g=e.globalState,x=h.fetchingLogs,y=h.modelTestingLogs,N=h.testingEventResponseReceived,S=g.uiConfigs,T=Object(a.useState)({open:!1,data:null}),k=Object(sa.a)(T,2),C=k[0],w=k[1],_=Object(_c.i)().params.botId,E=function(){w(Object(s.a)(Object(s.a)({},C),{},{open:!1})),setTimeout((function(){return w({open:!1,data:null})}),500)};return Object(a.useEffect)((function(){v(_)}),[]),Object(f.jsxs)("div",{className:"app-page model-testing-wrapper",children:[Object(f.jsxs)("div",{className:"testing-logs-header",children:[Object(f.jsxs)("div",{className:"heading",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Model Testing Logs"}),x?Object(f.jsx)(Mo,{text:""}):Object(f.jsx)("button",{type:"button",className:"icon-button-clear",onClick:function(){return v(_)},children:Object(f.jsx)(qo.l,{className:"ibc-icon"})})]}),Object(f.jsx)(ka.a,{title:"Test latest model",disableFocusListener:!0,placement:"top",children:Object(f.jsxs)("button",{type:"button",className:"app-btn-icon",disabled:!N,onClick:function(){return O(_)},children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:N?Object(f.jsx)(da.w,{className:"btn-icon"}):Object(f.jsx)(Lo.a,{className:"btn-icon loader"})}),"Test Model"]})})]}),Object(f.jsx)("div",{className:"testinglogs-table-wrapper",children:x||0!==y.length?Object(f.jsx)(mi,{tableData:y,columns:Ad(0,{handleOpenDialog:function(e){w({open:!0,data:e.original})}}),className:"testinglogs-table"}):Object(f.jsx)("p",{children:"No Testing Logs Found"})}),Object(f.jsxs)(Pa,{open:C.open,title:"Testing Details",onClose:E,noDialogActions:!0,maxWidth:"md",className:"logs-dialog",children:[Object(f.jsxs)("div",{className:"logs-details-wrapper",children:[Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Test Event Id"}),Object(f.jsx)("div",{className:"detail-view",children:null===C||void 0===C||null===(t=C.data)||void 0===t?void 0:t._id})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Test Start Time"}),Object(f.jsx)("div",{className:"detail-view",children:b()(b.a.utc(null===C||void 0===C||null===(n=C.data)||void 0===n?void 0:n.start_timestamp).toDate()).format("DD MMM hh:mm")})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Test End Time"}),Object(f.jsx)("div",{className:"detail-view",children:b()(b.a.utc(null===C||void 0===C||null===(c=C.data)||void 0===c?void 0:c.end_timestamp).toDate()).format("DD MMM hh:mm")})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Test Result"}),Object(f.jsx)("div",{className:"detail-view",children:Object(f.jsx)("p",{className:"log-status ".concat("SUCCESS"===(null===(o=C.data)||void 0===o?void 0:o.status)?"log-success":"log-fail"),children:null===(i=C.data)||void 0===i||null===(r=i.status)||void 0===r?void 0:r.toLowerCase()})})]}),(null===(l=C.data)||void 0===l?void 0:l.exception)&&Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Exception"}),Object(f.jsx)("div",{className:"detail-view",children:null===(d=C.data)||void 0===d?void 0:d.exception})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Action Prediction Test Info"}),C.data&&Object(f.jsx)("div",{className:"detail-view",children:2===(null===C||void 0===C||null===(u=C.data)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.length)&&Object(f.jsx)(nd.a,{src:C.data.data[0],collapsed:!0,theme:"dark"===(null===S||void 0===S?void 0:S.theme)?"eighties":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}})})]}),Object(f.jsxs)("div",{className:"log-detail",children:[Object(f.jsx)("div",{className:"detail-key",children:"Intent Prediction Test Info"}),C.data&&Object(f.jsx)("div",{className:"detail-view",children:2===(null===C||void 0===C||null===(p=C.data)||void 0===p||null===(j=p.data)||void 0===j?void 0:j.length)&&Object(f.jsx)(nd.a,{src:C.data.data[1],collapsed:!0,theme:"dark"===(null===S||void 0===S?void 0:S.theme)?"eighties":"rjv-default",enableClipboard:function(e){A(JSON.stringify(null===e||void 0===e?void 0:e.src,null,"\t"))}})})]})]}),Object(f.jsx)("div",{className:"dialog-actions",children:Object(f.jsx)(Ia.a,{onClick:E,color:"secondary",children:"Close"})})]})]})},Fd=Object(aa.b)((function(e){return{modelTestingState:e.modelTesting,globalState:e.global}}),(function(e){return{startModelTesting:function(t){return e(_d(t))},fetchModelTestingLogs:function(t){return e(kd(t))}}}))(Ed),Id=n(93),Dd=n(120),Pd=function(e){var t,n,c,o,s=e.uiConfigs,i=e.saveGptKey,r=e.deleteGptKey,l=Object(a.useState)({accept:!1,value:""}),d=Object(sa.a)(l,2),u=d[0],m=d[1],b=Object(a.useState)(!1),p=Object(sa.a)(b,2),j=p[0],h=p[1],O=Object(a.useState)("Copy"),v=Object(sa.a)(O,2),g=v[0],x=v[1],y=Object(a.useState)(""),N=Object(sa.a)(y,2),S=N[0],T=N[1],k=Object(a.useRef)();return Object(f.jsx)("div",{className:"gptkey-settings",children:s.gptKey?Object(f.jsxs)("div",{className:"added-key-block",children:[Object(f.jsxs)("div",{className:"key-view-block",children:[j?Object(f.jsx)("p",{className:"key",children:null===s||void 0===s?void 0:s.gptKey}):Object(f.jsx)("p",{className:"key",children:"".concat(null===s||void 0===s||null===(t=s.gptKey)||void 0===t?void 0:t.slice(0,3),"*********").concat(null===s||void 0===s||null===(n=s.gptKey)||void 0===n?void 0:n.slice((null===s||void 0===s||null===(c=s.gptKey)||void 0===c?void 0:c.length)-4,null===s||void 0===s||null===(o=s.gptKey)||void 0===o?void 0:o.length))}),Object(f.jsx)("button",{type:"button",className:"view-button",onClick:function(){return h(!j)},children:j?"Hide":"Reveal"}),Object(f.jsx)("button",{type:"button",disabled:"Copied!"===g,className:"view-button copy-button",onClick:function(){A(null===s||void 0===s?void 0:s.gptKey),x("Copied!"),setTimeout((function(){return x("Copy")}),3e3)},children:g})]}),Object(f.jsx)(ka.a,{title:"Delete Key",placement:"top",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear",onClick:function(){r(),h(!1)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]}):Object(f.jsx)("div",{className:"no-key-block",children:u.accept?Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",value:u.value,className:"key-input",placeholder:"Enter GPT-3 Key",ref:k,onChange:function(e){return m({accept:!0,value:e.target.value})}}),S&&Object(f.jsx)("div",{className:"error-msg",children:S}),Object(f.jsxs)("div",{className:"buttons-wrapper",children:[Object(f.jsx)("button",{type:"button",className:"gpt-key-button cancel-btn",onClick:function(){m({value:"",accept:!1}),T("")},children:"Cancel"}),Object(f.jsx)("button",{type:"button",className:"gpt-key-button",onClick:function(){var e;null!==u&&void 0!==u&&null!==(e=u.value)&&void 0!==e&&e.trim()?u.value.length<=40?T("Please enter a valid key"):(T(""),i(u.value),m({accept:!1,value:""})):T("Please enter key")},children:"Save"})]})]}):Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)("p",{className:"no-key-text",children:"You have not added any key yet."}),Object(f.jsx)("button",{type:"button",className:"gpt-key-button",onClick:function(){m({accept:!0,value:""}),setTimeout((function(){null!==k&&void 0!==k&&k.current&&k.current.focus()}),100)},children:"Add New"})]})})})},Rd=function(e){var t=e.global,n=e.setTheme,a=e.setSideMenuType,c=e.saveGptKey,o=e.deleteGptKey,s=t.uiConfigs,i="dark"===(null===s||void 0===s?void 0:s.theme),r="dense"===(null===s||void 0===s?void 0:s.sideMenuType),l=function(e){e!==(null===s||void 0===s?void 0:s.theme)&&n(e)},d=function(e){e!==(null===s||void 0===s?void 0:s.sideMenuType)&&a(e)};return Object(f.jsxs)("div",{className:"settings-page",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Settings"}),Object(f.jsxs)("div",{className:"setting-block",children:[Object(f.jsx)("h3",{className:"setting-title",children:"Theme"}),Object(f.jsxs)("div",{className:"theme-settings",children:[Object(f.jsxs)("div",{role:"button",tabIndex:0,className:"theme-card light-theme ".concat(i?"":"theme-selected"),onClick:function(){return l("")},children:[Object(f.jsx)("p",{className:"theme-name",children:"Classic"}),Object(f.jsx)("div",{className:"theme-palette",children:Object(u.a)(new Array(4)).map((function(e,t){return Object(f.jsx)("div",{className:"color c".concat(t)},t)}))})]}),Object(f.jsxs)("div",{role:"button",tabIndex:0,className:"theme-card dark-theme ".concat(i?"theme-selected":""),onClick:function(){return l("dark")},children:[Object(f.jsx)("p",{className:"theme-name",children:"Dark"}),Object(f.jsx)("div",{className:"theme-palette",children:Object(u.a)(new Array(4)).map((function(e,t){return Object(f.jsx)("div",{className:"color c".concat(t)},t)}))})]})]})]}),Object(f.jsxs)("div",{className:"setting-block",children:[Object(f.jsx)("h3",{className:"setting-title",children:"App Navigation Type"}),Object(f.jsxs)("div",{className:"menuType-settings",children:[Object(f.jsxs)("div",{role:"button",tabIndex:0,className:"menuType ".concat(r?"":"menuType-selected"),onClick:function(){return d("expandable")},children:[Object(f.jsx)(Id.b,{className:"type-icon"}),Object(f.jsx)("p",{className:"menu-name",children:"Expandable"})]}),Object(f.jsxs)("div",{role:"button",tabIndex:0,className:"menuType ".concat(r?"menuType-selected":""),onClick:function(){return d("dense")},children:[Object(f.jsx)(Dd.a,{className:"type-icon"}),Object(f.jsx)("p",{className:"menu-name",children:"Dense"})]})]})]}),Object(f.jsxs)("div",{className:"setting-block",children:[Object(f.jsx)("h3",{className:"setting-title",children:"GPT-3 Key"}),Object(f.jsx)(Pd,{uiConfigs:s,saveGptKey:c,deleteGptKey:o})]})]})},Ld=Object(aa.b)((function(e){return{global:e.global}}),(function(e){return{setTheme:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){t(Dn("dark"!==e?{theme:""}:{theme:"dark"}))}}(t))},setSideMenuType:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){t(Dn("dense"!==e?{sideMenuType:"expandable"}:{sideMenuType:"dense"}))}}(t))},saveGptKey:function(t){return e(function(e){return null!==e&&void 0!==e&&e.trim()&&(null===e||void 0===e?void 0:e.length)>40?Dn({gptKey:e}):kn("Invalid key!","error")}(t))},deleteGptKey:function(){return e(Dn({gptKey:void 0}))}}}))(Rd),Ud="POPULATE_STORIES",Md="FETCH_STORIES",Bd="SEARCH_STORIES",Hd="UPDATE_STORIES_LIST",Gd="DELETE_STORY_IN_STATE",Vd="ADD_STORY_TO_LIST",zd="FETCH_FORMS",qd="POPULATE_FORMS",Wd="DELETE_FORM_IN_STATE",Kd=function(e){return{type:Ud,payload:e.data}},Yd=function(e){return function(t){t({type:Md}),t(d("".concat(j.server,"/api/bot/").concat(e,"/stories"),{success:Kd,error:wn}))}},Qd=function(e,t){return function(n){var a;n(kn(null===e||void 0===e?void 0:e.message,"success")),n((a=null===t||void 0===t?void 0:t.storyName,{type:Gd,payload:{storyName:a}}))}},Jd=function(e){return{type:qd,payload:e.data}},Zd=function(e){return function(t){t({type:zd}),t(d("".concat(j.server,"/api/bot/").concat(e,"/forms"),{success:Jd,error:wn}))}},Xd=function(e,t){return function(n){var a=t.formName;w("forms","deleteForm"),n(kn(e.message,"success")),n({type:Wd,payload:{formName:a}})}},$d=function(e){var t=e.name,n=e._id,a=e.template_type,c=e.botId,o=e.steps,s=e.handleDeleteStoryClick,i=e.type,r="FORM"!==i&&o.filter((function(e){return"FORM_ACTION"===e.type}));return Object(f.jsxs)("div",{className:"ui-storycard",children:[Object(f.jsxs)("div",{className:"uis-upper",children:[Object(f.jsxs)("div",{className:"icons-wrapper",children:[Object(f.jsx)("div",{className:"flow-icon-wrapper",children:Object(f.jsx)("img",{src:"/assets/images/flowIcon.svg",alt:"",className:"flow-icon"})}),Object(f.jsx)(ka.a,{title:"Delete Story",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(){return s(t,i)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]}),Object(f.jsx)("h4",{title:t,className:"text-overflow story-name",children:t}),Object(f.jsxs)("div",{className:"story-type-wrapper",children:[Object(f.jsx)("p",{className:"story-type",children:"RULE"===i||"FORM"===i?"RULE"===i?"Rule":"Form":"Q&A"===a?"Q&A":"Custom"}),r&&0!==r.length&&Object(f.jsx)(ka.a,{placement:"bottom",title:Object(f.jsxs)("span",{children:["Forms Included:",Object(f.jsx)("br",{})," ",Object(f.jsx)("b",{children:r.map((function(e){return e.name}))})]}),children:Object(f.jsxs)("div",{className:"form-tag",children:[Object(f.jsx)(qo.k,{className:"tag-icon"}),Object(f.jsx)("span",{className:"tag-text",children:"Form"})]})})]})]}),Object(f.jsxs)("div",{className:"uis-lower",children:[Object(f.jsxs)("p",{className:"update-details",children:["FORM"===i?"Questions:":"Interactions:"," ",Object(f.jsx)("span",{className:"update-date",children:o.length})]}),Object(f.jsx)(ra.a,{to:"FORM"===i?"/bot/".concat(c,"/form/").concat(n):"/bot/".concat(c,"/story/").concat(n),className:"story-link",children:"Edit"})]})]})};$d.defaultProps={_id:"",name:"",steps:[],template_type:"Custom"};var eu=$d,tu=n(173),nu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.forEach((function(t){var a;(null===(a=t.steps)||void 0===a?void 0:a.some((function(t){return t.name===e})))&&n.push({name:t.name,_id:t._id})})),n},au=function(e,t){return[{Header:"Story",accessor:function(e){return Object(f.jsx)("p",{className:"text-overflow",style:{margin:0,maxWidth:"250px"},title:e.name,children:e.name})}},{Header:"Type",accessor:function(e){return"RULE"===e.type?"Rule":"Q&A"===e.template_type?"Q&A":"Custom"}},{Header:"Interactions",accessor:function(e){var t=e.steps,n=null===t||void 0===t?void 0:t.filter((function(e){return"INTENT"===e.type})),a=null===t||void 0===t?void 0:t.filter((function(e){return"BOT"===e.type})),c=null===t||void 0===t?void 0:t.filter((function(e){return"HTTP_ACTION"===e.type})),o=null===t||void 0===t?void 0:t.filter((function(e){return"ACTION"===e.type}));return Object(f.jsxs)("div",{className:"interactions",children:[(null===n||void 0===n?void 0:n.length)>0&&Object(f.jsxs)("div",{className:"in-tag",children:[Object(f.jsx)("div",{className:"icon-wrapper",children:Object(f.jsx)(Vo.g,{className:"icon"})}),Object(f.jsxs)("p",{className:"count-text",children:[n.length," Intents"]})]}),(null===a||void 0===a?void 0:a.length)>0&&Object(f.jsxs)("div",{className:"in-tag",children:[Object(f.jsx)("div",{className:"icon-wrapper",children:Object(f.jsx)(Vo.c,{className:"icon"})}),Object(f.jsxs)("p",{className:"count-text",children:[a.length," Utterances"]})]}),((null===c||void 0===c?void 0:c.length)>0||(null===o||void 0===o?void 0:o.length)>0)&&Object(f.jsxs)("div",{className:"in-tag",children:[Object(f.jsx)("div",{className:"icon-wrapper",children:Object(f.jsx)(Vo.i,{className:"icon"})}),Object(f.jsxs)("p",{className:"count-text",children:[c.length+o.length," Actions"]})]})]})}},{Header:"Edit",accessor:"_id",Cell:function(n){var a=n.value,c=n.row,o="/bot/".concat(e,"/story/").concat(a);return Object(f.jsxs)("div",{className:"stories-list-actions",children:[Object(f.jsx)(ra.a,{className:"st-edit-link",to:o,children:"Edit"}),Object(f.jsx)(ka.a,{title:"Delete Story",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"delete-action",onClick:function(){var e,n;return t.handleDeleteStoryClick(null===(e=c.original)||void 0===e?void 0:e.name,null===(n=c.original)||void 0===n?void 0:n.type)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]})}}]},cu=function(e,t){return[{Header:"Form",accessor:function(e){return Object(f.jsx)("p",{className:"text-overflow",style:{margin:0,maxWidth:"250px"},title:e.name,children:e.name})}},{Header:"No. of Questions",accessor:function(e){var t=e.required_slots;return(null===t||void 0===t?void 0:t.length)||0}},{Header:"Containing Story",accessor:function(e){var n=t.storiesList,c=nu(e.name,n);return Object(f.jsx)("div",{className:"interactions",children:c.length>0&&Object(f.jsx)(ka.a,{placement:"bottom",title:Object(f.jsxs)("span",{children:["Included in:",Object(f.jsx)("br",{}),Object(f.jsx)("b",{children:c.map((function(e,t){return Object(f.jsxs)(a.Fragment,{children:[e.name,Object(f.jsx)("br",{})]},t)}))})]}),children:Object(f.jsxs)("span",{className:"containing-stories-text",children:[c.length," ",c.length>1?"Stories":"Story"]})})})}},{Header:"Edit",accessor:"_id",Cell:function(n){var a=n.value,c=n.row,o="/bot/".concat(e,"/form/").concat(a);return Object(f.jsxs)("div",{className:"forms-list-actions",children:[Object(f.jsx)(ra.a,{className:"fm-edit-link",to:o,children:"Edit"}),Object(f.jsx)(ka.a,{title:"Delete Story",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"delete-action",onClick:function(){var e;return t.handleDeleteFormClick(null===(e=c.original)||void 0===e?void 0:e.name)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]})}}]},ou=[{name:"Q&A",image:"type_qna",helpText:"Story with single user interaction and corresponding bot response.",type:"Q&A"},{name:"Rule",image:"type_rule",helpText:"Rule based story is short conversation that always follows the same path.",type:"CUSTOM_RULE"},{name:"Custom",image:"type_custom",helpText:"Build your custom story with multiple user and bot interactions.",descPlacement:"top-end",type:"CUSTOM"}],su=[{id:"Q&A",name:"Q&A"},{id:"RULE",name:"Rule"},{id:"CUSTOM",name:"Custom"}],iu=function(e){var t=e.fetchStories,n=e.stories,c=e.searchStories,o=e.auth,i=e.deleteStory,r=e.startTour,l=e.updateUIConfigs,d=e.global,m=e.bots,b=e.fetchForms,p=e.deleteForm,j=n.fetching,h=n.storiesList,O=n.searchedList,v=n.fetchingForms,g=n.formsList,x=n.searchedFormsList,y=m.botsFetched,N=m.botsList,S=d.uiConfigs,T=S.storiesListView,k=Object(a.useState)(""),C=Object(sa.a)(k,2),w=C[0],_=C[1],A=Object(a.useState)(!1),E=Object(sa.a)(A,2),F=E[0],D=E[1],P=Object(a.useState)([]),R=Object(sa.a)(P,2),L=R[0],U=R[1],M=Object(a.useState)(!1),B=Object(sa.a)(M,2),H=B[0],G=B[1],V=Object(a.useState)({id:"",mode:"",type:""}),z=Object(sa.a)(V,2),q=z[0],W=z[1],K=Object(a.useState)(!1),Y=Object(sa.a)(K,2),Q=Y[0],J=Y[1],Z=Object(a.useRef)(),X=Object(a.useRef)(),$=Object(a.useRef)(),ee=Object(_c.i)().params.botId,te=Object(a.useMemo)((function(){return w||0!==L.length?0!==L.length?(w?O:h).filter((function(e){return"RULE"===e.type?L.includes("RULE"):L.includes(e.template_type)})):O:h}),[h,O,w,L]),ne=Object(a.useMemo)((function(){return w?x:g}),[g,x,w]),ae=function(e,t){W({id:e,mode:"delete",type:t})},ce=function(){W({id:{},mode:"",type:""})},oe=function(e){"STORIES"!==e?$.current.scrollIntoView({behavior:"smooth"}):X.current.scrollIntoView({behavior:"smooth"})},se=function(e){var t=Object(sa.a)(e,1)[0];J(t.isIntersecting)},ie=function(){I.push("/bot/".concat(ee,"/form/NEW_FORM"))};return Object(a.useEffect)((function(){o.userData&&(t(ee),b(ee))}),[o.userData,ee]),Object(a.useEffect)((function(){y&&N.length>=1&&(null===S||void 0===S||!S.storiesTourDone)&&setTimeout((function(){return r("/bot/:botId")}),2e3)}),[y]),Object(a.useEffect)((function(){var e,t={root:Z.current,rootMargin:"0px",threshold:.1};return Z.current&&(e=new IntersectionObserver(se,t),$.current&&e.observe($.current)),function(){$.current&&e.unobserve($.current)}}),[$,Z]),Object(f.jsxs)("div",{className:"app-page stories-wrapper",children:[Object(f.jsxs)("div",{className:"stories-head",children:[Object(f.jsxs)("div",{className:"left-headings",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Conversations"}),Object(f.jsxs)("div",{className:"scroll-to-sections",children:[Object(f.jsx)("button",{type:"button",className:"".concat(Q&&te.length>14?"not-visible":""),onClick:function(){return oe("STORIES")},children:"STORIES"}),Object(f.jsx)("button",{type:"button",className:"".concat(Q?"":"not-visible"),onClick:function(){return oe("FORMS")},children:"FORMS"})]})]}),Object(f.jsxs)("div",{type:"button",className:"app-btn-icon",children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:Object(f.jsx)(da.d,{className:"btn-icon"})}),"Add New",Object(f.jsx)("div",{className:"sub-categories-wrapper",children:Object(f.jsxs)("div",{className:"sub-categories",children:[Object(f.jsxs)("button",{type:"button",className:"sub-list-btn",onClick:function(){return D(!0)},children:[Object(f.jsx)(tu.a,{className:"sl-icon icon-story"}),Object(f.jsx)("div",{className:"sl-name",children:"STORY"})]}),Object(f.jsxs)("button",{type:"button",className:"sub-list-btn",onClick:ie,children:[Object(f.jsx)(qo.j,{className:"sl-icon"}),Object(f.jsx)("div",{className:"sl-name",children:"FORM"})]})]})})]})]}),Object(f.jsxs)("div",{className:"search-and-view",children:[Object(f.jsx)("div",{className:"left-content",children:Object(f.jsx)(ti,{onSearch:function(e){c(e),_(e)},debounce:!1,placeholder:"Search Stories and Forms"})}),Object(f.jsxs)("div",{className:"grid-list-view",children:[Object(f.jsx)("button",{className:"switch-view list ".concat(T?"sv-select":""),onClick:function(){return l({storiesListView:!0})},type:"button",children:T?Object(f.jsx)(ua.r,{}):Object(f.jsx)(ua.s,{})}),Object(f.jsx)("button",{className:"switch-view card ".concat(T?"":"sv-select"),onClick:function(){return l({storiesListView:!1})},type:"button",children:T?Object(f.jsx)(vs.g,{}):Object(f.jsx)(vs.h,{})})]})]}),Object(f.jsxs)("div",{className:"conversations-content",ref:Z,id:"jride-conversations-list",children:[Object(f.jsxs)("div",{className:"stories-section",ref:X,children:[Object(f.jsxs)("div",{className:"convos-header",children:[Object(f.jsx)("h3",{className:"convos-subheading",children:"STORIES"}),Object(f.jsx)(ur.a,{onClickAway:function(){null!==L&&void 0!==L&&L.length||G(!1)},children:Object(f.jsxs)("div",{className:"tags-filter-wrapper",children:[Object(f.jsx)("button",{type:"button",className:"icon-button-clear filter-icon ".concat(null!==L&&void 0!==L&&L.length?"active-indicator":""),onClick:function(){return G(!H)},children:Object(f.jsx)(qo.b,{className:"ibc-icon"})}),H&&Object(f.jsx)("div",{className:"tags-filter-container",children:su.map((function(e){return Object(f.jsx)("div",{className:"tag ".concat(L.includes(e.id)?"tag-selected":""),role:"button",tabIndex:0,onClick:function(){return function(e){if(L.includes(e)){var t=L.filter((function(t){return t!==e}));U(t)}else U([].concat(Object(u.a)(L),[e]))}(e.id)},children:Object(f.jsx)("span",{children:e.name})},e.id)}))})]})})]}),j&&Object(f.jsx)(Mo,{text:"Fetching Stories..."}),!j&&(0!==h.length?Object(f.jsx)("div",{className:"stories-content",children:Object(f.jsxs)("div",{className:"stories-listing-wrapper",children:[T?Object(f.jsx)("div",{className:"stories-list-wrapper",children:Object(f.jsx)(mi,{tableData:te,columns:au(ee,{handleDeleteStoryClick:ae}),className:"stories-list-view"})}):Object(f.jsxs)(Ra.a,{container:!0,children:[te.map((function(e,t){return Object(f.jsx)(Ra.a,{item:!0,className:"story-grid-item",children:Object(f.jsx)(eu,Object(s.a)(Object(s.a)({},e),{},{botId:ee,handleDeleteStoryClick:ae}))},t)})),!w&&Object(f.jsx)(Ra.a,{item:!0,className:"story-grid-item",children:Object(f.jsxs)("div",{className:"add-convo-card",onClick:function(){return D(!0)},role:"button",tabIndex:"0",children:[Object(f.jsx)("div",{className:"add-convo-icon",children:Object(f.jsx)(bi.a,{})}),Object(f.jsx)("h3",{className:"add-title",children:"Add Story"}),Object(f.jsx)("p",{className:"add-text",children:"Create New Story"})]})})]}),w&&0===te.length&&Object(f.jsx)("p",{children:"No Stories Found"})]})}):Object(f.jsx)("p",{className:"noStories",children:"No stories found!"}))]}),Object(f.jsxs)("div",{className:"forms-section",ref:$,children:[Object(f.jsx)("h3",{className:"convos-subheading",children:"FORMS"}),v&&Object(f.jsx)(Mo,{text:"Fetching Forms..."}),!v&&(0!==g.length?Object(f.jsx)("div",{className:"forms-content",children:Object(f.jsxs)("div",{className:"forms-listing-wrapper",children:[T?Object(f.jsx)("div",{className:"forms-list-wrapper",children:Object(f.jsx)(mi,{tableData:ne,columns:cu(ee,{handleDeleteFormClick:function(e){return ae(e,"FORM")},storiesList:h}),className:"forms-list-view"})}):Object(f.jsxs)(Ra.a,{container:!0,children:[ne.map((function(e,t){return Object(f.jsx)(Ra.a,{item:!0,className:"form-grid-item",children:Object(f.jsx)(eu,{_id:e._id,name:e.name,botId:ee,steps:e.required_slots,type:"FORM",handleDeleteStoryClick:function(){return ae(e.name,"FORM")}})},t)})),!w&&Object(f.jsx)(Ra.a,{item:!0,className:"form-grid-item",children:Object(f.jsxs)("div",{className:"add-convo-card",onClick:ie,role:"button",tabIndex:0,children:[Object(f.jsx)("div",{className:"add-convo-icon",children:Object(f.jsx)(bi.a,{})}),Object(f.jsx)("h3",{className:"add-title",children:"Add Form"}),Object(f.jsx)("p",{className:"add-text",children:"Create New Form"})]})})]}),w&&0===ne.length&&Object(f.jsx)("p",{children:"No Forms Found"})]})}):Object(f.jsxs)("div",{className:"add-convo-card add-form-card",onClick:ie,role:"button",tabIndex:"0",children:[Object(f.jsx)("div",{className:"add-convo-icon",children:Object(f.jsx)(bi.a,{})}),Object(f.jsx)("h3",{className:"add-title",children:"Add Form"}),Object(f.jsx)("p",{className:"add-text",children:"Create New Form"})]}))]})]}),Object(f.jsxs)(Pa,{open:"delete"===q.mode,title:"Are you sure?",onClose:ce,onConfirm:function(){ce(),"FORM"!==q.type?i(ee,q.id,q.type):p(ee,q.id)},children:["This ","FORM"===q.type?"form":"story"," will be deleted permanently. Do you wish to proceed?"]}),Object(f.jsx)(Pa,{title:"Select Story Template",open:F,onClose:function(){return D(!1)},className:"templates-dialog",noDialogActions:!0,children:Object(f.jsx)("div",{className:"templates-list",children:ou.map((function(e){return Object(f.jsxs)("div",{className:"template-type",role:"button",tabIndex:0,onClick:function(){return t=e.type,void(["Q&A","CUSTOM","CUSTOM_RULE"].includes(t)&&I.push("/bot/".concat(ee,"/story/NEW_").concat(t)));var t},children:[Object(f.jsx)("img",{src:"/assets/images/".concat(e.image,".svg"),alt:e.name,className:"type-image"}),Object(f.jsx)("p",{className:"type-name",children:e.name}),Object(f.jsx)(ka.a,{title:e.helpText,placement:e.descPlacement||"top",children:Object(f.jsx)("div",{className:"template-help",children:Object(f.jsx)(da.r,{className:"help-icon"})})})]},e.name)}))})})]})},ru=Object(aa.b)((function(e){return{auth:e.auth,stories:e.stories,global:e.global,bots:e.bots}}),(function(e){return{fetchStories:function(t){return e(Yd(t))},searchStories:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){t({type:Bd,payload:e.toLowerCase()})}}(t))},demoFeature:function(){return e(_n())},deleteStory:function(t,n,a){e(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"STORY";return w("stories","deleteStory"),d("".concat(j.server,"/api/bot/").concat(e,"/stories/").concat(encodeURIComponent(t),"/").concat(n),{method:"DELETE",callbackParams:{storyName:t},success:Qd,error:wn})}(t,n,a))},startTour:function(t){return e(Ln(t))},updateUIConfigs:function(t){return e(Dn(t,{showMsg:!1}))},fetchForms:function(t){return e(Zd(t))},deleteForm:function(t,n){return e(function(e,t){return d("".concat(j.server,"/api/bot/").concat(e,"/forms"),{args:{data:t},method:"DELETE",callbackParams:{formName:t},success:Xd,error:wn})}(t,n))}}}))(iu),lu="SET_STORY_LOADER",du="UNSET_STORY_LOADER",uu="LOAD_STORY_SUCCESS",mu="LOAD_STORY_FAIL",bu="UPDATE_STORY",pu="UPDATE_FLOW_STATE",ju="CLEAR_STORY_DATA",hu="UPDATE_STORY_DATA_STATE",fu="RESET_STORY_DATA",Ou="SET_OPEN_PICKERS",vu="FETCH_PANEL_DATA",gu="POPULATE_PANEL_DATA",xu="CLEAR_PANEL_DATA",yu="ADD_PANEL_DATA",Nu="TOGGLE_NODE_ACTIONS_POPUP",Su="TOGGLE_EDITING_NODE_ID",Tu="POPULATE_GENERATED_PHRASES",ku="UPDATE_PANEL_ELEMENT",Cu="DELETE_PANEL_ELEMENT",wu="ADD_UPDATE_HTTP_ACTION_IN_STORY_EDITOR",_u="DELETE_HTTP_ACTION_IN_STORY_EDITOR",Au="TOGGLE_NEW_HTTP_ACTION_FORM_IN_STORY_EDITOR",Eu="ADD_UPDATE_EMAIL_ACTION_IN_STORY_EDITOR",Fu="DELETE_EMAIL_ACTION_IN_STORY_EDITOR",Iu="TOGGLE_NEW_EMAIL_ACTION_FORM_IN_STORY_EDITOR",Du="ADD_UPDATE_GOOGLE_ACTION_IN_STORY_EDITOR",Pu="DELETE_GOOGLE_ACTION_IN_STORY_EDITOR",Ru="TOGGLE_NEW_GOOGLE_ACTION_FORM_IN_STORY_EDITOR",Lu="ADD_UPDATE_RESET_ACTION_IN_STORY_EDITOR",Uu="DELETE_RESET_ACTION_IN_STORY_EDITOR",Mu="TOGGLE_NEW_RESET_SLOT_FORM_IN_STORY_EDITOR",Bu="FETCH_DOCKS_DATA",Hu="POPULATE_DOCKS_DATA",Gu="CLEAR_DOCKS_DATA",Vu="ADD_DOCKS_DATA",zu="UPDATE_DOCKS_ELEMENT",qu="DELETE_DOCKS_ELEMENT",Wu=function(e){return function(t){if(t({type:du}),Array.isArray(e.message)&&0!==e.message.length&&"string"===typeof e.message[0].msg)return t(wn({message:e.message[0].msg}));t(wn(e))}},Ku=function(e){return{type:uu,payload:e.data}},Yu=function(e,t,n){return function(a){if(t.includes("NEW")){var c=t.includes("RULE"),o=(t=t.replace("_RULE","")).replace("NEW_","");a(Ku({data:{_id:t,type:c?"RULE":"STORY",name:"Untitled",steps:"Q&A"===o?[{name:"",type:"INTENT"},{name:"",type:"BOT"}]:[],template_type:o}}))}else{a({type:lu});var s,i=n.find((function(e){return e._id===t}));if(!i)return I.push("/bot/".concat(e)),void a((s={message:"Story doesn't exist"},function(e){e({type:mu}),e(wn(s))}));a(Ku({data:i}))}}},Qu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=Object(u.a)(e.steps);switch(t.type){case"intents":t.type="INTENT";break;case"utterances":t.type="BOT";break;case"api_actions":t.type="HTTP_ACTION";break;case"reset_slots":t.type="SLOT_SET_ACTION";break;case"email_action":t.type="EMAIL_ACTION";break;case"forms":t.type="FORM_ACTION";break;case"google_action":t.type="GOOGLE_SEARCH_ACTION"}if(0===a.length&&"INTENT"!==t.type)return wn({message:"First step must be an intent!"});if("RULE"===e.type&&"INTENT"===t.type){var c=a.some((function(e){return"INTENT"===e.type}));if(c)return wn({message:"Rule can have only one intent"})}return"INTENT"===t.type&&0!==a.length&&0!==n&&(-1===n&&"INTENT"===a[a.length-1].type||-1!==n&&"INTENT"===a[n-1].type)?wn({message:"Intent should not be followed by an another intent"}):(-1===n?a.push(t):a.splice(n,1,t),{type:pu,payload:{steps:a}})},Ju=function(e,t){return function(e){w("stories","updateStory");var n=t.story;e({type:bu,payload:{story:n}}),e(function(e){return{type:Hd,payload:{story:e}}}(n))}},Zu=function(e,t,n){return function(a){w("stories","addStory");var c=t.story,o=Object(s.a)(Object(s.a)({},c),{},{_id:e.data._id});a({type:bu,payload:{story:o}}),a(function(e){return{type:Vd,payload:{story:e}}}(o)),I.replace("/bot/".concat(n,"/story/").concat(e.data._id))}},Xu=function(e){var t=["INTENT","BOT","HTTP_ACTION","ACTION","SLOT_SET_ACTION","EMAIL_ACTION","FORM_ACTION","GOOGLE_SEARCH_ACTION"],n=e.steps.filter((function(e){return t.includes(e.type)}));return Object(s.a)(Object(s.a)({},e),{},{steps:n})},$u=function(e,t){return function(n){var a=Object(u.a)(e.steps);a.splice(t,1),n({type:pu,payload:{steps:a}})}},em=function(){return{type:xu}},tm=function(e){return{type:gu,payload:null===e||void 0===e?void 0:e.data}},nm=function(e,t,n){return function(a){a({type:vu,payload:{componentType:n,itemName:t}}),a(vt(e,t,{onSuccess:tm,onError:wn}))}},am=function(e,t,n){return function(a){a({type:vu,payload:{componentType:n,itemName:t}}),a(gt(e,t,{onSuccess:tm,onError:wn}))}},cm=function(e,t,n){return function(a){a({type:vu,payload:{componentType:n,itemName:t}}),a(Rt(e,t,{onSuccess:tm,onError:wn})),a(dt(e))}},om=function(e,t,n){return function(a){a({type:vu,payload:{componentType:n,itemName:t}}),a(ht(e,{onSuccess:function(){return qt(0,t,{onSuccess:tm,onError:wn})}})),a(dt(e))}},sm=function(e,t,n){return function(e,a){e({type:vu,payload:{componentType:n,itemName:t}});var c=a().storyComponents.emailActions.find((function(e){return t===e.action_name}));e(tm({data:c}))}},im=function(e,t,n){return function(e,a){e({type:vu,payload:{componentType:n,itemName:t}});var c=a().storyComponents.googleActions.find((function(e){return t===e.name}));e(tm({data:c}))}},rm=function(){return{type:Tu,payload:[]}},lm=function(e,t){return function(n){for(var a,c=[],o="",s=t.storyTypeData,i=0;i<e.data.length;i++)null!==e.data[i]._id?(c.push({_id:e.data[i]._id,text:e.data[i].text}),""===o&&(o=e.data[i].message)):o="Some of the ".concat(e.data[i].message);var r=o.includes("Some of the")?"error":"success",l=1===(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.length)?o.replace("Some of the ",""):o;n(kn(l,r)),n(rm()),n(s?{type:Vu,payload:{dockType:s.dockType,data:c}}:{type:yu,payload:c})}},dm=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.storyTypeData;if(!t)return rm();var o=Array.isArray(t)?t:[t];return yt(e,o,n,{onSuccess:lm,onError:wn,callbackParams:{storyTypeData:c}})},um=function(e,t){return function(n){var a=e.data._id,c=t.responseText,o=t.storyTypeData,s=[{_id:a,value:{text:c}}];n(kn(e.message,"success")),n(o?{type:Vu,payload:{dockType:o.dockType,data:s}}:{type:yu,payload:s})}},mm=function(e){var t;return{type:Tu,payload:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.paraphrases)||[]}},bm=function(e,t){return xt(e,t,{onSuccess:mm,onError:wn})},pm=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.storyTypeData;return Nt(e,t,n,{onSuccess:um,onError:wn,callbackParams:{storyTypeData:c}})},jm=function(e,t){return function(n){var a=t.data,c=t.storyTypeData,o={_id:a.id};a.intent?o.text=a.text:o.value={text:a.text},n(kn(e.message,"success")),n(c?{type:zu,payload:{dockType:c.dockType,data:o}}:{type:ku,payload:o})}},hm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.storyTypeData;return St(e,t,{onSuccess:jm,onError:wn,callbackParams:{storyTypeData:a}})},fm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.storyTypeData;return kt(e,t,{onSuccess:jm,onError:wn,callbackParams:{storyTypeData:a}})},Om=function(e,t){return function(n){var a=t.id,c=t.storyTypeData;n(kn(e.message,"success")),n(c?{type:qu,payload:{id:a,dockType:c.dockType}}:{type:Cu,payload:{id:a}})}},vm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.storyTypeData;return Tt(e,t,{onSuccess:Om,onError:wn,callbackParams:{storyTypeData:a}})},gm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.storyTypeData;return Ct(e,t,{onSuccess:Om,onError:wn,callbackParams:{storyTypeData:a}})},xm=function(e){return{type:Ou,payload:e}},ym=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={intent:t.selectedIntent,action_name:t.actionName,response:t.response,http_url:t.httpURL,request_method:t.requestMethod,auth_token:t.authToken,params_list:t.parameters};return{type:wu,payload:{data:n,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(rt(n))}},Nm=function(e,t,n){return function(t){t(kn(null===e||void 0===e?void 0:e.message,"success")),t(rt(n)),t(function(e){return{type:_u,payload:{message:null===e||void 0===e?void 0:e.message}}}(e))}},Sm=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e){return{type:Eu,payload:{data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(Ue(n))}},Tm=function(e,t,n){return function(t){t(kn(null===e||void 0===e?void 0:e.message,"success")),t(Ue(n)),t(function(e){return{type:Fu,payload:{message:null===e||void 0===e?void 0:e.message}}}(e))}},km=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e){return{type:Du,payload:{data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(qe(n))}},Cm=function(e,t,n){return function(t){t(kn(null===e||void 0===e?void 0:e.message,"success")),t(qe(n)),t(function(e){return{type:Pu,payload:{message:null===e||void 0===e?void 0:e.message}}}(e))}},wm=function(e,t){var n=t.dockType;return{type:Hu,payload:{data:null===e||void 0===e?void 0:e.data,dockType:n}}},_m=function(e){return function(t){t(mt(e))}},Am=function(e,t,n){return function(a){a(kn(null===e||void 0===e?void 0:e.message,"success")),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={name:t.name,slot:t.slot,type:t.type,value:t.value};return{type:Lu,payload:{data:n,message:null===e||void 0===e?void 0:e.message}}}(e,t)),a(ht(n))}},Em=function(e,t,n){return function(t){t(kn(null===e||void 0===e?void 0:e.message,"success")),t(ht(n)),t({type:Uu}),t(em())}},Fm=function(e){var t=e.fetching,n=e.displayData,c=e.selectedItemName,o=e.addResponse,s=e.demoFeature,i=e.updateResponse,r=e.deleteResponse,l=e.rows,d=Object(a.useState)([]),m=Object(sa.a)(d,2),b=m[0],p=m[1],j=Object(a.useState)(""),h=Object(sa.a)(j,2),v=h[0],x=h[1],y=Object(a.useState)(!1),N=Object(sa.a)(y,2),S=N[0],T=N[1],k=Object(a.useState)({_id:"",mode:""}),C=Object(sa.a)(k,2),w=C[0],_=C[1],A=Object(a.useRef)(),E=Object(_c.i)().params.botId;Object(a.useEffect)((function(){p([])}),[t,n]);var F=function(){x(""),_({_id:"",mode:""}),A.current&&A.current.blur()};return Object(f.jsxs)("div",{className:"responses-wrapper",children:[Object(f.jsx)("div",{className:"header-onselect ".concat(0!==b.length?"header-open":""),children:Object(f.jsx)("div",{className:"header-content",children:Object(f.jsx)(Ia.a,{variant:"contained",size:"small",className:"delete-button",disableElevation:!0,onClick:s,children:"Delete"})})}),t&&Object(f.jsxs)("div",{className:"skeleton-wrapper",children:[Object(f.jsx)(Ml.a,{height:"".concat(37*l,"px")}),Object(u.a)(new Array(4)).map((function(e,t){return Object(f.jsxs)("div",{className:"checkbox-skeleton",children:[Object(f.jsx)(Ml.a,{width:"18px",height:"30px",style:{marginRight:"10px"}}),Object(f.jsx)(Ml.a,{height:"30px",width:"auto",style:{flexGrow:"1"}})]},t)}))]}),!t&&Object(f.jsxs)("div",{className:"content-wrapper",children:[Object(f.jsx)(nc.a,{value:v,onChange:function(e){return x(e.target.value)},multiline:!0,variant:"outlined",size:"small",fullWidth:!0,minRows:l,maxRows:l,placeholder:"edit"===w.mode?"Edit response":"Enter new response",id:"responseText",name:"responseText",className:"input-field",onKeyDown:function(e){if(27!==e.keyCode||"edit"!==w.mode){if(13===e.keyCode&&e.shiftKey){if(e.preventDefault(),x(""),!v.trim())return;if("edit"===w.mode)return i(E,{id:w._id,utterance:c,text:v}),void F();o(E,v,c)}}else F()},inputRef:A}),Object(f.jsxs)("div",{className:"info-data",children:[Object(f.jsx)("p",{className:"helper-text",children:"Press Shift + Enter to save".concat("edit"===w.mode?", Esc to cancel":"")}),Object(f.jsxs)("button",{className:"insert-link",type:"button",onClick:function(){return T(!0)},children:[Object(f.jsx)($s.e,{className:"link-icon"}),Object(f.jsx)("span",{className:"link-text",children:"Add Link"})]})]}),0!==n.length?Object(f.jsx)("div",{className:"list-wrapper",children:n.map((function(e,t){var n,a;return!(w._id===e._id&&"edit"===w.mode)&&Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:b.includes(e._id),onChange:function(){return function(e){if(b.includes(e)){var t=b.filter((function(t){return t!==e}));p(t)}else p([].concat(Object(u.a)(b),[e]))}(e._id)},name:e._id,icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),color:"primary",size:"medium",className:"list-checkbox"}),classes:{label:"list-label",root:"list-item"},label:Object(f.jsxs)("div",{className:"list-content-wrapper",children:[Object(f.jsxs)("div",{className:"list-content",children:[Object(f.jsx)("p",{className:"list-text",children:O(g(null===(n=e.value)||void 0===n?void 0:n.text))}),(null===(a=e.value)||void 0===a?void 0:a.image)&&Object(f.jsx)("img",{src:e.value.image,alt:"",className:"image-response"})]}),Object(f.jsxs)("div",{className:"list-actions",children:[Object(f.jsx)(ka.a,{title:"Edit",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear edit-action",onClick:function(){return function(e){var t;x(null===(t=e.value)||void 0===t?void 0:t.text),_({mode:"edit",_id:e._id}),A.current&&A.current.focus()}(e)},children:Object(f.jsx)(da.v,{className:"ibc-icon"})})}),Object(f.jsx)(ka.a,{title:"Delete",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(){return function(e){_({mode:"delete",_id:e._id})}(e)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]})]})},e._id)}))}):Object(f.jsx)("p",{className:"notfound-text",children:"No responses found!"})]}),Object(f.jsx)(Pa,{open:S,title:"Add link",onClose:function(){return T(!1)},noDialogActions:!0,children:Object(f.jsx)(wc,{form:"ADD_URL",onSubmit:function(e){var t=e.link,n=e.linkText;if(T(!1),t.trim()&&n.trim()){var a="".concat(v,' <a target="_blank" href="').concat(t,'">').concat(n,"</a>");x(a.trim())}},submitButton:Object(f.jsx)(Ia.a,{type:"submit",color:"primary",className:"ff-form-button",children:"Save"}),secondaryButton:Object(f.jsx)(Ia.a,{onClick:function(){return T(!1)},className:"ff-form-button",children:"Cancel"})})}),Object(f.jsx)(Pa,{open:"delete"===w.mode,title:"Are you sure?",onClose:F,onConfirm:function(){r(E,w._id),F()},children:"The response will be deleted permanently. Do you wish to proceed?"})]})};Fm.defaultProps={displayData:[],rows:3};var Im=Fm,Dm=n(351),Pm=n(336),Rm=n(279),Lm=function(e){var t=e.open,n=e.onClose,c=e.addSelectedPhrases,o=e.generatedPhrases,s=e.useGpt,i=e.handleGptToggleSwitch,r=e.gptKey,l=e.clearGeneratedData,d=Object(a.useState)([]),m=Object(sa.a)(d,2),b=m[0],p=m[1];Object(a.useEffect)((function(){p([])}),[o]);return Object(f.jsxs)(_a.a,{open:t,onClose:n,fullWidth:!0,className:"augment-dialog",children:[Object(f.jsx)(Aa.a,{children:Object(f.jsxs)("div",{className:"augment-dialog-header",children:[Object(f.jsx)("span",{children:"Question Augmentation"}),Object(f.jsx)(ka.a,{title:Object(f.jsx)(a.Fragment,{children:r?s?Object(f.jsx)("span",{children:"Turn off to augment phrases using Pegasus"}):Object(f.jsx)("span",{children:"Turn on to augment phrases using GPT-3"}):Object(f.jsxs)("span",{children:["You can augment phrases using GPT-3. To add GPT-3 API Key, navigate to"," ",Object(f.jsx)(ra.a,{to:"/settings",className:"augment-settings-url",onClick:function(){l()},children:"settings"})," ","page."]})}),interactive:!r,placement:"bottom-end",children:Object(f.jsxs)("div",{className:"switch-button",children:[Object(f.jsx)($a.a,{checked:s,onChange:i,name:"toggle-switch",id:"toggle-switch",inputProps:{"aria-label":"GPT Swtich"},color:"primary",disabled:!r}),Object(f.jsx)("label",{htmlFor:"toggle-switch",className:"toggle-label",children:"Use GPT"})]})})]})}),Object(f.jsx)(Ea.a,{children:Object(f.jsx)("div",{className:"augmentation-list-view",children:0===o.length?Object(f.jsx)("div",{className:"skeleton-wrapper",children:Object(u.a)(new Array(5)).map((function(e,t){return Object(f.jsxs)("div",{className:"checkbox-skeleton",children:[Object(f.jsx)(Ml.a,{width:"18px",height:"30px",style:{marginRight:"10px"}}),Object(f.jsx)(Ml.a,{height:"30px",width:"auto",style:{flexGrow:"1"}})]},t)}))}):Object(f.jsxs)("div",{className:"list-wrapper",children:[Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:b.length===o.length,indeterminate:0!==b.length&&b.length!==o.length,onChange:function(){b.length?p([]):p(Object(u.a)(o))},name:"Check All",icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),indeterminateIcon:Object(f.jsx)(da.s,{}),color:"primary",size:"medium",className:"list-checkbox"}),label:Object(f.jsx)("p",{className:"list-text",children:"Select All"}),className:"list-head"}),o.map((function(e,t){return Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:b.includes(e),onChange:function(){return function(e){if(b.includes(e)){var t=b.filter((function(t){return t!==e}));p(t)}else p([].concat(Object(u.a)(b),[e]))}(e)},name:"".concat(t),icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),color:"primary",size:"medium",className:"list-checkbox"}),label:Object(f.jsx)("p",{className:"list-text",children:O(v(e))})},t)}))]})})}),Object(f.jsxs)(Fa.a,{children:[Object(f.jsx)(Ia.a,{onClick:n,color:"secondary",children:"Cancel"}),Object(f.jsx)(Ia.a,{onClick:function(){return c(b)},color:"primary",autoFocus:!0,children:"Proceed"})]})]})},Um=function(e){var t,n,c,o=e.fetching,s=e.displayData,i=e.addTrainingPhrase,r=e.selectedItemName,l=e.generateTrainingData,d=e.generatedPhrases,m=e.setSnackbar,b=e.demoFeature,p=e.updateTrainingPhrase,j=e.deleteTrainingPhrase,h=e.rows,g=e.entities,x=e.fetchEntities,y=e.uiConfigs.gptKey,N=Object(a.useState)([]),S=Object(sa.a)(N,2),T=S[0],k=S[1],C=Object(a.useState)(""),w=Object(sa.a)(C,2),_=w[0],A=w[1],E=Object(a.useState)(!1),F=Object(sa.a)(E,2),I=F[0],D=F[1],P=Object(a.useState)(""),R=Object(sa.a)(P,2),L=R[0],U=R[1],M=Object(a.useState)(!1),B=Object(sa.a)(M,2),H=B[0],G=B[1],V=Object(a.useState)({_id:"",mode:""}),z=Object(sa.a)(V,2),q=z[0],W=z[1],K=Object(a.useState)({name:"",value:""}),Y=Object(sa.a)(K,2),Q=Y[0],J=Y[1],Z=Object(a.useState)(!1),X=Object(sa.a)(Z,2),$=X[0],ee=X[1],te=Object(a.useRef)(),ne=Object(_c.i)().params.botId;Object(a.useEffect)((function(){k([])}),[o,s]),Object(a.useEffect)((function(){x(ne)}),[s]),Object(a.useEffect)((function(){ee(!(!y||localStorage.getItem("noGptUse")))}),[y]);var ae=function(){A(""),W({_id:"",mode:""}),te.current&&te.current.blur()},ce=function(){i()},oe=function(e){var t=[];s.forEach((function(e){T.includes(e._id)&&t.push(e.text)})),e?l(t,y):l(t)},se=function(e){var t,n;if((null===te||void 0===te||null===(t=te.current)||void 0===t?void 0:t.selectionStart)!==(null===te||void 0===te||null===(n=te.current)||void 0===n?void 0:n.selectionEnd)){var a,c,o,s,i=null===te||void 0===te||null===(a=te.current)||void 0===a?void 0:a.selectionStart,r=null===te||void 0===te||null===(c=te.current)||void 0===c?void 0:c.selectionEnd,l=null===te||void 0===te||null===(o=te.current)||void 0===o?void 0:o.value,d=null===l||void 0===l||null===(s=l.substring(i,r))||void 0===s?void 0:s.trim();U(d)}else U("")},ie=function(e){var t;"string"===typeof e?J({value:Q.value,name:e}):J({value:Q.value,name:null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value})},re=[];return null!==Q&&void 0!==Q&&null!==(t=Q.name)&&void 0!==t&&t.trim()&&(re=g.filter((function(e){var t,n,a,c,o,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===Q||void 0===Q||null===(n=Q.name)||void 0===n||null===(a=n.trim())||void 0===a?void 0:a.toLowerCase()))&&(null===(c=e.name)||void 0===c?void 0:c.toLowerCase())!==(null===Q||void 0===Q||null===(o=Q.name)||void 0===o||null===(s=o.trim())||void 0===s?void 0:s.toLowerCase())}))),Object(f.jsxs)("div",{className:"training-phrases-wrapper",children:[Object(f.jsx)("div",{className:"header-onselect ".concat(0!==T.length?"header-open":""),children:Object(f.jsxs)("div",{className:"header-content",children:[Object(f.jsx)(Ia.a,{variant:"contained",size:"small",onClick:function(){return 0===s.length?m("Add at least one training phrase","info"):0===T.length?m("Select at least one training phrase","info"):T.length>5?m("Select a maximum of five phrases","info"):(D(!0),void oe($))},disableElevation:!0,children:"Generate Training Phrases"}),Object(f.jsx)(Ia.a,{variant:"contained",size:"small",className:"delete-button",disableElevation:!0,onClick:b,children:"Delete"})]})}),o&&Object(f.jsxs)("div",{className:"skeleton-wrapper",children:[Object(f.jsx)(Ml.a,{height:"".concat(37*h,"px")}),Object(u.a)(new Array(4)).map((function(e,t){return Object(f.jsxs)("div",{className:"checkbox-skeleton",children:[Object(f.jsx)(Ml.a,{width:"18px",height:"30px",style:{marginRight:"10px"}}),Object(f.jsx)(Ml.a,{height:"30px",width:"auto",style:{flexGrow:"1"}})]},t)}))]}),!o&&Object(f.jsxs)("div",{className:"content-wrapper",children:[Object(f.jsx)(ur.a,{onClickAway:function(){U("")},children:Object(f.jsx)(nc.a,{value:_,onChange:function(e){return A(e.target.value)},multiline:!0,variant:"outlined",size:"small",fullWidth:!0,minRows:h,maxRows:h,placeholder:"edit"===q.mode?"Edit phrase":"Enter new training phrase",id:"trainingPhrase",name:"trainingPhrase",className:"input-field",onKeyDown:function(e){if(27!==e.keyCode||"edit"!==q.mode){if(13===e.keyCode&&e.shiftKey){if(e.preventDefault(),A(""),!_.trim())return;if(x(ne),"edit"===q.mode)return p(ne,{id:q._id,intent:r,text:_}),void ae();i(ne,_,r)}}else ae()},inputRef:te,onMouseUp:se,onKeyUp:se})}),Object(f.jsxs)("div",{className:"info-data",children:[Object(f.jsx)("p",{className:"helper-text",children:"Press Shift + Enter to save".concat("edit"===q.mode?", Esc to cancel":"")}),Object(f.jsxs)("p",{className:"entity-helper-text",children:[0===L.length&&Object(f.jsxs)("button",{className:"insert-link",type:"button",onClick:function(){return G(!0)},children:[Object(f.jsx)(da.o,{className:"link-icon"}),Object(f.jsx)("span",{className:"link-text",children:"Add Entity"})]}),L.length>0&&Object(f.jsxs)("button",{title:"Add entity for ".concat(L),className:"add-entity-button",type:"button",onClick:function(){J({value:L})},children:["Add entity for '",L,"'"]})]})]}),0!==s.length?Object(f.jsx)("div",{className:"list-wrapper",children:s.map((function(e,t){return!(q._id===e._id&&"edit"===q.mode)&&Object(f.jsx)(Ba.a,{control:Object(f.jsx)(Ha.a,{checked:T.includes(e._id),onChange:function(){return function(e){if(T.includes(e)){var t=T.filter((function(t){return t!==e}));k(t)}else k([].concat(Object(u.a)(T),[e]))}(e._id)},name:e._id,icon:Object(f.jsx)(da.h,{}),checkedIcon:Object(f.jsx)(da.g,{}),color:"primary",size:"medium",className:"list-checkbox"}),classes:{label:"list-label",root:"list-item"},label:Object(f.jsxs)("div",{className:"list-content-wrapper",children:[Object(f.jsx)("p",{className:"list-text",children:O(v(e.text))}),Object(f.jsxs)("div",{className:"list-actions",children:[Object(f.jsx)(ka.a,{title:"Edit",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear edit-action",onClick:function(){return function(e){A(e.text),W({mode:"edit",_id:e._id}),te.current&&te.current.focus()}(e)},children:Object(f.jsx)(da.v,{className:"ibc-icon"})})}),Object(f.jsx)(ka.a,{title:"Delete",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(){return function(e){W({mode:"delete",_id:e._id})}(e)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})]})]})},e._id)}))}):Object(f.jsx)("p",{className:"notfound-text",children:"No training phrases found!"})]}),Object(f.jsx)(Lm,{open:I,onClose:function(){D(!1),setTimeout(ce,500)},addSelectedPhrases:function(e){D(!1),null!==e&&void 0!==e&&e.length?i(ne,e,r):setTimeout(ce,500)},generatedPhrases:d,useGpt:$,handleGptToggleSwitch:function(e,t){y&&(ee(t),oe(t),ce(),t?localStorage.removeItem("noGptUse"):localStorage.setItem("noGptUse",!0))},gptKey:y,clearGeneratedData:ce}),Object(f.jsx)(Pa,{open:"delete"===q.mode,title:"Are you sure?",onClose:ae,onConfirm:function(){j(ne,q._id),ae()},children:"The training phrase will be deleted permanently. Do you wish to proceed?"}),Object(f.jsxs)(Pa,{open:Q.value.length>0||H,title:"Select Entity Name",onClose:function(){G(!1),J({name:"",value:""})},onConfirm:function(){var e,t,n,a=_||"";if((null===(e=Q.name)||void 0===e?void 0:e.length)>0&&(null===(t=Q.value)||void 0===t?void 0:t.length)>0){var c,o;try{o=new RegExp("\\b".concat(Q.value,"\\b"),"gi")}catch(i){console.log(null===i||void 0===i?void 0:i.message)}o=Q.value,a=null===(c=a)||void 0===c?void 0:c.replaceAll(o,"[".concat(Q.value,"](").concat(Q.name,")")),A(a),J({name:"",value:""}),G(!1)}else if((null===(n=Q.name)||void 0===n?void 0:n.length)>0){var s;a="".concat(a," [entity_value](").concat(Q.name,")"),A(a),null===te||void 0===te||null===(s=te.current)||void 0===s||s.focus(),J({name:"",value:""}),G(!1)}},className:"entity-selection",size:"small",children:[Object(f.jsxs)(Dm.a,{children:["Entities are structured pieces of information that can be extracted from a user's message. Click"," ",Object(f.jsx)("a",{target:"_blank",href:"https://rasa.com/docs/rasa/training-data-format#entities",rel:"noreferrer",children:"here"})," ","for more info."]}),Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)(nc.a,{onChange:ie,name:"entity-name",variant:"outlined",placeholder:"Entity name",error:0===(null===Q||void 0===Q||null===(n=Q.name)||void 0===n?void 0:n.length),value:(null===Q||void 0===Q?void 0:Q.name)||""}),(null===(c=re)||void 0===c?void 0:c.length)>0&&Object(f.jsx)("div",{className:"search-results-container",children:Object(f.jsx)(Pm.a,{children:re.map((function(e,t){return Object(f.jsx)(Rm.a,{dense:!0,button:!0,onClick:function(t){ie(null===e||void 0===e?void 0:e.name)},children:Object(f.jsx)("p",{style:{margin:"4px",color:"#000000"},children:e.name})},e.name+t)}))})})]})]})]})};Um.defaultProps={displayData:[],entities:[],rows:3,fetchEntities:function(){}};var Mm=Um,Bm=function(e){var t=e.id,n=e.loadDocksData,c=e.data,o=function(e){var t=e.id,n=e.storyState,a=e.data.name,c=e.demoFeature,o=e.setSnackbar,s=e.generateTrainingData,i=e.addTrainingPhrase,r=e.addResponse,l=e.updateTrainingPhrase,d=e.updateResponse,u=e.deleteTrainingPhrase,m=e.deleteResponse,b=e.componentState,p=e.fetchEntities,j=e.uiConfigs,h=n.docksData,f=n.generatedPhrases,O=h.trainingPhrases,v=h.responses,g=b.entities,x={storyTypeData:{dockType:t}};switch(t){case"trainingPhrases":return{Component:Mm,componentProps:{displayData:O.data,fetching:O.fetching,selectedItemName:a,addTrainingPhrase:function(e,t,n){i(e,t,n,x)},generateTrainingData:s,generatedPhrases:f,demoFeature:c,setSnackbar:o,updateTrainingPhrase:function(e,t){l(e,t,x)},deleteTrainingPhrase:function(e,t){u(e,t,x)},fetchEntities:p,entities:g,uiConfigs:j},title:"Training Phrases"};case"responses":return{Component:Im,componentProps:{displayData:v.data,fetching:v.fetching,selectedItemName:a,addResponse:function(e,t,n){r(e,t,n,x)},demoFeature:c,updateResponse:function(e,t){d(e,t,x)},deleteResponse:function(e,t){m(e,t,x)}},title:"Responses"};default:return{Component:function(){return""},componentProps:{},title:""}}}(e),i=o.Component,r=o.componentProps,l=o.title,d=Object(_c.i)().params.botId;return Object(a.useEffect)((function(){n(d,{dockType:t,itemName:c.name})}),[c.name]),Object(f.jsxs)("div",{className:"docks-wrapper nowheel",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsxs)("div",{className:"title-wrapper",children:[Object(f.jsx)($s.d,{className:"icon"}),Object(f.jsx)("h3",{className:"title",children:l})]})}),Object(f.jsx)(oa.a,{theme:js(),children:Object(f.jsx)(i,Object(s.a)(Object(s.a)({},r),{},{rows:2}))}),Object(f.jsx)("div",{className:"dock-footer",children:Object(f.jsx)(ua.t,{className:"drag-icon"})})]})},Hm=Object(aa.b)((function(e){return{storyState:e.story,componentState:e.storyComponents,uiConfigs:e.global.uiConfigs}}),(function(e){return{addTrainingPhrase:function(t,n,a,c){return e(dm(t,n,a,c))},addResponse:function(t,n,a,c){return e(pm(t,n,a,c))},updateTrainingPhrase:function(t,n,a){return e(hm(t,n,a))},updateResponse:function(t,n,a){return e(fm(t,n,a))},deleteTrainingPhrase:function(t,n,a){return e(vm(t,n,a))},deleteResponse:function(t,n,a){return e(gm(t,n,a))},loadDocksData:function(t,n){return e(function(e,t){return function(n){var a=t.dockType,c=t.itemName;switch(n({type:Bu,payload:{dockType:a}}),a){case"trainingPhrases":n(vt(e,c,{onSuccess:wm,onError:wn,callbackParams:{dockType:a}}));break;case"responses":n(gt(e,c,{onSuccess:wm,onError:wn,callbackParams:{dockType:a}}))}}}(t,n))},generateTrainingData:function(t,n){return e(bm(t,n))},demoFeature:function(){return e(_n())},setSnackbar:function(t,n){return e(kn(t,n))},fetchEntities:function(t){e(_m(t))}}}))(Bm),Gm=function(e){var t=e.id,n=e.data,c=e.storyState,o=e.updateFlowState,s=e.deleteStoryNode,i=c.storyData,r=Object(a.useState)(0),l=Object(sa.a)(r,2),d=l[0],m=l[1],b=Object(a.useState)(""),p=Object(sa.a)(b,2),j=p[0],h=p[1],O=Object(a.useState)(""),v=Object(sa.a)(O,2),g=v[0],x=v[1],y=Object(_c.i)().params.botId,N=function(e,t){var n=e.componentState,a=e.fetchIntents,c=e.fetchAllResponses,o=e.fetchHTTPActions,s=e.fetchSlots,i=e.fetchSlotSetActions,r=e.fetchEmailActions,l=e.fetchGoogleActions,d=e.storiesState,u=e.fetchForms,m=n.intents,b=n.utterances,p=n.httpActions,j=n.slotsSetActions,h=n.emailActions,f=n.googleActions;switch(t){case"INTENT":return{icon:Vo.g,list:m,levelOneFetched:n.intentsFetched,loadLevelOne:function(e){return a(e)}};case"BOT":return{icon:Vo.c,list:b,levelOneFetched:n.utterancesFetched,loadLevelOne:function(e){return c(e)}};case"HTTP_ACTION":return{icon:Vo.i,list:p,levelOneFetched:n.httpActionsFetched,loadLevelOne:function(e){o(e),s(e)},name_propertyName:"action_name"};case"SLOT_SET_ACTION":return{icon:Vo.a,list:j,levelOneFetched:n.slotsSetActionsFetched,loadLevelOne:function(e){i(e),s(e)}};case"EMAIL_ACTION":return{icon:Vo.i,list:h,levelOneFetched:n.emailActionsFetched,loadLevelOne:function(e){r(e)},name_propertyName:"action_name"};case"GOOGLE_SEARCH_ACTION":return{icon:Vo.e,list:f,levelOneFetched:n.googleActionsFetched,loadLevelOne:function(e){l(e)}};case"FORM_ACTION":return{icon:Vo.j,list:d.formsList,levelOneFetched:!0,loadLevelOne:function(e){u(e)}};default:return{icon:function(){return""},list:[],levelOneFetched:!1,loadLevelOne:function(){}}}}(e,j),S=N.icon,T=N.list,k=N.levelOneFetched,C=N.loadLevelOne,w=N.name_propertyName,_=void 0===w?"name":w,A=Object(a.useMemo)((function(){return g.trim()?T.filter((function(e){var t,n;return null===(t=e[_])||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===g||void 0===g?void 0:g.toLowerCase())})):T}),[g,T]);Object(a.useEffect)((function(){1!==d||k&&"FORM_ACTION"!==j||C(y)}),[d]);var E=function(e,t){0===e?(m(1),h(t)):o(i,{type:j,name:t},n.nodeIndex)};return Object(f.jsxs)("div",{className:"ed-node-wrapper ed-create-node",children:[Object(f.jsx)(Rl.d,{id:"target-".concat(t),type:"target",position:"top",className:"ed-target-handle"}),Object(f.jsx)(ur.a,{onClickAway:function(){s(i,n.nodeIndex)},children:Object(f.jsxs)("div",{className:"ed-node nodrag",children:[0===d&&Object(f.jsxs)(a.Fragment,{children:["INTENT"!==n.prevNodeType&&Object(f.jsx)("div",{className:"ed-icon-wrapper",title:"Intent",role:"button",tabIndex:0,onClick:function(){return E(0,"INTENT")},children:Object(f.jsx)(Vo.g,{className:"ed-icon"})}),Object(f.jsx)("div",{className:"ed-icon-wrapper",title:"Utterance",role:"button",tabIndex:0,onClick:function(){return E(0,"BOT")},children:Object(f.jsx)(Vo.c,{className:"ed-icon"})}),Object(f.jsx)("div",{className:"ed-icon-wrapper",title:"HTTP Action",role:"button",tabIndex:0,onClick:function(){return E(0,"HTTP_ACTION")},children:Object(f.jsx)(Vo.i,{className:"ed-icon"})}),Object(f.jsx)("div",{className:"ed-icon-wrapper",title:"Email Action",role:"button",tabIndex:0,onClick:function(){return E(0,"EMAIL_ACTION")},children:Object(f.jsx)(Vo.i,{className:"ed-icon"})}),Object(f.jsx)("div",{className:"ed-icon-wrapper",title:"Google Search Action",role:"button",tabIndex:0,onClick:function(){return E(0,"GOOGLE_SEARCH_ACTION")},children:Object(f.jsx)(Vo.e,{className:"ed-icon"})}),Object(f.jsx)("div",{className:"ed-icon-wrapper",title:"Reset Slot",role:"button",tabIndex:0,onClick:function(){return E(0,"SLOT_SET_ACTION")},children:Object(f.jsx)(Vo.a,{className:"ed-icon"})}),Object(f.jsx)("div",{className:"ed-icon-wrapper",title:"Form",role:"button",tabIndex:0,onClick:function(){return E(0,"FORM_ACTION")},children:Object(f.jsx)(Vo.j,{className:"ed-icon"})})]}),1===d&&Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)("div",{className:"ed-icon-wrapper",children:Object(f.jsx)(S,{className:"ed-icon"})}),Object(f.jsxs)("div",{className:"app-popup select-dropdown nodrag nowheel",children:[k&&Object(f.jsx)(ti,{debounce:!1,className:"popup-search",onSearch:x}),Object(f.jsx)("div",{className:"select-items-wrapper",children:k?A.map((function(e,t){return Object(f.jsx)("div",{className:"select-item ".concat(n.label===e[_]?"item-selected":""),role:"button",tabIndex:0,onClick:function(){return E(1,e[_])},title:e[_],children:e[_]},t)})):Object(f.jsx)(a.Fragment,{children:Object(u.a)(new Array(3).fill(0)).map((function(e,t){return Object(f.jsx)(Ml.a,{height:28,variant:"rect",classes:{root:"select-skeleton"}},t)}))})})]})]})]})}),Object(f.jsx)(Rl.d,{id:"source-".concat(t),type:"source",position:"bottom",className:"ed-source-handle"})]})},Vm=Object(aa.b)((function(e){return{storyState:e.story,componentState:e.storyComponents,storiesState:e.stories}}),(function(e){return{updateFlowState:function(t,n,a){e(Qu(t,n,a))},deleteStoryNode:function(t,n){return e($u(t,n))},fetchIntents:function(t){return e(et(t))},fetchAllResponses:function(t){return e(st(t))},fetchHTTPActions:function(t){e(rt(t))},fetchEmailActions:function(t){e(Ue(t))},fetchGoogleActions:function(t){e(qe(t))},fetchSlots:function(t){e(dt(t))},fetchSlotSetActions:function(t){e(ht(t))},fetchForms:function(t){e(Zd(t))}}}))(Gm),zm=function(e){var t=e.id,n=e.data,c=e.selected,o=e.storyState,s=e.type,i=e.toggleNodeActionsPopup,r=e.deleteStoryNode,l=e.updateFlowState,d=e.insertNewNodeUI,m=e.toggleEditingMode,b=e.addComponentItemAndSelect,p=function(e){var t=e.type,n=e.loadTrainingExamples,a=e.loadResponses,c=e.clearPanelData,o=e.loadHTTPAction,s=e.loadEmailAction,i=e.loadGoogleAction,r=e.loadSlotSetAction,l=e.componentState,d=e.fetchIntents,u=e.fetchAllResponses,m=e.fetchHTTPActions,b=e.fetchCustomActions,p=e.fetchSlotSetActions,j=e.fetchSlots,h=e.fetchEmailActions,f=e.fetchGoogleActions,O=e.storiesState,v=e.fetchForms,g=l.intents,x=l.utterances,y=l.httpActions,N=l.customActions,S=l.slotsSetActions,T=l.emailActions,k=l.googleActions;switch(t){case"INTENT":return{icon:Vo.g,text:"Intent",loadData:n,list:g,loadLevelOne:function(e){return d(e)},levelOneFetched:l.intentsFetched,type:"picker_intents"};case"BOT":return{icon:Vo.c,text:"Utterance",loadData:a,list:x,loadLevelOne:function(e){return u(e)},levelOneFetched:l.utterancesFetched,type:"picker_utterances"};case"HTTP_ACTION":return{icon:Vo.i,text:"HTTP Action",loadData:o,list:y,loadLevelOne:function(e){m(e),j(e)},levelOneFetched:l.httpActionsFetched,name_propertyName:"action_name",type:"picker_api_actions"};case"ACTION":return{icon:Vo.b,text:"Action",loadData:c,list:N,loadLevelOne:function(e){return b(e)},levelOneFetched:l.customActionsFetched,type:"picker_actions"};case"SLOT_SET_ACTION":return{icon:Vo.a,text:"Reset Slot",loadData:r,list:S,loadLevelOne:function(e){p(e),j(e)},levelOneFetched:l.slotsSetActionsFetched,type:"picker_reset_slots"};case"EMAIL_ACTION":return{icon:Vo.i,text:"Email Action",loadData:s,list:T,loadLevelOne:function(e){h(e)},levelOneFetched:l.emailActionsFetched,name_propertyName:"action_name",type:"picker_email_action"};case"FORM_ACTION":return{icon:Vo.j,text:"Form",loadData:c,list:O.formsList,loadLevelOne:function(e){v(e)},levelOneFetched:!0,type:"picker_forms"};case"GOOGLE_SEARCH_ACTION":return{icon:Vo.e,text:"Google Search Action",loadData:i,list:k,loadLevelOne:function(e){f(e)},levelOneFetched:l.googleActionsFetched,type:"picker_google_action"};default:return{}}}(e),j=p.icon,h=p.text,O=p.loadData,v=p.list,g=p.loadLevelOne,x=p.levelOneFetched,y=p.type,N=p.name_propertyName,S=void 0===N?"name":N,T=o.storyData,k=o.nodeActionsPopupId,C=o.editingNodeId,w="Q&A"===T.template_type,_=k===t,A=C===t,E=Object(_c.i)().params,F=Object(a.useRef)(!0),I=E.botId,D=Object(a.useState)(""),P=Object(sa.a)(D,2),R=P[0],L=P[1];Object(a.useEffect)((function(){["EMAIL_ACTION","FORM_ACTION","GOOGLE_SEARCH_ACTION"].includes(s)&&g(I)}),[]),Object(a.useEffect)((function(){F.current?F.current=!1:c&&O(I,n.label,y)}),[c]);var U=Object(a.useMemo)((function(){return R.trim()?v.filter((function(e){var t,n;return null===(t=e[S])||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===R||void 0===R?void 0:R.toLowerCase())})):v}),[R,v]);Object(a.useEffect)((function(){A&&!x&&g(I)}),[A]);var M=function(){i(_?"":t)},B=function(){A||L(""),m(A?"":t)};return Object(f.jsxs)("div",{className:"ed-node-wrapper ".concat(w?"qna-node":""),children:[Object(f.jsx)(Rl.d,{id:"target-".concat(t),type:"target",position:"top",className:"ed-target-handle"}),Object(f.jsxs)("div",{className:"ed-node ".concat(c?"ed-node-selected":""),children:[Object(f.jsx)("div",{className:"ed-icon-wrapper",children:Object(f.jsx)(j,{className:"ed-icon"})}),Object(f.jsxs)("div",{className:"ed-data-wrapper",children:[w?Object(f.jsx)("div",{className:"label-wrapper",role:"button",tabIndex:0,onClick:B,children:Object(f.jsxs)("p",{className:"ed-label",children:[n.label||Object(f.jsxs)("span",{className:"ed-placeholder",children:["Select ",h]}),Object(f.jsx)(da.e,{className:"edit-arrow"})]})}):Object(f.jsx)("p",{className:"ed-label",children:n.label}),Object(f.jsx)("p",{className:"ed-type",children:h})]}),A&&Object(f.jsx)(ur.a,{onClickAway:B,children:Object(f.jsxs)("div",{className:"app-popup select-dropdown nodrag nowheel",children:[x&&Object(f.jsx)(ka.a,{title:"".concat(w?"Press Shift + Enter to add new":""),disableHoverListener:!0,placement:"top",children:Object(f.jsx)("div",{children:Object(f.jsx)(ti,{debounce:!1,className:"popup-search",onSearch:L,onKeyDown:function(e){w&&13===e.keyCode&&e.shiftKey&&b(I,{dataName:R,storyData:T},s)},placeholder:"".concat(w?"Search or Add":"Search...")})})}),Object(f.jsx)("div",{className:"select-items-wrapper",children:x?U.map((function(e,t){return Object(f.jsx)("div",{className:"select-item ".concat(n.label===e[S]?"item-selected":""),role:"button",tabIndex:0,onClick:function(){return t=e[S],void l(T,{type:s,name:t},n.nodeIndex);var t},title:e[S],children:e[S]},t)})):Object(f.jsx)(a.Fragment,{children:Object(u.a)(new Array(3).fill(0)).map((function(e,t){return Object(f.jsx)(Ml.a,{height:28,variant:"rect",classes:{root:"select-skeleton"}},t)}))})})]})})]}),Object(f.jsx)(Rl.d,{id:"source-".concat(t),type:"source",position:"bottom",className:"ed-source-handle"}),Object(f.jsxs)("div",{className:"node-actions-wrapper nodrag ".concat(_?"actions-popup-active":""," ").concat(A?"node-editmode":""),children:[Object(f.jsx)("button",{type:"button",className:"icon-button-clear node-actions",onClick:M,children:_?Object(f.jsx)(ua.f,{className:"ibc-icon"}):Object(f.jsx)(ua.t,{className:"ibc-icon"})}),_&&Object(f.jsx)(ur.a,{onClickAway:M,children:Object(f.jsxs)("div",{className:"app-popup node-actions-popup",children:[Object(f.jsx)("div",{className:"node-action-button",role:"button",tabIndex:0,onClick:function(){d(T,n.nodeIndex+1)},title:"Add Node Below",children:Object(f.jsx)(da.c,{className:"icon",color:"#2f45c5"})}),Object(f.jsx)("div",{className:"node-action-button",role:"button",tabIndex:0,onClick:B,title:"Edit ".concat(h),children:Object(f.jsx)(da.l,{className:"icon",color:"#2f45c5"})}),0!==n.nodeIndex&&Object(f.jsx)("div",{className:"node-action-button",role:"button",tabIndex:0,onClick:function(){r(T,n.nodeIndex)},title:"Delete",children:Object(f.jsx)(da.k,{className:"icon",color:"#dc3545"})})]})})]})]})},qm=Object(aa.b)((function(e){return{storyState:e.story,componentState:e.storyComponents,storiesState:e.stories}}),(function(e){return{loadTrainingExamples:function(t,n,a){e(nm(t,n,a))},loadResponses:function(t,n,a){return e(am(t,n,a))},loadHTTPAction:function(t,n,a){return e(cm(t,n,a))},loadSlotSetAction:function(t,n,a){return e(om(t,n,a))},loadEmailAction:function(t,n,a){return e(sm(0,n,a))},loadGoogleAction:function(t,n,a){return e(im(0,n,a))},clearPanelData:function(){return e(em())},toggleNodeActionsPopup:function(t){return e(function(){return{type:Nu,payload:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}(t))},deleteStoryNode:function(t,n){return e($u(t,n))},updateFlowState:function(t,n,a){e(Qu(t,n,a))},insertNewNodeUI:function(t,n){e(function(e,t){var n=Object(u.a)(e.steps),a=n.findIndex((function(e){return"NEW_NODE"===e.type})),c=n.filter((function(e){return"NEW_NODE"!==e.type}));return-1!==a&&a<t&&(t-=1),c.splice(t,0,{type:"NEW_NODE"}),{type:pu,payload:{steps:c}}}(t,n))},toggleEditingMode:function(t){return e(function(){return{type:Su,payload:{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}(t))},fetchIntents:function(t){return e(et(t))},fetchAllResponses:function(t){return e(st(t))},fetchHTTPActions:function(t){e(rt(t))},fetchSlotSetActions:function(t){e(ht(t))},fetchSlots:function(t){e(dt(t))},addComponentItemAndSelect:function(t,n,a){e(function(e,t,n){return function(a){var c;if(null!==(c=t.dataName)&&void 0!==c&&c.match(/^\w+$/))switch(a(Sn()),n){case"INTENT":null!==t&&void 0!==t&&t.dataName?a(tt(e,t.dataName,{onSuccess:function(n,a){return function(a){a(tn(n,0,e)),a(Qu(t.storyData,{type:"INTENT",name:t.dataName},0))}},onError:wn})):a(kn("Intent Name cannot be empty or blank spaces","error"));break;case"BOT":if(null!==t&&void 0!==t&&t.dataName){var o=t.dataName.replace("utter_","");o="utter_".concat(o),a(at(e,o,{onSuccess:function(n,a){return function(a){a(nn(n,0,e)),a(Qu(t.storyData,{type:"BOT",name:o},1))}},onError:wn}))}else a(kn("Intent Name cannot be empty or blank spaces","error"));break;default:a(Tn())}else a(kn("Name cannot have special characters other than _","error"))}}(t,n,a))},fetchCustomActions:function(t){e(pt(t))},fetchEmailActions:function(t){e(Ue(t))},fetchGoogleActions:function(t){e(qe(t))},fetchForms:function(t){e(Zd(t))}}}))(zm),Wm=function(e){var t=e.id,n=e.storyState,c=e.clearPanelData,o=e.updateFlowState,s=e.addComponentItems,i=e.toggleNewHTTPActionForm,r=e.toggleNewEmailActionForm,l=e.toggleNewGoogleActionForm,d=e.toggleNewResetActionForm,m=e.setOpenPickers,b=n.selectedPickerItemName,p=n.selectedPickerItemType,j=n.storyData,h=n.showNewHTTPActionForm,O=n.showNewEmailActionForm,v=n.showNewSlotsResetForm,g=n.openPickers,x=n.showNewGoogleActionForm,y=Object(_c.i)().params.botId,N=function(e){var t=e.id,n=e.componentsState,a=e.fetchIntents,c=e.fetchAllResponses,o=e.loadResponses,s=e.loadHTTPAction,i=e.loadSlotSetAction,r=e.loadTrainingExamples,l=e.loadEmailAction,d=e.loadGoogleAction,u=e.fetchHTTPActions,m=e.fetchSlots,b=e.fetchSlotSetActions,p=e.fetchEmailActions,j=e.fetchGoogleActions,h=e.fetchForms,f=e.storiesState,O=n.intents,v=n.utterances,g=n.httpActions,x=n.slotsSetActions,y=n.emailActions,N=n.googleActions;switch(t){case"picker_intents":return{list:O,loadData:function(e){return a(e)},fetched:n.intentsFetched,onClick:r};case"picker_utterances":return{list:v,loadData:function(e){return c(e)},fetched:n.utterancesFetched,onClick:o};case"picker_api_actions":return{list:g,loadData:function(e){u(e),m(e)},fetched:n.httpActionsFetched,onClick:s,name_propertyName:"action_name"};case"picker_reset_slots":return{list:x,loadData:function(e){b(e),m(e)},fetched:n.slotsSetActionsFetched,onClick:i};case"picker_email_action":return{list:y,loadData:function(e){p(e)},fetched:n.emailActionsFetched,onClick:l,name_propertyName:"action_name"};case"picker_forms":return{list:f.formsList,loadData:function(e){h(e)},fetched:!0,onClick:function(){}};case"picker_google_action":return{list:N,loadData:function(e){j(e)},fetched:n.googleActionsFetched,onClick:d};default:return{}}}(e),S=N.list,T=N.loadData,k=N.fetched,C=N.onClick,w=N.name_propertyName,_=void 0===w?"name":w,A=Qm.find((function(e){return e.id===t})),E=A.icon,F=A.name,I=Object(a.useState)(""),D=Object(sa.a)(I,2),P=D[0],R=D[1],L=Object(a.useRef)(null),U={picker_intents:"intent",picker_utterances:"utterance",picker_api_actions:"action",picker_reset_slots:"reset_slots",picker_email_action:"email_action",picker_google_action:"google_action"},M=Object(a.useMemo)((function(){return P.trim()?S.filter((function(e){var t,n;return null===(t=e[_])||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===P||void 0===P?void 0:P.toLowerCase())})):S}),[P,S]);Object(a.useEffect)((function(){k&&"picker_forms"!==t||T(y)}),[]);var B=function(e){e!==b?C(y,e,t):c()};return Object(f.jsxs)("div",{className:"node-picker-wrapper nowheel",children:[Object(f.jsx)("button",{type:"button",title:"Minimize",className:"icon-button-clear close-picker",onClick:function(){if(g){var e=g.filter((function(e){return e!==t}));m(e)}},children:Object(f.jsx)(da.i,{className:"ibc-icon"})}),Object(f.jsxs)("div",{className:"picker-heading",children:[Object(f.jsxs)("div",{className:"picker-title",children:[Object(f.jsx)(E,{className:"icon"}),Object(f.jsx)("h3",{className:"title",children:F})]}),Object(f.jsx)("p",{className:"sub-text",children:"Click on + icon to add."})]}),Object(f.jsxs)("div",{className:"picker-list",children:[k&&"picker_forms"!==t&&Object(f.jsxs)("div",{role:"button",tabIndex:0,className:"list-node add-button",onClick:function(e){switch(e.stopPropagation(),U[t]){case"intent":case"utterance":L.current.focus();break;case"action":"INPUT"===e.target.tagName||h?e.stopPropagation():i(!h);break;case"reset_slots":"INPUT"===e.target.tagName||v?e.stopPropagation():d(!v);break;case"email_action":"INPUT"===e.target.tagName||O?e.stopPropagation():r(!O);break;case"google_action":"INPUT"===e.target.tagName||x?e.stopPropagation():l(!x)}},children:[Object(f.jsx)(ka.a,{disableHoverListener:!0,title:"Press shift + enter to add, esc to cancel",placement:"top",children:Object(f.jsx)("input",{ref:L,placeholder:"Search or add",className:"text",value:P,onChange:function(e){R(e.target.value)},onKeyDown:function(e){var n;(n=e).shiftKey&&13===n.which?("action"!==U[t]||h?"reset_slots"!==U[t]||v?"email_action"!==U[t]||O?"google_action"!==U[t]||x?P.trim().length>0&&s(y,{dataName:P.trim()},U[t]):l(!x):r(!O):d(!v):i(!h),R("")):27===n.which&&(R(""),L.current.blur())}})}),Object(f.jsx)("div",{className:"icon-wrapper",children:Object(f.jsx)(da.c,{className:"icon"})})]}),k?M.map((function(e,n){return Object(f.jsxs)("div",{role:"button",tabIndex:0,onClick:function(){return B(e[_])},className:"list-node ".concat(p===t&&b===e[_]?"list-node-selected":""),children:[Object(f.jsx)("p",{className:"text text-overflow",children:e[_]}),Object(f.jsx)(ka.a,{title:"Add to story",placement:"top",children:Object(f.jsx)("div",{className:"icon-wrapper",role:"button",tabIndex:0,onClick:function(n){return function(e,n){e.stopPropagation();var a={name:n[_],type:t.replace("picker_","")};o(j,a)}(n,e)},children:Object(f.jsx)(da.c,{className:"icon"})})})]},n)})):Object(f.jsx)(a.Fragment,{children:Object(u.a)(new Array(5).fill(0)).map((function(e,t){return Object(f.jsx)(Ml.a,{height:32,variant:"rect",classes:{root:"picker-skeleton"}},t)}))})]}),Object(f.jsx)("div",{className:"picker-footer",children:Object(f.jsx)(ua.t,{className:"drag-icon"})})]})},Km=Object(aa.b)((function(e){return{componentsState:e.storyComponents,storyState:e.story,storiesState:e.stories}}),(function(e){return{fetchIntents:function(t){return e(et(t))},fetchAllResponses:function(t){return e(st(t))},loadTrainingExamples:function(t,n,a){return e(nm(t,n,a))},loadResponses:function(t,n,a){return e(am(t,n,a))},loadHTTPAction:function(t,n,a){return e(cm(t,n,a))},loadEmailAction:function(t,n,a){return e(sm(0,n,a))},loadGoogleAction:function(t,n,a){return e(im(0,n,a))},loadSlotSetAction:function(t,n,a){return e(om(t,n,a))},clearPanelData:function(){return e(em())},setOpenPickers:function(t){return e(xm(t))},demoFeature:function(){return e(_n())},fetchHTTPActions:function(t){e(rt(t))},fetchSlots:function(t){e(dt(t))},fetchSlotSetActions:function(t){e(ht(t))},fetchEmailActions:function(t){e(Ue(t))},fetchGoogleActions:function(t){e(qe(t))},updateFlowState:function(t,n,a){e(Qu(t,n,a))},addComponentItems:function(t,n,a){e(an(t,n,a))},toggleNewHTTPActionForm:function(t){e(function(e){return{type:Au,payload:{showFlag:e}}}(t))},toggleNewEmailActionForm:function(t){e(function(e){return{type:Iu,payload:{showFlag:e}}}(t))},toggleNewGoogleActionForm:function(t){e(function(e){return{type:Ru,payload:{showFlag:e}}}(t))},toggleNewResetActionForm:function(t){e(function(e){return{type:Mu,payload:{showFlag:e}}}(t))},fetchForms:function(t){e(Zd(t))}}}))(Wm),Ym={style:{stroke:"#FD6491",strokeWidth:2}},Qm=[{icon:Vo.g,name:"Intents",id:"picker_intents"},{icon:Vo.c,name:"Utterances",id:"picker_utterances"},{icon:Vo.i,name:"API Actions",id:"picker_api_actions"},{icon:Vo.i,name:"Email Actions",id:"picker_email_action"},{icon:Vo.e,name:"Google Actions",id:"picker_google_action"},{icon:Vo.a,name:"Reset Slots",id:"picker_reset_slots"},{icon:Vo.j,name:"Forms",id:"picker_forms"}],Jm={INTENT:qm,BOT:qm,HTTP_ACTION:qm,ACTION:qm,SLOT_SET_ACTION:qm,EMAIL_ACTION:qm,FORM_ACTION:qm,GOOGLE_SEARCH_ACTION:qm,NODE_PICKER:Km,NEW_NODE:Vm,LEVEL_TWO_DOCK:Hm},Zm=function(e){return e.map((function(e){return function(e){var t={id:e,type:"NODE_PICKER",data:{id:e},connectable:!1};switch(e){case"picker_intents":return Object(s.a)(Object(s.a)({},t),{},{position:{x:50,y:30}});case"picker_utterances":return Object(s.a)(Object(s.a)({},t),{},{position:{x:700,y:36}});case"picker_api_actions":case"picker_email_action":case"picker_google_action":return Object(s.a)(Object(s.a)({},t),{},{position:{x:50,y:360}});case"picker_reset_slots":case"picker_forms":return Object(s.a)(Object(s.a)({},t),{},{position:{x:700,y:360}});default:return{}}}(e)}))},Xm=function(e){var t=e.story,n=e.clearDocksData,c=e.setFullScreen,o=e.fullScreen,i=t.storyData,r=Object(a.useState)([]),l=Object(sa.a)(r,2),d=l[0],m=l[1];Object(a.useEffect)((function(){return function(){n()}}),[]),Object(a.useEffect)((function(){if(i){var e=i.steps;if(!e||2!==e.length)return void m([]);var t=function(e){var t=e.map((function(e,t){return{id:"node_".concat(Date.now()).concat(t),type:e.type,data:{label:e.name,nodeIndex:t},position:{x:275,y:200*t+180},selectable:!1}})),n=Object(s.a)({id:"edge_".concat(Date.now(),"0"),source:t[0].id,target:t[1].id},Ym);return t.push(n),t}(e),n=function(e){if(2!==e.length)return[];var t=[],n={type:"LEVEL_TWO_DOCK",connectable:!1};return e[0].name&&t.push(Object(s.a)(Object(s.a)({},n),{},{id:"trainingPhrases",data:Object(s.a)({},e[0]),position:{x:650,y:36}})),e[1].name&&t.push(Object(s.a)(Object(s.a)({},n),{},{id:"responses",data:Object(s.a)({},e[1]),position:{x:650,y:330}})),t}(e);m([].concat(Object(u.a)(t),Object(u.a)(n)))}}),[i]);return Object(f.jsx)("div",{className:"editor-wrapper",children:Object(f.jsxs)(Rl.e,{nodeTypes:Jm,elements:d,className:"editor qna-editor ".concat(o?"editor-fullscreen":""),arrowHeadColor:"#fd6491",markerEndId:"react-flow__arrowclosed",selectNodesOnDrag:!1,children:[Object(f.jsx)(Rl.c,{showFitView:!1,children:Object(f.jsx)(Rl.b,{onClick:function(){c(!o)},children:o?Object(f.jsx)(da.q,{className:"control-icon"}):Object(f.jsx)(da.p,{className:"control-icon"})})}),Object(f.jsx)(Rl.a,{variant:"dots",size:1.5,color:"var(--editor1)"})]})})},$m=Object(aa.b)((function(e,t){return{story:e.story,setFullScreen:t.setFullScreen,fullScreen:t.fullScreen}}),(function(e){return{clearDocksData:function(){return e({type:Gu})}}}))(Xm),eb=function(e,t){return{fields:[{component:"textfield",name:"action_name",label:"Name*",placeholder:"Name",readOnly:t,validate:[{type:"required"}],grid:{xs:12,sm:12,md:12,lg:12,xl:12}},{component:"textfield",name:"smtp_url",label:"SMTP URL*",placeholder:"smtp.server_address.com",validate:[{type:"required"}],grid:{xs:12,sm:12,md:12,lg:12,xl:12}},{component:"textfield",name:"smtp_port",label:"SMTP Port*",placeholder:"0",type:"number",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"subject",label:"Subject*",placeholder:"Subject",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"smtp_userid",label:"SMTP Userid",placeholder:"Userid",validate:[],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"smtp_password",label:"SMTP Password",placeholder:"******",validate:[],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"from_email",label:"From Email*",placeholder:"john.doe@example.com",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"to_email",label:"To Email*",placeholder:"john.doe@example.com",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"switch",name:"tls",label:"TLS",validate:[],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textarea",name:"response",label:"Response*",placeholder:"Response",validate:[{type:"required"}],grid:{xs:12,sm:12,md:12,lg:12,xl:12}}]}},tb=function(e){var t,n=e.emailAction,c=e.addUpdateEmailAction,o=e.deleteEmailAction,s=Object(a.useState)({instance:{},mode:""}),i=Object(sa.a)(s,2),r=i[0],l=i[1],d=(null===n||void 0===n||null===(t=n.action_name)||void 0===t?void 0:t.length)>0,u=Object(_c.i)().params.botId,m=Object(a.useReducer)(Nc,n),b=Object(sa.a)(m,2),p=b[0],j=b[1];Object(a.useEffect)((function(){Array.isArray(n)?j({type:"FORM_RESET"}):(j({type:"FORM_RESET"}),j({type:"FORM_SET_DATA",payload:n}))}),[n]);var h=function(){l({instance:{},mode:""})};return Object(f.jsxs)("div",{className:"emailActionForm-wrapper",children:[Object(f.jsx)(wc,{schema:eb(0,d),onSubmit:function(e){var t={};"undefined"===typeof e.tls&&(e.tls=!1),t.emailAction=e,t.method=d?"PUT":"POST",c(u,t)},customReducer:[p,j],submitButtonLabel:d?"Update":"Save",secondaryButton:d?Object(f.jsx)("button",{className:"ff-btn-theme deleteButton",type:"button",onClick:function(e,t){e.stopPropagation(),l({mode:"delete"})},children:"Delete"}):""}),Object(f.jsx)(Pa,{open:"delete"===r.mode,title:"Are you sure?",onClose:h,onConfirm:function(){d&&o(u,null===n||void 0===n?void 0:n.action_name),h()},children:"The email action will be deleted permanently. Do you wish to proceed?"})]})};tb.defaultProps={emailAction:{},addUpdateEmailAction:function(){},deleteEmailAction:function(){}};var nb=tb,ab=function(e,t){return{fields:[{component:"textfield",name:"name",label:"Name*",placeholder:"Name",readOnly:t,validate:[{type:"required"}],grid:{xs:12,sm:12,md:12,lg:12,xl:12}},{component:"textfield",name:"api_key",label:"API Key*",placeholder:"API Key",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"search_engine_id",label:"Search Engine ID*",placeholder:"Enter ID",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"failure_response",label:"Failure Response",placeholder:"E.g. I have failed to process your request.",validate:[],grid:{xs:6,sm:6,md:6,lg:6,xl:6}}]}},cb=function(e){var t,n=e.googleAction,c=e.addUpdateGoogleAction,o=e.deleteGoogleAction,s=Object(a.useState)({instance:{},mode:""}),i=Object(sa.a)(s,2),r=i[0],l=i[1],d=(null===n||void 0===n||null===(t=n.name)||void 0===t?void 0:t.length)>0,u=Object(_c.i)().params.botId,m=Object(a.useReducer)(Nc,n),b=Object(sa.a)(m,2),p=b[0],j=b[1];Object(a.useEffect)((function(){Array.isArray(n)?j({type:"FORM_RESET"}):(j({type:"FORM_RESET"}),j({type:"FORM_SET_DATA",payload:n}))}),[n]);var h=function(){l({instance:{},mode:""})};return Object(f.jsxs)("div",{className:"googleActionForm-wrapper",children:[Object(f.jsx)(wc,{schema:ab(0,d),onSubmit:function(e){var t={};t.googleAction=e,t.method=d?"PUT":"POST",c(u,t)},customReducer:[p,j],submitButtonLabel:d?"Update":"Save",secondaryButton:d?Object(f.jsx)("button",{className:"ff-btn-theme deleteButton",type:"button",onClick:function(e,t){e.stopPropagation(),l({mode:"delete"})},children:"Delete"}):""}),Object(f.jsx)(Pa,{open:"delete"===r.mode,title:"Are you sure?",onClose:h,onConfirm:function(){d&&o(u,null===n||void 0===n?void 0:n.name),h()},children:"The google search action will be deleted permanently. Do you wish to proceed?"})]})};cb.defaultProps={googleAction:{},addUpdateGoogleAction:function(){},deleteGoogleAction:function(){}};var ob=cb,sb=n(83),ib=n(29),rb=n(174),lb=n(186),db=n(357),ub=n(358),mb=n(352),bb=function(e){Object(rb.a)(n,e);var t=Object(lb.a)(n);function n(e){var a;return Object(sb.a)(this,n),(a=t.call(this,e)).handleHTTPActionFormChange=function(e){var t,n;a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},Object(D.a)({},null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name,null===(n=e.target)||void 0===n?void 0:n.value)),formModified:!0})},a.editParameter=function(e,t){var n,c,o=a.state.httpActionForm.parameters.findIndex((function(e){return e.count===t.count})),i=a.state.httpActionForm.parameters.filter((function(e){return e.count!==t.count}));t[null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.name]=null===(c=e.target)||void 0===c?void 0:c.value,"parameter_type"===e.target.name&&"slot"===e.target.value&&(t.value=""),i.splice(o,0,t),a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{parameters:i}),formModified:!0})},a.deleteParameter=function(e,t){a.state.httpActionForm.parameters.findIndex((function(e){return e.count===t.count}));var n=a.state.httpActionForm.parameters.filter((function(e){return e.count!==t.count}));a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{parameters:n}),formModified:!0})},a.addParameter=function(){var e=a.state.httpActionForm.parameters;"undefined"===typeof e&&(e=[]),e.push({key:"",value:"",parameter_type:"",count:e.length}),a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{parameters:e}),formModified:!0})},a.deleteParameters=function(){a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{parameters:[]}),formModified:!0})},a.validateParameters=function(){for(var e,t={},n=a.state.httpActionForm.parameters||[],c=0;c<n.length;c++)(e=n[c]).parameter_type&&0!==e.parameter_type.length||("undefined"===typeof t[e.count]&&(t[e.count]={}),t[e.count].parameter_type=!0),e.key&&0!==e.key.length||("undefined"===typeof t[e.count]&&(t[e.count]={}),t[e.count].key=!0),"sender_id"===e.parameter_type||"user_message"===e.parameter_type||"intent"===e.parameter_type||"chat_log"===e.parameter_type||e.value&&0!==e.value.length||("undefined"===typeof t[e.count]&&(t[e.count]={}),t[e.count].value=!0);return t},a.editHeader=function(e,t){var n,c,o=a.state.httpActionForm.headers.findIndex((function(e){return e.count===t.count})),i=a.state.httpActionForm.headers.filter((function(e){return e.count!==t.count}));t[null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.name]=null===(c=e.target)||void 0===c?void 0:c.value,"parameter_type"===e.target.name&&"slot"===e.target.value&&(t.value=""),i.splice(o,0,t),a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{headers:i}),formModified:!0})},a.deleteHeader=function(e,t){a.state.httpActionForm.headers.findIndex((function(e){return e.count===t.count}));var n=a.state.httpActionForm.headers.filter((function(e){return e.count!==t.count}));a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{headers:n}),formModified:!0})},a.addHeader=function(){var e=a.state.httpActionForm.headers;"undefined"===typeof e&&(e=[]),e.push({key:"",value:"",parameter_type:"",count:e.length}),a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{headers:e}),formModified:!0})},a.deleteHeaders=function(){a.setState({httpActionForm:Object(s.a)(Object(s.a)({},a.state.httpActionForm),{},{headers:[]}),formModified:!0})},a.validateHeaders=function(){for(var e,t={},n=a.state.httpActionForm.headers||[],c=0;c<n.length;c++)(e=n[c]).parameter_type&&0!==e.parameter_type.length||("undefined"===typeof t[e.count]&&(t[e.count]={}),t[e.count].parameter_type=!0),e.key&&0!==e.key.length||("undefined"===typeof t[e.count]&&(t[e.count]={}),t[e.count].key=!0),"sender_id"===e.parameter_type||"user_message"===e.parameter_type||"intent"===e.parameter_type||"chat_log"===e.parameter_type||e.value&&0!==e.value.length||("undefined"===typeof t[e.count]&&(t[e.count]={}),t[e.count].value=!0);return t},a.saveHTTPAction=function(){for(var e,t=["GET","POST","PUT","DELETE"],n=!0,c={actionName:!1,response:!1,httpURL:!1,requestMethod:!1},o=a.state.httpActionForm,i=Object.keys(c),r=0;r<i.length;r++){"undefined"!==typeof o[e=i[r]]&&0!==o[e].length||"parameters"===e||(c[e]=!0,n=!1);var l=/^\w+$/,d=new RegExp(l);"actionName"===e&&o[e]&&!o[e].match(d)&&(c[e]=!0,n=!1),l=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,d=new RegExp(l),"httpURL"===e&&o[e]&&!o[e].match(d)&&(c[e]=!0,n=!1),"requestMethod"===e&&o[e]&&-1===t.indexOf(o[e])&&(c[e]=!0,n=!1)}var u=a.validateParameters(),m=a.validateHeaders();if(Object.keys(u).length>0&&(n=!1),Object.keys(m).length>0&&(n=!1),n){var b,p=null!==(b=a.props.httpAction)&&void 0!==b&&b.action_name?"PUT":"POST";a.props.addUpdateHTTPAction(a.props.match.params.botId,Object(s.a)(Object(s.a)(Object(s.a)({},a.state.httpActionForm),{selectedIntent:a.props.selectedIntent}),{method:p}))}a.setState({httpActionFormValidation:c,parametersValidation:u,headersValidation:m})},a.deleteHTTPAction=function(){a.props.deleteHTTPAction(a.props.match.params.botId,a.state.httpActionForm.actionName),a.hideDeletePopup()},a.showDeletePopup=function(){a.setState({showDeletePopup:!0})},a.hideDeletePopup=function(){a.setState({showDeletePopup:!1})},a.onTabClick=function(e,t){a.setState({selectedTab:t})},a.state={httpActionForm:{},httpActionFormValidation:{actionName:!1,response:!1,httpURL:!1,requestMethod:!1,authToken:!1},showDeletePopup:!1,formModified:!1,selectedTab:0},a}return Object(ib.a)(n,[{key:"render",value:function(){var e,t,n,c,o,s,i,r,l,d=this,u=[];if(this.props.slots)for(var m=0;m<this.props.slots.length;m++){var b=this.props.slots[m];u.push({key:m,text:b.name,value:b.name})}var p=[{key:"g",text:"Value",value:"value"},{key:"p",text:"Slot",value:"slot"},{key:"s",text:"Sender ID",value:"sender_id"},{key:"u",text:"User Message",value:"user_message"},{key:"i",text:"Intent",value:"intent"},{key:"c",text:"Chat Log",value:"chat_log"}];return Object(f.jsxs)("div",{className:"httpActionForm-wrapper",children:[Object(f.jsx)("div",{className:"content-wrapper",children:Object(f.jsx)("form",{className:"httpActionForm ff-filetemplate",autoComplete:"off",children:Object(f.jsxs)(Ra.a,{container:!0,spacing:2,children:[Object(f.jsx)(Ra.a,{container:!0,item:!0,spacing:2,children:Object(f.jsx)(Ra.a,{item:!0,xs:12,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"actionName",className:"ff-component-label",children:"Action Name*"}),Object(f.jsx)(nc.a,{name:"actionName",id:"actionName",value:this.state.httpActionForm.actionName||"",onChange:this.handleHTTPActionFormChange,variant:"outlined",type:"text",error:this.state.httpActionFormValidation.actionName,helperText:this.state.httpActionFormValidation.actionName?"Please provide valid action name with no special characters except _":"",placeholder:"Action name",fullWidth:!0,readOnly:this.props.readOnly||(null===(e=this.props.httpAction)||void 0===e?void 0:e.action_name)})]})})}),Object(f.jsxs)(Ra.a,{container:!0,item:!0,spacing:2,children:[Object(f.jsx)(Ra.a,{item:!0,xs:3,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"requestMethod",className:"ff-component-label"}),Object(f.jsx)(Qa.a,{name:"requestMethod",id:"requestMethod",label:"Method",placeholder:"Method",value:this.state.httpActionForm.requestMethod,onChange:this.handleHTTPActionFormChange,readOnly:this.props.readOnly,className:this.props.readOnly?"readOnly":void 0,error:this.state.httpActionFormValidation.requestMethod,children:[{key:"g",text:"GET",value:"GET"},{key:"p",text:"POST",value:"POST"},{key:"d",text:"DELETE",value:"DELETE"}].map((function(e){return Object(f.jsx)(Ja.a,{value:e.value,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.text})},e.value)}))})]})}),Object(f.jsx)(Ra.a,{item:!0,xs:9,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"httpURL",className:"ff-component-label"}),Object(f.jsx)(nc.a,{name:"httpURL",id:"httpURL",placeholder:"Enter request URL",value:this.state.httpActionForm.httpURL||"",onChange:this.handleHTTPActionFormChange,readOnly:this.props.readOnly,className:this.props.readOnly?"httpURL-input readOnly":"httpURL-input",error:this.state.httpActionFormValidation.httpURL,helperText:this.state.httpActionFormValidation.httpURL?"Please provide valid URL":""})]})})]}),Object(f.jsx)(Ra.a,{item:!0,xs:12,children:Object(f.jsx)(db.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(f.jsxs)(ub.a,{value:this.state.selectedTab,onChange:this.onTabClick,"aria-label":"basic tabs example",indicatorColor:"primary",children:[Object(f.jsx)(mb.a,{label:"Headers (".concat((null===(t=this.state)||void 0===t||null===(n=t.httpActionForm)||void 0===n||null===(c=n.headers)||void 0===c?void 0:c.length)||0,")")}),Object(f.jsx)(mb.a,{label:"Body (".concat((null===(o=this.state)||void 0===o||null===(s=o.httpActionForm)||void 0===s||null===(i=s.parameters)||void 0===i?void 0:i.length)||0,")")})]})})}),Object(f.jsxs)(Ra.a,{container:!0,item:!0,spacing:2,children:[0===this.state.selectedTab&&Object(f.jsxs)(a.Fragment,{children:[this.state.httpActionForm.headers&&this.state.httpActionForm.headers.map((function(e){return Object(f.jsxs)("div",{className:"parameterRow",children:[Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"parameter_type",className:"ff-component-label",children:"Header Type*"}),Object(f.jsx)(Qa.a,{name:"parameter_type",label:"Header Type",placeholder:"Header Type",value:e.parameter_type,onChange:function(t,n){d.editHeader(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.headersValidation&&d.state.headersValidation[e.count]&&d.state.headersValidation[e.count].parameter_type,children:p.map((function(e){return Object(f.jsx)(Ja.a,{value:e.value,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.text})},e.value)}))})]})}),Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"key",className:"ff-component-label",children:"Key*"}),Object(f.jsx)(nc.a,{name:"key",placeholder:"Key",value:e.key,onChange:function(t,n){d.editHeader(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.headersValidation&&d.state.headersValidation[e.count]&&d.state.headersValidation[e.count].key,helperText:d.state.headersValidation&&d.state.headersValidation[e.count]&&d.state.headersValidation[e.count].key?"Please provide key":""})]})}),"value"===e.parameter_type&&Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"value",className:"ff-component-label",children:"Value"}),Object(f.jsx)(nc.a,{placeholder:"Value",name:"value",value:e.value,onChange:function(t,n){d.editHeader(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.headersValidation&&d.state.headersValidation[e.count]&&d.state.headersValidation[e.count].value,helperText:d.state.headersValidation&&d.state.headersValidation[e.count]&&d.state.headersValidation[e.count].value?"Please provide value":""})]})}),"slot"===e.parameter_type&&Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"slot",className:"ff-component-label",children:"Slot*"}),Object(f.jsx)(Qa.a,{name:"value",label:"Slot",placeholder:"Slot",value:e.value,onChange:function(t,n){d.editHeader(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.headersValidation&&d.state.headersValidation[e.count]&&d.state.headersValidation[e.count].value,children:u.map((function(e){return Object(f.jsx)(Ja.a,{value:e.value,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.text})},e.value)}))})]})}),Object(f.jsx)(da.k,{className:"ibc-icon deleteParameter",onClick:function(t,n){d.deleteHeader(t,e)}})]},e.count)})),Object(f.jsx)(Ra.a,{item:!0,xs:4,className:"",children:Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Ia.a,{variant:"outlined",onClick:this.addHeader,children:"Add"})})}),Object(f.jsx)(Ra.a,{item:!0,xs:4,className:"",children:Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Ia.a,{variant:"outlined",onClick:this.deleteHeaders,children:"Remove All"})})})]}),1===this.state.selectedTab&&Object(f.jsxs)(a.Fragment,{children:[this.state.httpActionForm.parameters&&this.state.httpActionForm.parameters.map((function(e){return Object(f.jsxs)("div",{className:"parameterRow",children:[Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"parameter_type",className:"ff-component-label",children:"Parameter Type*"}),Object(f.jsx)(Qa.a,{name:"parameter_type",label:"Parameter Type",placeholder:"Parameter Type",value:e.parameter_type,onChange:function(t,n){d.editParameter(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.parametersValidation&&d.state.parametersValidation[e.count]&&d.state.parametersValidation[e.count].parameter_type,children:p.map((function(e){return Object(f.jsx)(Ja.a,{value:e.value,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.text})},e.value)}))})]})}),Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"key",className:"ff-component-label",children:"Key*"}),Object(f.jsx)(nc.a,{name:"key",placeholder:"Key",value:e.key,onChange:function(t,n){d.editParameter(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.parametersValidation&&d.state.parametersValidation[e.count]&&d.state.parametersValidation[e.count].key,helperText:d.state.parametersValidation&&d.state.parametersValidation[e.count]&&d.state.parametersValidation[e.count].key?"Please provide key":""})]})}),"value"===e.parameter_type&&Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"value",className:"ff-component-label",children:"Value"}),Object(f.jsx)(nc.a,{placeholder:"Value",name:"value",value:e.value,onChange:function(t,n){d.editParameter(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.parametersValidation&&d.state.parametersValidation[e.count]&&d.state.parametersValidation[e.count].value,helperText:d.state.parametersValidation&&d.state.parametersValidation[e.count]&&d.state.parametersValidation[e.count].value?"Please provide value":""})]})}),"slot"===e.parameter_type&&Object(f.jsx)(Ra.a,{item:!0,xs:4,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"slot",className:"ff-component-label",children:"Slot*"}),Object(f.jsx)(Qa.a,{name:"value",label:"Slot",placeholder:"Slot",value:e.value,onChange:function(t,n){d.editParameter(t,e)},readOnly:d.props.readOnly,className:d.props.readOnly?"readOnly":void 0,error:d.state.parametersValidation&&d.state.parametersValidation[e.count]&&d.state.parametersValidation[e.count].value,children:u.map((function(e){return Object(f.jsx)(Ja.a,{value:e.value,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.text})},e.value)}))})]})}),Object(f.jsx)(da.k,{className:"ibc-icon deleteParameter",onClick:function(t,n){d.deleteParameter(t,e)}})]},e.count)})),Object(f.jsx)(Ra.a,{item:!0,xs:4,className:"",children:Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Ia.a,{variant:"outlined",onClick:this.addParameter,children:"Add"})})}),Object(f.jsx)(Ra.a,{item:!0,xs:4,className:"",children:Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Ia.a,{variant:"outlined",onClick:this.deleteParameters,children:"Remove All"})})})]})]}),Object(f.jsx)(Ra.a,{container:!0,item:!0,spacing:2,children:Object(f.jsx)(Ra.a,{item:!0,xs:12,children:Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"response",className:"ff-component-label",children:"Response*"}),Object(f.jsx)(nc.a,{name:"response",id:"response",placeholder:"Response",value:this.state.httpActionForm.response||"",onChange:this.handleHTTPActionFormChange,readOnly:this.props.readOnly,className:this.props.readOnly?"readOnly":void 0,error:this.state.httpActionFormValidation.response,helperText:this.state.httpActionFormValidation.response?"Please provide a valid response":"",multiline:!0,rows:3})]})})}),!this.props.readOnly&&Object(f.jsxs)("div",{className:"ff-submit-btn-section ",children:[Object(f.jsx)("button",{className:"ff-btn-theme",type:"button",onClick:this.saveHTTPAction,children:null!==(r=this.props.httpAction)&&void 0!==r&&r.action_name?"Update":"Save"}),(!0!==this.props.hideDelete||void 0===this.props.hideDelete)&&(null===(l=this.props.httpAction)||void 0===l?void 0:l.action_name)&&Object(f.jsx)("button",{type:"button",className:"ff-btn deleteButton",onClick:this.showDeletePopup,children:"Delete"})]})]})})}),Object(f.jsx)(Pa,{open:this.state.showDeletePopup,title:"Are you sure?",onClose:this.hideDeletePopup,onConfirm:this.deleteHTTPAction,children:"The action will be deleted permanently. Do you wish to proceed?"})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,a,c,o={};return!t.formModified||t.formModified&&null!==(n=e.httpAction)&&void 0!==n&&n.action_name&&e.httpAction.action_name!==t.httpActionForm.actionName?(e.httpAction.params_list&&e.httpAction.params_list.length>0&&(a=e.httpAction.params_list.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{count:t})}))),e.httpAction.headers&&e.httpAction.headers.length>0&&(c=e.httpAction.headers.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{count:t})}))),o.actionName=e.httpAction.action_name,o.response=e.httpAction.response,o.httpURL=e.httpAction.http_url,o.requestMethod=e.httpAction.request_method||"GET",o.authToken=e.httpAction.auth_token,o.parameters=a,o.headers=c,{httpActionForm:o,formModified:!1}):null}}]),n}(a.Component),pb=Object(_c.j)(bb),jb=function(e){var t=e.slotsList,n=e.formState,a=e.isActionSaved,c=[];return"from_value"===n.type?c.push({component:"textfield",name:"value",label:"Value*",placeholder:"Value",validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}}):c=[],{fields:[{component:"textfield",name:"name",label:"Name*",placeholder:"Name",readOnly:!!a,validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"select",name:"slot",label:"Slot*",options:t.map((function(e){var t;return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase()}})),validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}},{component:"select",name:"type",label:"Type of Action*",options:[{label:"Reset Value",value:"reset_slot"},{label:"Set Value",value:"from_value"}],validate:[{type:"required"}],grid:{xs:12,sm:12,md:6,lg:6,xl:6}}].concat(Object(u.a)(c))}},hb=function(e){e.selectedItemName;var t,n=e.resetActionData,c=e.slotsList,o=e.addUpdateSlotSetAction,s=e.deleteSlotSetAction,i=(null===n||void 0===n||null===(t=n.name)||void 0===t?void 0:t.length)>0,r=Object(a.useState)(!1),l=Object(sa.a)(r,2),d=l[0],u=l[1],m=Object(_c.i)().params.botId,b=Object(a.useReducer)(Nc,{}),p=Object(sa.a)(b,2),j=p[0],h=p[1];return Object(a.useEffect)((function(){Array.isArray(n)?h({type:"FORM_RESET"}):(h({type:"FORM_RESET"}),h({type:"FORM_SET_DATA",payload:n}))}),[n]),Object(f.jsxs)("div",{className:"resetActions-wrapper",children:[Object(f.jsx)(wc,{customReducer:[j,h],schema:jb({formState:j,isActionSaved:i,slotsList:c}),onSubmit:function(e){var t,n,a={name:null===e||void 0===e||null===(t=e.name)||void 0===t||null===(n=t.trim())||void 0===n?void 0:n.toLowerCase(),slot:e.slot,type:e.type};"reset_slot"!==e.type&&(a.value=e.value),a.method=i?"PUT":"POST",o(m,a)},submitButtonLabel:i?"Update":"Save",secondaryButton:i?Object(f.jsx)("button",{className:"ff-btn-theme deleteButton",type:"button",onClick:function(){u(!0)},children:"Delete"}):""}),Object(f.jsx)(Pa,{open:d,title:"Are you sure?",onClose:function(){u(!1)},onConfirm:function(){i&&s(m,n.name)},children:"The action will be deleted permanently. Do you wish to proceed?"})]})},fb=function(e,t){var n="float"===e.type,a="categorical"===e.type,c=[];return n?c.push({component:"textfield",name:"min_value",label:"Min Value*",placeholder:"Min Value",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"max_value",label:"Max Value*",placeholder:"Max Value",type:"number",validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}}):a&&c.push({component:"textfield",name:"values",label:"Values*",placeholder:"Enter comma seperated values eg. value1,value2...",validate:[{type:"required"}],grid:{xs:12,sm:12,md:12,lg:12,xl:12}}),{fields:[{component:"textfield",name:"name",label:"Name*",placeholder:"Name",readOnly:t,validate:[{type:"required"}],grid:{xs:12,sm:12,md:12,lg:12,xl:12}},{component:"select",name:"type",label:"Type*",options:[{label:"Number",value:"float"},{label:"Categorical",value:"categorical"},{label:"Unfeaturized",value:"unfeaturized"},{label:"List",value:"list"},{label:"Boolean",value:"bool"},{label:"Text",value:"text"},{label:"Any",value:"any"}],validate:[{type:"required"}],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"textfield",name:"initial_value",label:"Initial Value",placeholder:"Initial Value",validate:[],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"switch",name:"auto_fill",label:"Auto Fill",validate:[],grid:{xs:6,sm:6,md:6,lg:6,xl:6}},{component:"switch",name:"influence_conversation",label:"Influence Conversation",validate:[],grid:{xs:6,sm:6,md:6,lg:6,xl:6}}].concat(c)}},Ob=function(e){var t,n=e.slot,c=e.addUpdateSlot,o=e.deleteSlot,s=Object(a.useState)({instance:{},mode:""}),i=Object(sa.a)(s,2),r=i[0],l=i[1],d=(null===n||void 0===n||null===(t=n.name)||void 0===t?void 0:t.length)>0,u=Object(_c.i)().params.botId,m=Object(a.useReducer)(Nc,n),b=Object(sa.a)(m,2),p=b[0],j=b[1];Object(a.useEffect)((function(){Array.isArray(n)?j({type:"FORM_RESET"}):(j({type:"FORM_RESET"}),j({type:"FORM_SET_DATA",payload:n}))}),[n]);return Object(f.jsxs)("div",{className:"slotForm-wrapper",children:[Object(f.jsx)(wc,{schema:fb(p,d),onSubmit:function(e){var t={};e.values&&"string"===typeof e.values&&(e.values=e.values.split(",")),"undefined"===typeof e.auto_fill&&(e.auto_fill=!1),t.slot=e,t.method=d?"PUT":"POST",c(u,t)},customReducer:[p,j],submitButtonLabel:d?"Update":"Save",secondaryButton:d?Object(f.jsx)("button",{className:"ff-btn-theme deleteButton",type:"button",onClick:function(e,t){e.stopPropagation(),l({mode:"delete"})},children:"Delete"}):""}),Object(f.jsx)(Pa,{open:"delete"===r.mode,title:"Are you sure?",onClose:function(){l({instance:{},mode:""})},onConfirm:function(){d&&o(u,null===n||void 0===n?void 0:n.name)},children:"The slot and its mappings will be deleted permanently. Do you wish to proceed?"})]})};Ob.defaultProps={slot:{},addUpdateSlot:function(){},deleteSlot:function(){}};var vb=Ob,gb=n(365),xb=function(e){var t,n,a=e.mapping,c=e.intents,o=e.editMapping,i=e.deleteMapping,r=e.entities,l=function(e){var t,n,c=Object(s.a)(Object(s.a)({},a),{},Object(D.a)({},null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name,null===(n=e.target)||void 0===n?void 0:n.value));o(c)},d=function(e,t){var n=Object(s.a)(Object(s.a)({},a),{},Object(D.a)({},e,t.map((function(e){return e.name}))));o(n)};return Object(f.jsxs)("div",{className:"mapping-card-wrapper",children:[Object(f.jsxs)("div",{className:"mapping-card-header",children:[Object(f.jsxs)("div",{children:["Mapping - ",a.count+1]}),Object(f.jsx)("div",{children:Object(f.jsx)(da.k,{className:"ibc-icon deleteMapping",onClick:function(e,t){i(a)}})})]}),Object(f.jsxs)("div",{className:"detail-row",children:[Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("div",{className:"detail-type",children:"Type"}),Object(f.jsx)("div",{className:"detail-value",children:Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Qa.a,{name:"type",value:"undefined"===typeof a.type?"":a.type,onChange:l,children:[{key:"e",text:"From Entity",value:"from_entity"},{key:"i",text:"From Intent",value:"from_intent"},{key:"t",text:"From Text",value:"from_text"},{key:"ti",text:"From Trigger Intent",value:"from_trigger_intent"}].map((function(e){return Object(f.jsx)(Ja.a,{value:e.value,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.text})},e.value)}))})})})]}),"from_entity"===a.type&&Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("div",{className:"detail-type",children:"Entity"}),Object(f.jsx)("div",{className:"detail-value",children:Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Qa.a,{name:"entity",value:"undefined"===typeof a.entity?"":a.entity,onChange:l,children:null===r||void 0===r?void 0:r.map((function(e){return Object(f.jsx)(Ja.a,{value:e.name,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.name})},e.name)}))})})})]}),("from_intent"===a.type||"from_trigger_intent"===a.type)&&Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("div",{className:"detail-type",children:"Value"}),Object(f.jsx)("div",{className:"detail-value",children:Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(nc.a,{name:"value",placeholder:"Value",value:a.value,onChange:l})})})]})]}),Object(f.jsxs)("div",{className:"detail-row",children:[Object(f.jsx)("div",{className:"detail-type",children:"Intent"}),Object(f.jsx)("div",{className:"detail-value",children:Object(f.jsx)(gb.a,{multiple:!0,id:"fixed-tags-demo",value:(null===a||void 0===a||null===(t=a.intent)||void 0===t?void 0:t.length)>0?null===a||void 0===a?void 0:a.intent.map((function(e){return{name:e}})):[],options:null===c||void 0===c?void 0:c.map((function(e){return{name:e.name}})),getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderTags:function(e,t){return e.map((function(e,n){return Object(f.jsx)(sr.a,Object(s.a)({label:e.name},t({index:n})),e.name)}))},onChange:function(e,t){d("intent",t)},renderInput:function(e){return Object(f.jsx)(nc.a,Object(s.a)(Object(s.a)({},e),{},{variant:"outlined",placeholder:"Intent"}))}})})]}),Object(f.jsxs)("div",{className:"detail-row",children:[Object(f.jsx)("div",{className:"detail-type",children:"Not Intent"}),Object(f.jsx)("div",{className:"detail-value",children:Object(f.jsx)(gb.a,{multiple:!0,id:"fixed-tags-demo",value:(null===a||void 0===a||null===(n=a.not_intent)||void 0===n?void 0:n.length)>0?null===a||void 0===a?void 0:a.not_intent.map((function(e){return{name:e}})):[],options:null===c||void 0===c?void 0:c.map((function(e){return{name:e.name}})),getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name===t.name},renderTags:function(e,t){return e.map((function(e,n){return Object(f.jsx)(sr.a,Object(s.a)({label:e.name},t({index:n})),e.name)}))},onChange:function(e,t){d("not_intent",t)},renderInput:function(e){return Object(f.jsx)(nc.a,Object(s.a)(Object(s.a)({},e),{},{variant:"outlined",placeholder:"Not Intent"}))}})})]})]})};xb.defaultProps={mapping:{}};var yb=xb,Nb=function(e){var t,n,c=e.slotMapping,o=e.addUpdateSlotMapping,i=e.deleteSlotMapping,r=e.intents,l=e.entities,d=e.slotsList,m=e.setSnackbar,b=Object(a.useState)({instance:{},mode:""}),p=Object(sa.a)(b,2),j=p[0],h=p[1],O=c.slot,v=(c.mapping,null===c||void 0===c||null===(t=c.mapping)||void 0===t?void 0:t.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{count:t})}))),g=Object(a.useState)(O||""),x=Object(sa.a)(g,2),y=x[0],N=x[1],S=Object(a.useState)(v||[]),T=Object(sa.a)(S,2),k=T[0],C=T[1],w=(null===O||void 0===O?void 0:O.length)>0,_=Object(_c.i)().params.botId;Object(a.useEffect)((function(){O&&O!==y?(N(O),C(v)):O||(N(""),C([]))}),[O]);var A=function(e){var t=k.findIndex((function(t){return t.count===e.count})),n=k.filter((function(t){return t.count!==e.count}));n.splice(t,0,e),C(n)},E=function(e){k.findIndex((function(t){return t.count===e.count}));var t=k.filter((function(t){return t.count!==e.count}));C(t)},F=function(){h({instance:{},mode:""})};return Object(f.jsxs)("div",{className:"slotMappingForm-wrapper ff-filetemplate",children:[Object(f.jsxs)(Ma.a,{className:"ff-textfield",children:[Object(f.jsx)("label",{htmlFor:"slotName",className:"ff-component-label",children:"Slot Name*"}),Object(f.jsx)(Qa.a,{name:"slotName",id:"slotName",value:y||"",fullWidth:!0,readOnly:(null===c||void 0===c||null===(n=c.slot)||void 0===n?void 0:n.length)>0,onChange:function(e){N(e.target.value)},children:null===d||void 0===d?void 0:d.map((function(e){return Object(f.jsx)(Ja.a,{value:e.name,children:Object(f.jsx)("span",{className:"ff-select-item",children:e.name})},e.name)}))})]}),Object(f.jsxs)("div",{className:"mappings-container",children:[Object(f.jsxs)("div",{className:"mappings-header",children:[Object(f.jsx)("div",{children:"Mappings"}),Object(f.jsxs)("div",{className:"buttons",children:[Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Ia.a,{variant:"outlined",onClick:function(){C([].concat(Object(u.a)(k),[{type:"",count:k.length}]))},children:"Add"})}),Object(f.jsx)(Ma.a,{className:"ff-textfield",children:Object(f.jsx)(Ia.a,{variant:"outlined",onClick:function(){C([])},children:"Delete All"})})]})]}),Object(f.jsx)("div",{className:"mappings-content",children:null===k||void 0===k?void 0:k.map((function(e){return Object(f.jsx)(yb,{mapping:e,intents:r,editMapping:A,deleteMapping:E,entities:l},e.type+e.count)}))}),Object(f.jsxs)("div",{className:"ff-submit-btn-section ",children:[Object(f.jsx)("button",{className:"ff-btn-theme saveButton",type:"button",onClick:function(e){if(0!==(null===k||void 0===k?void 0:k.length)){for(var t=!1,n=0;n<k.length;n++){var a,c,s=k[n];if(!("from_intent"!==s.type&&"from_trigger_intent"!==s.type||0!==(null===s||void 0===s||null===(a=s.value)||void 0===a?void 0:a.length)&&"undefined"!==typeof s.value)){m("Please enter value in mapping ".concat(s.count+1),"error"),t=!0;break}if("from_entity"===s.type&&(0===(null===s||void 0===s||null===(c=s.entity)||void 0===c?void 0:c.length)||"undefined"===typeof s.entity)){m("Please select entity in mapping ".concat(s.count+1),"error"),t=!0;break}}if(!t){var i={slotMapping:{}};i.slotMapping.slot=y,i.slotMapping.mapping=k,i.method=w?"PUT":"POST",o(_,i)}}else m("Please add slot mappings","error")},children:w?"Update":"Save"}),w&&Object(f.jsx)("button",{type:"button",className:"ff-btn deleteButton",onClick:function(e){!function(e,t){e.stopPropagation(),h({mode:"delete",instance:{slotName:t}})}(e,y)},children:"Delete"})]})]}),Object(f.jsx)(Pa,{open:"delete"===j.mode,title:"Are you sure?",onClose:F,onConfirm:function(){var e;i(_,null===j||void 0===j||null===(e=j.instance)||void 0===e?void 0:e.slotName),F()},children:"The slot mapping will be deleted permanently. Do you wish to proceed?"})]})};Nb.defaultProps={slotMapping:{},addUpdateSlotMapping:function(){},deleteSlotMapping:function(){}};var Sb=Nb,Tb=function(e){var t=function(e){var t=e.addTrainingPhrase,n=e.addResponse,c=e.selectedItemType,o=e.selectedItemName,s=e.displayData,i=e.fetching,r=e.generateTrainingData,l=e.generatedPhrases,d=e.demoFeature,u=e.setSnackbar,m=e.updateTrainingPhrase,b=e.updateResponse,p=e.deleteTrainingPhrase,j=e.deleteResponse,h=e.slots,f=e.addUpdateHTTPAction,O=e.deleteHTTPAction,v=e.showNewHTTPActionForm,g=e.showNewSlotsResetForm,x=e.addUpdateSlot,y=e.deleteSlot,N=e.showNewSlotForm,S=e.entities,T=e.fetchEntities,k=e.addUpdateSlotSetAction,C=e.deleteSlotSetAction,w=e.uiConfigs,_=e.intents,A=e.showNewSlotsMappingForm,E=e.addUpdateSlotMapping,F=e.deleteSlotMapping,I=e.addUpdateEmailAction,D=e.deleteEmailAction,P=e.showNewEmailActionForm,R=e.addUpdateGoogleAction,L=e.deleteGoogleAction,U=e.showNewGoogleActionForm;switch(c){case"picker_intents":return{title:"Training Phrases",Component:(null===o||void 0===o?void 0:o.length)>0?Mm:a.Fragment,propsData:(null===o||void 0===o?void 0:o.length)>0?{selectedItemName:o,displayData:s,fetching:i,addTrainingPhrase:t,generateTrainingData:r,generatedPhrases:l,demoFeature:d,setSnackbar:u,updateTrainingPhrase:m,deleteTrainingPhrase:p,entities:S,fetchEntities:T,uiConfigs:w}:{}};case"picker_utterances":return{title:"Responses",Component:(null===o||void 0===o?void 0:o.length)>0?Im:a.Fragment,propsData:(null===o||void 0===o?void 0:o.length)>0?{selectedItemName:o,displayData:s,fetching:i,addResponse:n,demoFeature:d,updateResponse:b,deleteResponse:j}:{}};case"picker_api_actions":return{title:"API Action",Component:null!==s&&void 0!==s&&s.action_name||v?pb:a.Fragment,propsData:null!==s&&void 0!==s&&s.action_name||v?{selectedItemName:o,httpAction:s,fetching:i,demoFeature:d,slots:h,addUpdateHTTPAction:f,deleteHTTPAction:O}:{}};case"picker_slots":return{title:"Slot",Component:null!==s&&void 0!==s&&s.name||N?vb:a.Fragment,propsData:null!==s&&void 0!==s&&s.name||N?{slot:Array.isArray(s)?{}:s,addUpdateSlot:x,deleteSlot:y}:{}};case"picker_reset_slots":return{title:"Reset Slot",Component:null!==s&&void 0!==s&&s.name||g?hb:a.Fragment,propsData:null!==s&&void 0!==s&&s.name||g?{selectedItemName:o,resetActionData:s,slotsList:h,addUpdateSlotSetAction:k,deleteSlotSetAction:C}:{}};case"picker_mapped_slots":return{title:"Slot Mapping",Component:null!==s&&void 0!==s&&s.slot||A?Sb:a.Fragment,propsData:null!==s&&void 0!==s&&s.slot||A?{selectedItemName:o,slotMapping:Array.isArray(s)?{}:s,slotsList:h,intents:_,entities:S,addUpdateSlotMapping:E,deleteSlotMapping:F,setSnackbar:u}:{}};case"picker_email_action":return{title:"Email Action",Component:null!==s&&void 0!==s&&s.action_name||P?nb:a.Fragment,propsData:null!==s&&void 0!==s&&s.action_name||P?{selectedItemName:o,emailAction:Array.isArray(s)?{}:s,addUpdateEmailAction:I,deleteEmailAction:D}:{}};case"picker_google_action":return{title:"Google Search Action",Component:null!==s&&void 0!==s&&s.name||U?ob:a.Fragment,propsData:null!==s&&void 0!==s&&s.name||U?{selectedItemName:o,googleAction:Array.isArray(s)?{}:s,addUpdateGoogleAction:R,deleteGoogleAction:L}:{}};default:return{Component:function(){return""}}}}(e),n=t.title,c=t.Component,o=t.propsData,i=e.selectedItemType,r=e.emailActionLoader;return Object(f.jsxs)(a.Fragment,{children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsxs)("div",{className:"title-wrapper",children:[Object(f.jsx)($s.d,{className:"icon"}),Object(f.jsx)("h3",{className:"title",children:n})]}),"picker_email_action"===i&&r&&Object(f.jsx)("div",{className:"add-update-loader",children:Object(f.jsx)(Mo,{text:""})})]}),Object(f.jsx)(c,Object(s.a)({},o))]})},kb=Object(aa.b)((function(e){return{uiConfigs:e.global.uiConfigs,emailActionLoader:e.storyComponents.emailActionLoader}}),(function(e){return{setSnackbar:function(t,n){return e(kn(t,n))},demoFeature:function(){return e(_n())}}}))(Tb),Cb=function(e){var t=e.storyState,n=e.isFullScreen,c=e.addTrainingPhrase,o=e.addResponse,s=e.generateTrainingData,i=e.updateTrainingPhrase,r=e.updateResponse,l=e.deleteTrainingPhrase,d=e.deleteResponse,u=e.slots,m=e.addUpdateHTTPAction,b=e.deleteHTTPAction,p=e.addUpdateEmailAction,j=e.deleteEmailAction,h=e.addUpdateGoogleAction,O=e.deleteGoogleAction,v=e.entities,g=e.addUpdateSlotSetAction,x=e.fetchEntities,y=e.deleteSlotSetAction,N=t.selectedPickerItemType,S=t.selectedPickerItemName,T=t.panelData,k=t.fetchingPanelData,C=t.generatedPhrases,w=t.showNewHTTPActionForm,_=t.showNewEmailActionForm,A=t.showNewGoogleActionForm,E=t.showNewSlotsResetForm,F=Object(a.useState)(!1),I=Object(sa.a)(F,2),D=I[0],P=I[1];Object(a.useEffect)((function(){P(!!S)}),[S]);return Object(f.jsxs)("div",{className:"component-details-panel ".concat(D?"component-details-open":""," ").concat(n?"component-details-fullscreen":""),children:[S&&Object(f.jsx)("button",{type:"button",className:"icon-button-clear open-panel-button",onClick:function(){P(!D)},children:Object(f.jsx)($s.a,{className:"ibc-icon"})}),Object(f.jsx)(kb,{addTrainingPhrase:c,addResponse:o,selectedItemType:N,selectedItemName:S,fetching:k,displayData:T,generateTrainingData:s,generatedPhrases:C,updateTrainingPhrase:i,updateResponse:r,deleteTrainingPhrase:l,deleteResponse:d,slots:u,addUpdateHTTPAction:m,deleteHTTPAction:b,addUpdateEmailAction:p,deleteEmailAction:j,showNewHTTPActionForm:w,showNewEmailActionForm:_,addUpdateGoogleAction:h,deleteGoogleAction:O,showNewGoogleActionForm:A,showNewSlotsResetForm:E,addUpdateSlotSetAction:g,deleteSlotSetAction:y,entities:v,fetchEntities:x})]})},wb=Object(aa.b)((function(e){var t=e.storyComponents,n=t.slots,a=t.entities;return{storyState:e.story,slots:n,entities:a}}),(function(e){return{addTrainingPhrase:function(t,n,a){return e(dm(t,n,a))},addResponse:function(t,n,a){return e(pm(t,n,a))},generateTrainingData:function(t,n){return e(bm(t,n))},updateTrainingPhrase:function(t,n){return e(hm(t,n))},updateResponse:function(t,n){return e(fm(t,n))},deleteTrainingPhrase:function(t,n){return e(vm(t,n))},deleteResponse:function(t,n){return e(gm(t,n))},addUpdateHTTPAction:function(t,n){e(function(e,t){return function(n){n(Ut(e,t,{onSuccess:function(t,n){return ym(t,n,e)},onError:wn}))}}(t,n))},deleteHTTPAction:function(t,n){e(function(e,t){return function(n){n(Bt(e,t,{onSuccess:function(t,n){return Nm(t,0,e)},onError:wn}))}}(t,n))},addUpdateEmailAction:function(t,n){e(function(e,t){return function(n){n(Be(e,t,{onSuccess:function(t,n){return Sm(t,n,e)},onError:wn}))}}(t,n))},deleteEmailAction:function(t,n){e(function(e,t){return function(n){n(Ge(e,t,{onSuccess:function(t,n){return Tm(t,0,e)},onError:wn}))}}(t,n))},addUpdateGoogleAction:function(t,n){e(function(e,t){return function(n){n(Ke(e,t,{onSuccess:function(t,n){return km(t,n,e)},onError:wn}))}}(t,n))},deleteGoogleAction:function(t,n){e(function(e,t){return function(n){n(Qe(e,t,{onSuccess:function(t,n){return Cm(t,0,e)},onError:wn}))}}(t,n))},deleteSlotSetAction:function(t,n){e(function(e,t){return function(n){n(Vt(e,t,{onSuccess:function(t,n){return Em(t,0,e)},onError:wn}))}}(t,n))},fetchEntities:function(t){e(_m(t))},addUpdateSlotSetAction:function(t,n){e(function(e,t){return function(n){n(Ht(e,t,{onSuccess:function(t,n){return Am(t,n,e)},onError:wn}))}}(t,n))}}}))(Cb),_b=function(e){var t=e.story,n=(e.demoFeature,e.setOpenPickers),c=e.clearPanelData,o=e.setFullScreen,i=e.fullScreen,r=t.storyData,l=t.openPickers,d=Object(a.useState)([]),m=Object(sa.a)(d,2),b=m[0],p=m[1],j=Object(_c.i)().params.storyId,h=null===j||void 0===j?void 0:j.includes("NEW");Object(a.useEffect)((function(){return function(){c()}}),[]),Object(a.useEffect)((function(){if(r){var e=function(e,t){var n=!1,a=e.map((function(a,c){var o,i;0!==t.length&&c<t.length&&(null===(o=t[c].data)||void 0===o?void 0:o.label)===a.name&&t[c].type===a.type&&!n?i=t[c].id:n=!0;var r={id:i||"node_".concat(Date.now()).concat(c),type:a.type,data:{label:a.name,nodeIndex:c},position:{x:420,y:100*c+50}};if("NEW_NODE"===a.type){var l=c>0&&e[c-1].type;return Object(s.a)(Object(s.a)({},r),{},{data:{nodeIndex:c,prevNodeType:l},selectable:!1})}return r})),c=a.map((function(e,t){if(0!==t)return Object(s.a)({id:"edge_".concat(Date.now()).concat(t),source:a[t-1].id,target:e.id},Ym)}));return c.shift(),[].concat(Object(u.a)(a),Object(u.a)(c))}(r.steps,b),t=Zm(l);p([].concat(Object(u.a)(e),Object(u.a)(t)))}}),[r]),Object(a.useEffect)((function(){p((function(e){var t=e.filter((function(e){return!e.id.includes("picker")})),n=Zm(l);return[].concat(Object(u.a)(t),Object(u.a)(n))}))}),[l]);return Object(f.jsxs)("div",{className:"editor-wrapper",children:[Object(f.jsxs)("div",{className:"editor-sidepanel ".concat(i?"sidepanel-collapsed":""),children:[Object(f.jsxs)("div",{className:"sidepanel-title",children:[Object(f.jsx)($s.d,{className:"icon"}),Object(f.jsx)("h3",{className:"title",children:"Components"})]}),Object(f.jsx)("div",{className:"buttons-wrapper",children:Qm.map((function(e){var t=e.icon,a=e.name,o=e.id,s=l.includes(o);return Object(f.jsx)(ka.a,{title:i?a:"",placement:"right",children:Object(f.jsxs)("button",{className:"component ".concat(s?"is-open":""),type:"button",onClick:function(){return function(e){if(c(),l.includes(e)){var t=l.filter((function(t){return t!==e}));n(t)}else if("picker_email_action"!==e||!l.includes("picker_api_actions")&&!l.includes("picker_google_action"))if("picker_api_actions"!==e||!l.includes("picker_email_action")&&!l.includes("picker_google_action"))if("picker_google_action"!==e||!l.includes("picker_email_action")&&!l.includes("picker_api_actions"))if("picker_reset_slots"===e&&l.includes("picker_forms")){var a=l.filter((function(e){return"picker_forms"!==e}));n([].concat(Object(u.a)(a),[e]))}else if("picker_forms"===e&&l.includes("picker_reset_slots")){var o=l.filter((function(e){return"picker_reset_slots"!==e}));n([].concat(Object(u.a)(o),[e]))}else n([].concat(Object(u.a)(l),[e]));else{var s=l.filter((function(e){return"picker_email_action"!==e&&"picker_api_actions"!==e}));n([].concat(Object(u.a)(s),[e]))}else{var i=l.filter((function(e){return"picker_email_action"!==e&&"picker_google_action"!==e}));n([].concat(Object(u.a)(i),[e]))}else{var r=l.filter((function(e){return"picker_api_actions"!==e&&"picker_google_action"!==e}));n([].concat(Object(u.a)(r),[e]))}}(o)},children:[Object(f.jsx)("div",{className:"icon-wrapper",children:Object(f.jsx)(t,{className:"icon"})}),Object(f.jsx)("p",{className:"name",children:a})]})},o)}))})]}),Object(f.jsxs)(Rl.e,{nodeTypes:Jm,elements:b,className:"editor ".concat(i?"editor-fullscreen":""),arrowHeadColor:"#fd6491",markerEndId:"react-flow__arrowclosed",onSelectionChange:function(e){e||c()},selectNodesOnDrag:!1,children:[Object(f.jsx)(Rl.c,{showFitView:!1,children:!h&&Object(f.jsx)(Rl.b,{onClick:function(){o(!i)},children:i?Object(f.jsx)(da.q,{className:"control-icon"}):Object(f.jsx)(da.p,{className:"control-icon"})})}),Object(f.jsx)(Rl.a,{variant:"dots",size:1.5,color:"var(--editor1)"})]}),Object(f.jsx)(wb,{isFullScreen:i})]})},Ab=Object(aa.b)((function(e,t){return{story:e.story,setFullScreen:t.setFullScreen,fullScreen:t.fullScreen}}),(function(e){return{demoFeature:function(){return e(_n())},setOpenPickers:function(t){return e(xm(t))},clearPanelData:function(){return e(em())}}}))(_b),Eb=function(e){var t=e.fetchStories,n=e.fetchStoryData,c=e.story,o=e.stories,s=e.updateStory,i=e.clearStoryData,r=e.clearPanelData,l=e.updateStoryDataState,d=e.setOpenPickers,u=c.storyData,m=c.loading,b=c.unsavedStory,p=Object(a.useState)(""),j=Object(sa.a)(p,2),h=j[0],O=j[1],v=Object(a.useState)(!1),g=Object(sa.a)(v,2),x=g[0],y=g[1],N=Object(a.useState)(!1),S=Object(sa.a)(N,2),T=S[0],k=S[1],C=!1,w=Object(_c.i)().params,_=w.botId,A=w.storyId,E=A.includes("NEW"),F=Object(a.useRef)();Object(a.useEffect)((function(){return E&&(A.includes("CUSTOM")&&d(["picker_intents"]),F&&(F.current.focus(),setTimeout((function(){F.current.select()}),500))),function(){i(),r()}}),[]),Object(a.useEffect)((function(){var e,t="Kairon - AI Powered Contextual Chatbot Builder";u&&(O(null===u||void 0===u?void 0:u.name),document.title=null!==u&&void 0!==u&&u.name?"".concat(null===u||void 0===u||null===(e=u.name)||void 0===e?void 0:e.slice(0,20)," | ").concat(t):t)}),[u]),Object(a.useEffect)((function(){var e;null!==(e=o.storiesList)&&void 0!==e&&e.length||o.storiesFetched?n(_,A,o.storiesList):t(_)}),[o.storiesList,A]);return Object(f.jsxs)("div",{className:"story-wrapper ".concat(x?"full-screen-editor":""),children:[Object(f.jsxs)("div",{className:"story-header",children:[Object(f.jsxs)("div",{className:"story-breadcrumbs",children:[Object(f.jsx)(ra.a,{to:"/bot/".concat(_),className:"breadcrumb breadcrumb-link",children:"STORIES"}),Object(f.jsx)($s.b,{className:"breadcrumb-sep"}),Object(f.jsx)("p",{className:"breadcrumb",title:null===u||void 0===u?void 0:u.name,children:(null===u||void 0===u?void 0:u.name)||""}),Object(f.jsx)(ka.a,{title:"Story template",placement:"top",children:Object(f.jsx)("span",{className:"type-tag",children:"RULE"===(null===u||void 0===u?void 0:u.type)?"RULE":"Q&A"===(null===u||void 0===u?void 0:u.template_type)?"Q&A":"CUSTOM"})})]}),Object(f.jsxs)("div",{className:"story-title-wrapper",children:[E?Object(f.jsx)(ka.a,{title:T?"":"Rename",disableFocusListener:!0,children:Object(f.jsx)("input",{className:"text-overflow app-heading heading-edit ".concat("untitled"!==(null===h||void 0===h?void 0:h.toLowerCase())||T?"":"noname-story"),value:h,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){27===e.keyCode?(C=!0,e.target.blur()):13===e.keyCode&&e.target.blur()},spellCheck:!1,onBlur:function(){k(!1);var e=h.trim();if(e!==(null===u||void 0===u?void 0:u.name)){if(""===e&&(C=!0),C)return O(null===u||void 0===u?void 0:u.name),void(C=!1);l("name",e),O(e)}else O(e)},style:{width:"".concat(16*(null===h||void 0===h?void 0:h.length)+20,"px")},ref:F,onFocus:function(){k(!0),"untitled"===(null===h||void 0===h?void 0:h.toLowerCase())&&F.current.select()}})}):Object(f.jsx)("h2",{className:"app-heading story-name",style:{paddingLeft:"6px"},children:(null===u||void 0===u?void 0:u.name)||""}),u&&Object(f.jsx)(ka.a,{title:"".concat(!b&&!E||m?"":"Click to Save"),placement:"top",children:Object(f.jsxs)("div",{role:"button",tabIndex:0,className:"icon-button-clear save-story-button ".concat(b||E?"unsaved-button":""," ").concat(m?"unsaved-loading":""),onClick:function(){if((b||E)&&!m){var e=o.storiesList.find((function(e){return e._id===(null===u||void 0===u?void 0:u._id)}));s(_,u,e,E?"POST":"PUT")}},children:[m?Object(f.jsx)(Lo.a,{color:"primary",size:16,thickness:4,style:{marginLeft:"8px"}}):Object(f.jsx)(Ks.g,{className:"ibc-icon"}),Object(f.jsx)("span",{className:"button-text",children:b||E?m?"Saving":"Save":"Synced"})]})})]})]}),u&&Object(f.jsx)("div",{className:"story-editor-wrapper",children:"Q&A"===(null===u||void 0===u?void 0:u.template_type)?Object(f.jsx)($m,{setFullScreen:y,fullScreen:x}):Object(f.jsx)(Ab,{setFullScreen:y,fullScreen:x})})]})},Fb=Object(aa.b)((function(e){return{stories:e.stories,story:e.story}}),(function(e){return{fetchStories:function(t){return e(Yd(t))},fetchStoryData:function(t,n,a){return e(Yu(t,n,a))},updateStory:function(t,n,a,c){return e(function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"PUT";return function(c){var o=Xu(t);if(n&&y(o,n))return c(Ju(0,{story:o}));var s=o._id,i=o.name,r=o.steps,l=o.template_type;if(s&&s.includes("NEW")){if("untitled"===i.trim().toLowerCase())return c(kn("Enter story name","error"));if(0===r.length)return c(kn("Add steps to the flow","error"));if("Q&A"===l){if(2!==r.length)return c(kn("Invalid Story","error"));if(!r[0].name||!r[1].name)return c(kn("Please select both intent and utterance","error"))}}c({type:lu}),c(d("".concat(j.server,"/api/bot/").concat(e,"/stories"),{args:{name:o.name,steps:o.steps,type:o.type,template_type:o.template_type},callbackParams:{story:o},method:a,success:"POST"===a?function(t,n){return Zu(t,n,e)}:Ju,error:Wu}))}}(t,n,a,c))},clearStoryData:function(){return e({type:ju})},clearPanelData:function(){return e(em())},updateStoryDataState:function(t,n){return e(function(e,t){return{type:hu,payload:{field:e,value:t}}}(t,n))},setOpenPickers:function(t){return e(xm(t))}}}))(Eb),Ib=n(353),Db=function(e){var t=e.componentsListFetched,n=e.componentsList,o=e.componentName,s=(e.componentLabel,e.componentDetailHeader),i=e.correspondingStories,r=e.selectedInstanceName,l=e.changeSelectedInstance,d=e.fetchInstanceDetails,m=e.instanceDetails,b=e.fetchingInstanceDetails,p=e.generatedPhrases,j=e.generateTrainingData,h=e.name_propertyName,O=e.updateTrainingPhrase,v=e.updateResponse,g=e.deleteTrainingPhrase,x=e.deleteResponse,y=e.slots,N=e.addUpdateHTTPAction,S=e.deleteHTTPAction,T=e.addUpdateSlotSetAction,k=e.deleteSlotSetAction,C=e.pickerName,w=e.deleteInstance,_=e.addComponentItems,A=e.toggleNewHTTPActionForm,E=e.toggleNewSlotForm,F=e.toggleNewResetActionForm,I=e.showNewSlotForm,D=e.toggleNewSlotMappingForm,P=e.showNewSlotsResetForm,R=e.showNewHTTPActionForm,L=e.showNewSlotsMappingForm,U=e.searchTrainingExample,M=e.trainingExampleSearchResults,B=e.clearTrainingExampleSearch,H=e.addUpdateSlot,G=e.deleteSlot,V=e.fetchEntities,z=e.entities,q=e.intents,W=e.addUpdateSlotMapping,K=e.deleteSlotMapping,Y=e.showNewEmailActionForm,Q=e.toggleNewEmailActionForm,J=e.addUpdateEmailAction,Z=e.deleteEmailAction,X=e.showNewGoogleActionForm,$=e.toggleNewGoogleActionForm,ee=e.addUpdateGoogleAction,te=e.deleteGoogleAction,ne=Object(a.useState)({instance:{},mode:""}),ae=Object(sa.a)(ne,2),ce=ae[0],oe=ae[1],se=Object(a.useState)(""),ie=Object(sa.a)(se,2),re=ie[0],le=ie[1],de=c.a.useRef(),ue=Object(a.useRef)(null),me=Object(_c.i)().params.botId,be=Object(a.useMemo)((function(){return re.trim()?n.filter((function(e){var t;return null===(t=e[h])||void 0===t?void 0:t.toLowerCase().includes(null===re||void 0===re?void 0:re.toLowerCase())})):n}),[re,n]),pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&e!==r?l(e):n||l(e),e!==r&&d(me,e,t)},je=function(t,n,a){e.addInstanceDetail(t,n,a,o)},he=function(){oe({instance:{},mode:""})},fe=function(){B()};return Object(f.jsxs)(Ra.a,{container:!0,wrap:"nowrap",spacing:0,className:"listTabPanel-container",children:[Object(f.jsxs)(Ra.a,{item:!0,xs:3,className:"componentsList-containter",id:"jride-components-list",children:[Object(f.jsx)("div",{className:"componentsList-header",children:Object(f.jsx)("div",{onClick:function(e){switch(e.stopPropagation(),o){case"intent":case"utterance":ue.current.focus();break;case"action":"INPUT"===e.target.tagName||R?e.stopPropagation():A(!R);break;case"slot":"INPUT"===e.target.tagName||I?e.stopPropagation():E(!I);break;case"reset_slots":"INPUT"===e.target.tagName||P?e.stopPropagation():F(!P);break;case"mapped_slot":"INPUT"===e.target.tagName||L?e.stopPropagation():D(!L);break;case"email_action":"INPUT"===e.target.tagName||Y?e.stopPropagation():Q(!Y);break;case"google_action":"INPUT"===e.target.tagName||X?e.stopPropagation():$(!X)}},className:"addNew-button",children:Object(f.jsxs)("div",{className:"addNew-button-cnt",children:[Object(f.jsx)(ka.a,{disableHoverListener:!0,title:"Press shift + enter to add, esc to cancel",placement:"top",children:Object(f.jsx)("input",{ref:ue,placeholder:"Search or add",className:"text",value:re,onChange:function(e){le(e.target.value)},onKeyDown:function(e){var t;(t=e).shiftKey&&13===t.which?("action"!==o||R?"slot"!==o||I?"reset_slots"!==o||P?"mapped_slot"!==o||L?"email_action"!==o||Y?"google_action"!==o||X?re.trim().length>0&&_(me,{dataName:re.trim()},o):$(!X):Q(!Y):D(!L):F(!P):E(!I):A(!R),le(""),ue.current.blur()):27===t.which&&(ue.current.blur(),le(""))}})}),Object(f.jsx)(da.c,{className:"icon"})]})})}),Object(f.jsxs)("div",{className:"componentsList-content",children:[!t&&Object(f.jsxs)("div",{className:"skeleton-wrapper",children:[Object(f.jsx)(Ml.a,{}),Object(u.a)(new Array(5)).map((function(e,t){return Object(f.jsxs)("div",{className:"checkbox-skeleton",children:[Object(f.jsx)(Ml.a,{style:{marginRight:"10px"}}),Object(f.jsx)(Ml.a,{style:{flexGrow:"1"}})]},t)}))]}),t&&Object(f.jsx)(Pm.a,{disablePadding:!0,className:"componentsList",children:n&&be&&be.map((function(e,t){return Object(f.jsxs)(Rm.a,{selected:e[h]===r,dense:!0,button:!0,onClick:function(){pe(e[h],o)},title:e[h],children:[Object(f.jsx)(Ib.a,{id:e._id||e[h],primary:e[h]}),Object(f.jsx)("div",{className:"list-actions",children:Object(f.jsx)(ka.a,{title:"Delete",placement:"top-end",children:Object(f.jsx)("button",{type:"button",className:"icon-button-clear delete-action",onClick:function(t){return function(e,t,n,a){e.stopPropagation(),oe({mode:"delete",instance:{instanceName:t,instanceType:n,instanceObj:a}})}(t,e[h],o,e)},children:Object(f.jsx)(da.k,{className:"ibc-icon"})})})})]},e[h]+t)}))})]})]}),Object(f.jsxs)(Ra.a,{item:!0,xs:7,className:"componentDetails-containter",id:"jride-components-listdetails",children:[Object(f.jsxs)("div",{className:"componentDetails-header",children:[Object(f.jsx)("h3",{className:"selectedInstanceName",children:r||"".concat(s)}),"intent"===o&&Object(f.jsxs)("div",{className:"search-container",children:[Object(f.jsx)(ti,{onSearch:function(e){(null===e||void 0===e?void 0:e.length)>0?U(me,e):fe()},debounce:!0,placeholder:"Search training example..."}),M.length>0&&Object(f.jsx)("div",{className:"search-results-container",ref:de,children:Object(f.jsx)(Pm.a,{children:M.map((function(e,t){return Object(f.jsx)(Rm.a,{dense:!0,button:!0,onClick:function(){pe(e.intent,o,!0),fe()},children:Object(f.jsx)(Ib.a,{primary:e.intent,secondary:e.text})},e.text+t)}))})})]})]}),Object(f.jsx)("div",{className:"componentDetails-content",children:Object(f.jsx)(kb,{displayData:m,selectedItemType:C||"picker_".concat(o,"s"),selectedItemName:r,fetching:b,addTrainingPhrase:je,addResponse:je,generatedPhrases:p,generateTrainingData:j,updateTrainingPhrase:O,updateResponse:v,deleteTrainingPhrase:g,deleteResponse:x,slots:y,addUpdateHTTPAction:N,deleteHTTPAction:S,showNewHTTPActionForm:R,showNewSlotsMappingForm:L,addUpdateSlotSetAction:T,deleteSlotSetAction:k,showNewSlotForm:I,showNewSlotsResetForm:P,addUpdateSlot:H,deleteSlot:G,fetchEntities:V,entities:z,intents:q,addUpdateSlotMapping:W,deleteSlotMapping:K,showNewEmailActionForm:Y,toggleNewEmailActionForm:Q,addUpdateEmailAction:J,deleteEmailAction:Z,showNewGoogleActionForm:X,toggleNewGoogleActionForm:$,addUpdateGoogleAction:ee,deleteGoogleAction:te})})]}),Object(f.jsxs)(Ra.a,{item:!0,xs:2,className:"correspondingStories-containter",id:"jride-components-relatedstories",children:[Object(f.jsx)("h3",{children:"Corresponding Stories"}),Object(f.jsx)("div",{className:"correspondingStories-content",children:i&&i.map((function(e,t){var n;return Object(f.jsx)(ra.a,{to:"/bot/".concat(me,"/story/").concat(e._id),className:"story-link",children:Object(f.jsx)(sr.a,{avatar:Object(f.jsx)(rr.a,{children:null===(n=e.name)||void 0===n?void 0:n.charAt(0)}),label:e.name,color:"primary",variant:"outlined",title:e.name})},e.name+t)}))})]}),Object(f.jsxs)(Pa,{open:"delete"===ce.mode,title:"Are you sure?",onClose:he,onConfirm:function(){w(me,ce.instance.instanceName,ce.instance.instanceType,ce.instance.instanceObj),he()},children:["The"," ","reset_slots"===o?"action":"mapped_slot"===o?"slot mapping":"google_action"===o?"google search action":o," ","will be deleted permanently. Do you wish to proceed?"]})]})};Db.defaultProps={name_propertyName:"name",trainingExampleSearchResults:[]};var Pb=Db,Rb=function(e){var t=e.intentsFetched,n=e.fetchIntents,c=e.utterancesFetched,o=e.fetchAllResponses,i=e.selectedComponent,r=e.changeSelectedComponent,l=e.fetchStories,d=e.storiesFetched,u=e.tabPanelProps,m=e.selectedTabProps,b=e.changeSelectedInstance,p=e.fetchInstanceDetails,j=e.fetchingInstanceDetails,h=e.addInstanceDetail,O=e.generatedPhrases,v=e.generateTrainingData,g=e.httpActionsFetched,x=e.fetchHTTPActions,y=e.updateTrainingPhrase,N=e.updateResponse,S=e.deleteTrainingPhrase,T=e.deleteResponse,k=e.fetchSlots,C=e.fetchEmailActions,w=e.fetchGoogleActions,_=e.deleteInstance,A=e.addUpdateHTTPAction,E=e.deleteHTTPAction,F=e.addComponentItems,I=e.toggleNewHTTPActionForm,D=e.toggleNewSlotForm,P=e.toggleNewResetActionForm,R=e.toggleNewSlotMappingForm,L=e.toggleNewEmailActionForm,U=e.toggleNewGoogleActionForm,M=e.showNewHTTPActionForm,B=e.showNewSlotForm,H=e.showNewSlotsResetForm,G=e.showNewEmailActionForm,V=e.showNewGoogleActionForm,z=e.searchTrainingExample,q=e.trainingExampleSearchResults,W=e.clearTrainingExampleSearch,K=e.slotsFetched,Y=e.slotsSetActionsFetched,Q=e.addUpdateSlot,J=e.deleteSlot,Z=e.addUpdateEmailAction,X=e.deleteEmailAction,$=e.emailActionsFetched,ee=e.addUpdateGoogleAction,te=e.deleteGoogleAction,ne=e.googleActionsFetched,ae=e.botsState,ce=e.startTour,oe=e.globalState,se=e.fetchEntities,ie=e.fetchSlotSetActions,re=e.addUpdateSlotSetAction,le=e.deleteSlotSetAction,de=e.entities,ue=e.fetchSlotMappings,me=e.slotMappingsFetched,be=(e.slotMappings,e.showNewSlotsMappingForm),pe=e.addUpdateSlotMapping,je=e.deleteSlotMapping,he=Object(_c.i)().params.botId,fe=ae.botsFetched,Oe=ae.botsList,ve=oe.uiConfigs;Object(a.useEffect)((function(){d||l(he)}),[]),Object(a.useEffect)((function(){fe&&Oe.length>=1&&(null===ve||void 0===ve||!ve.componentsTourDone)&&setTimeout((function(){return ce("/bot/:botId/components")}),2e3)}),[fe]),Object(a.useEffect)((function(){0!==i||t?1!==i||c?2!==i||g?3!==i||Y?4!==i||$?5!==i||ne?6!==i||K?7!==i||me||(ue(he),k(he),n(he),se(he)):k(he):w(he):C(he):(ie(he),k(he)):(x(he),k(he)):o(he):n(he)}),[i]);var ge=function(e,t){r(t)},xe=u.filter((function(e){return"story"===e.tabHeader})),ye=u.filter((function(e){return"form"===e.tabHeader}));return Object(f.jsxs)("div",{className:"app-page storyComponents-wrapper",children:[Object(f.jsx)("div",{className:"storyComponents-head",children:Object(f.jsx)("h1",{className:"app-heading",children:"Components"})}),Object(f.jsxs)("div",{className:"storyComponents-content",children:[Object(f.jsxs)("div",{className:"storyComponents-tabs",children:[Object(f.jsxs)("div",{className:"tab-collection",children:[Object(f.jsx)("div",{className:"header",children:"Story"}),Object(f.jsx)(ub.a,{value:i>=0&&i<=5&&i,onChange:ge,"aria-label":"components tabs",indicatorColor:"primary",id:"jride-components-tabs",className:i>=0&&i<=5?"selected":"",children:xe&&xe.map((function(e){return Object(f.jsx)(mb.a,{label:e.componentLabel,value:e.tabValue,disableRipple:!0},e.componentName)}))})]}),Object(f.jsxs)("div",{className:"tab-collection",children:[Object(f.jsx)("div",{className:"header",children:"Form"}),Object(f.jsx)(ub.a,{value:i>=6&&i<=7&&i,onChange:ge,"aria-label":"components tabs",indicatorColor:"primary",id:"jride-components-tabs",className:i>=6&&i<=7?"selected":"",children:ye&&ye.map((function(e){return Object(f.jsx)(mb.a,{label:e.componentLabel,value:e.tabValue,disableRipple:!0},e.componentName)}))})]})]}),Object(f.jsx)("div",{className:"storyComponents-tabPanel",children:Object(f.jsx)(Pb,Object(s.a)(Object(s.a)({},m),{},{changeSelectedInstance:b,fetchInstanceDetails:p,fetchingInstanceDetails:j,addInstanceDetail:h,generateTrainingData:v,generatedPhrases:O,updateTrainingPhrase:y,updateResponse:N,deleteTrainingPhrase:S,deleteResponse:T,addUpdateHTTPAction:A,deleteHTTPAction:E,deleteInstance:_,addUpdateSlotSetAction:re,deleteSlotSetAction:le,addComponentItems:F,toggleNewHTTPActionForm:I,toggleNewSlotForm:D,toggleNewSlotMappingForm:R,toggleNewResetActionForm:P,toggleNewEmailActionForm:L,toggleNewGoogleActionForm:U,showNewHTTPActionForm:M,showNewSlotForm:B,showNewSlotsResetForm:H,showNewSlotsMappingForm:be,showNewEmailActionForm:G,showNewGoogleActionForm:V,searchTrainingExample:z,trainingExampleSearchResults:q,clearTrainingExampleSearch:W,addUpdateSlot:Q,deleteSlot:J,fetchEntities:se,entities:de,addUpdateSlotMapping:pe,deleteSlotMapping:je,addUpdateEmailAction:Z,deleteEmailAction:X,addUpdateGoogleAction:ee,deleteGoogleAction:te}))})]})]})};Rb.defaultProps={trainingExampleSearchResults:[]};var Lb=Rb,Ub=Object(aa.b)((function(e){var t=e.storyComponents,n=t.intents,a=t.intentsFetched,c=t.utterances,o=t.utterancesFetched,s=t.selectedComponent,i=t.selectedComponentValue,r=t.selectedInstanceName,l=t.instanceDetails,d=t.fetchingInstanceDetails,u=t.generatedPhrases,m=t.httpActions,b=t.httpActionsFetched,p=t.slots,j=t.slotsFetched,h=t.showNewHTTPActionForm,f=t.showNewSlotForm,O=t.showNewSlotsMappingForm,v=t.showNewSlotsResetForm,g=t.trainingExampleSearchResults,x=t.entities,y=t.slotsSetActions,N=t.slotsSetActionsFetched,S=t.slotMappings,T=t.slotMappingsFetched,k=t.emailActions,C=t.emailActionsFetched,w=t.showNewEmailActionForm,_=t.googleActions,A=t.googleActionsFetched,E=t.showNewGoogleActionForm,F=e.stories,I=F.storiesFetched,D=F.storiesList,P=[{componentsList:n,componentsListFetched:a,componentName:"intent",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Intents",tabHeader:"story",tabValue:0,componentDetailHeader:"Select intent"},{componentsList:c,componentsListFetched:o,componentName:"utterance",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Utterances",tabHeader:"story",tabValue:1,componentDetailHeader:"Select utterance"},{componentsList:m,componentsListFetched:b,componentName:"action",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Actions",name_propertyName:"action_name",slots:p,pickerName:"picker_api_actions",tabHeader:"story",tabValue:2,componentDetailHeader:"Select action"},{componentsList:y,componentsListFetched:N,componentName:"reset_slots",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Reset Slots",slots:p,pickerName:"picker_reset_slots",tabHeader:"story",tabValue:3,componentDetailHeader:"Select reset action"},{componentsList:k,componentsListFetched:C,componentName:"email_action",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Email Actions",slots:p,pickerName:"picker_email_action",tabHeader:"story",tabValue:4,componentDetailHeader:"Select email action",name_propertyName:"action_name"},{componentsList:_,componentsListFetched:A,componentName:"google_action",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Google Actions",slots:p,pickerName:"picker_google_action",tabHeader:"story",tabValue:5,componentDetailHeader:"Select google action"},{componentsList:p,componentsListFetched:j,componentName:"slot",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Slots",pickerName:"picker_slots",tabHeader:"form",tabValue:6,componentDetailHeader:"Select slot"},{componentsList:S,componentsListFetched:T,componentName:"mapped_slot",selectedInstanceName:r,correspondingStories:nu(r,D),instanceDetails:l,componentLabel:"Slot Mappings",pickerName:"picker_mapped_slots",tabHeader:"form",tabValue:7,componentDetailHeader:"Select mapped slot",name_propertyName:"slot",intents:n,slots:p}];return{intents:n,intentsFetched:a,utterances:c,utterancesFetched:o,selectedComponent:s,selectedComponentValue:i,storiesFetched:I,selectedTabProps:P[s],tabPanelProps:P,fetchingInstanceDetails:d,generatedPhrases:u,httpActions:m,httpActionsFetched:b,showNewHTTPActionForm:h,showNewSlotForm:f,showNewSlotsResetForm:v,showNewSlotsMappingForm:O,trainingExampleSearchResults:g,slotsFetched:j,slotsSetActionsFetched:N,slots:p,botsState:e.bots,globalState:e.global,entities:x,emailActions:k,emailActionsFetched:C,showNewEmailActionForm:w,showNewGoogleActionForm:E}}),(function(e){return{fetchIntents:function(t){e(et(t))},fetchAllResponses:function(t){e(st(t))},changeSelectedComponent:function(t){e(Ze(t))},fetchStories:function(t){e(Yd(t))},changeSelectedInstance:function(t){e(Xe(t))},fetchInstanceDetails:function(t,n,a){e(Zt(t,n,a))},deleteInstance:function(t,n,a,c){e(Xt(t,n,a,c))},addInstanceDetail:function(t,n,a,c){e(function(e,t,n,a){return function(c){var o;switch(a){case"intent":if(!t)return void c(Kt());o=Array.isArray(t)?t:[t],c(yt(e,o,n,{onSuccess:Yt,onError:wn}));break;case"utterance":c(Nt(e,t,n,{onSuccess:Qt,onError:wn}))}}}(t,n,a,c))},generateTrainingData:function(t,n){e(function(e,t){return xt(e,t,{onSuccess:Jt,onError:wn})}(t,n))},fetchSlots:function(t){e(dt(t))},fetchEmailActions:function(t){e(Ue(t))},fetchGoogleActions:function(t){e(qe(t))},fetchHTTPActions:function(t){e(rt(t))},fetchSlotSetActions:function(t){e(ht(t))},fetchSlotMappings:function(t){e(Ot(t))},fetchCustomActions:function(t){e(pt(t))},updateTrainingPhrase:function(t,n){e(function(e,t){return St(e,t,{onSuccess:$t,onError:wn})}(t,n))},updateResponse:function(t,n){e(function(e,t){return kt(e,t,{onSuccess:$t,onError:wn})}(t,n))},deleteTrainingPhrase:function(t,n){e(function(e,t){return Tt(e,t,{onSuccess:en,onError:wn})}(t,n))},deleteResponse:function(t,n){e(function(e,t){return Ct(e,t,{onSuccess:en,onError:wn})}(t,n))},addUpdateHTTPAction:function(t,n){e(function(e,t){return function(n){n(Ut(e,t,{onSuccess:function(t,n){return Lt(t,n,e)},onError:wn}))}}(t,n))},addUpdateEmailAction:function(t,n){e(function(e,t){return function(n){n(Be(e,t,{onSuccess:function(t,n){return He(t,n,e)},onError:wn}))}}(t,n))},addUpdateGoogleAction:function(t,n){e(function(e,t){return function(n){n(Ke(e,t,{onSuccess:function(t,n){return Ye(t,n,e)},onError:wn}))}}(t,n))},deleteHTTPAction:function(t,n){e(function(e,t){return function(n){n(Bt(e,t,{onSuccess:function(t,n){return Mt(t,n,e)},onError:wn}))}}(t,n))},deleteEmailAction:function(t,n){e(function(e,t){return function(n){n(Ge(e,t,{onSuccess:function(t,n){return Ve(t,n,e)},onError:wn}))}}(t,n))},deleteGoogleAction:function(t,n){e(function(e,t){return function(n){n(Qe(e,t,{onSuccess:function(t,n){return Je(t,n,e)},onError:wn}))}}(t,n))},addUpdateSlotSetAction:function(t,n){e(function(e,t){return function(n){n(Ht(e,t,{onSuccess:function(t,n){return Gt(t,n,e)},onError:wn}))}}(t,n))},deleteSlotSetAction:function(t,n){e(function(e,t){return function(n){n(Vt(e,t,{onSuccess:function(t,n){return zt(t,n,e)},onError:wn}))}}(t,n))},addComponentItems:function(t,n,a){e(an(t,n,a))},toggleNewHTTPActionForm:function(t){e(function(e){return{type:he,payload:{showFlag:e}}}(t))},toggleNewSlotForm:function(t){e(function(e){return{type:fe,payload:{showFlag:e}}}(t))},toggleNewResetActionForm:function(t){e(function(e){return{type:Oe,payload:{showFlag:e}}}(t))},toggleNewSlotMappingForm:function(t){e(function(e){return{type:me,payload:{showFlag:e}}}(t))},toggleNewEmailActionForm:function(t){e(function(e){return{type:Ae,payload:{showFlag:e}}}(t))},toggleNewGoogleActionForm:function(t){e(function(e){return{type:Re,payload:{showFlag:e}}}(t))},searchTrainingExample:function(t,n){e(function(e,t){return d("".concat(j.server,"/api/bot/").concat(e,"/intents/search"),{args:{data:t},method:"POST",success:cn,error:wn})}(t,n))},clearTrainingExampleSearch:function(){e({type:Te})},addUpdateSlot:function(t,n){e(It(t,n))},deleteSlot:function(t,n){e(function(e,t){return function(n){n(Dt(e,t,{onSuccess:function(t,n){return Pt(t,n,e)},onError:wn}))}}(t,n))},addUpdateSlotMapping:function(t,n){e(_t(t,n))},deleteSlotMapping:function(t,n){e(function(e,t){return function(n){n(At(e,t,{onSuccess:function(t,n){return Et(t,n,e)},onError:wn}))}}(t,n))},startTour:function(t){e(Ln(t))},fetchEntities:function(t){e(mt(t))}}}))(Lb),Mb="POPULATE_TRAINING_HISTORY",Bb="POPULATE_INVALID_TRAINING_DATA",Hb="HIDE_INVALID_TRAINING_DATA_DIALOG",Gb="FETCHING_TRAINING_HISTORY",Vb="SHOW_UNSAVED_STORY_DIALOG",zb=function(e){var t;return{type:Mb,payload:{trainingHistory:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.training_history}}},qb=function(e){return function(t){t({type:Gb}),t(d("".concat(j.server,"/api/bot/").concat(e,"/train/history"),{method:"GET",success:zb,error:wn}))}},Wb=function(e,t){return function(n){n(kn(null===e||void 0===e?void 0:e.message,"success")),n(qb(null===t||void 0===t?void 0:t.botId))}},Kb=function(e,t){return function(n){n(Tn());for(var a,c=function(e){var t=(null===e||void 0===e?void 0:e.intents)||[],n=[];t.forEach((function(e){"undefined"!==typeof e.count&&0!==e.count||n.push(e.name)}));var a=(null===e||void 0===e?void 0:e.utterances)||[],c=[];return a.forEach((function(e){"undefined"!==typeof e.count&&0!==e.count||c.push(e.name)})),{intents:n,utterances:c}}(null===e||void 0===e?void 0:e.data),o=!0,s=Object.keys(c),i=0;i<s.length;i++){if(c[s[i]].length>0){o=!1;break}}o?(n((a=t.botId,w("train","trainBot"),d("".concat(j.server,"/api/bot/").concat(a,"/train"),{method:"POST",callbackParams:{botId:a},success:Wb,error:wn}))),n({type:Hb})):n(function(e){return{type:Bb,payload:{invalidTrainingData:e}}}(c))}},Yb=function(e,t){return t?{type:Vb}:(w("train","trainBotClicked"),function(t){t(Sn()),t(function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/data/count"),{method:"GET",callbackParams:{botId:e},success:Kb,error:wn})}(e))})},Qb=function(e){return kn(null===e||void 0===e?void 0:e.message,"success")},Jb=function(e){var t,n,c,o,s,i,r,l,d,u,m=e.trainingHistory,p=e.trainingHistoryFetched,j=e.fetchTrainingHistory,h=e.reloadModel,O=e.startModelTesting,v=e.testingEventResponseReceived,g=e.lastTestingReport,x=e.fetchModelTestingLogs,y=Object(_c.i)().params.botId;Object(a.useEffect)((function(){j(y),g||x(y)}),[]);var k=[];return p&&(k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=-1,n=!1,a=[];e.forEach((function(e){var c=e.start_timestamp,o=e.end_timestamp,s=e.status,i=0;if(o||"Fail"===s||(n=!0),o&&n){var r=S(c,o);t+=r}(o||"Fail"===s)&&(i="undefined"===typeof o?"-":N(e.start_timestamp,e.end_timestamp));var l={_id:e._id,user:e.user,status:e.status,start_timestamp:e.start_timestamp,total_time:i};e.end_timestamp&&(l.end_timestamp=e.end_timestamp),e.model_path&&(l.model_path=e.model_path),e.exception&&(l.exception=e.exception),a.push(l)}));var c="-";if(n){if(0!==e.length&&-1!==t)if(t/=e.length,c=T(t),localStorage.getItem("trainingTime")){var o=JSON.parse(localStorage.getItem("trainingTime")),s=S(o.startTime,new Date);c=o.averageTime<s?"almost done":"".concat(T(o.averageTime-s)," to go")}else localStorage.setItem("trainingTime",JSON.stringify({averageTime:t,startTime:new Date})),c="Calculating...";else-1===t&&(c="almost done");a[0].total_time=void 0===a[0].end_timestamp?c:"-",a[0].end_timestamp="-"}else localStorage.removeItem("trainingTime");return a}(m)),Object(f.jsxs)("div",{className:"app-page trainBot-wrapper",children:[Object(f.jsxs)("div",{className:"trainBot-heading",children:[Object(f.jsxs)("div",{className:"trainBot-title",children:[Object(f.jsx)("h1",{className:"app-heading",children:"Training History"}),Object(f.jsx)("button",{type:"button",className:"refresh-action",onClick:function(){j(y)},children:Object(f.jsx)(qo.l,{className:"ibc-icon"})})]}),Object(f.jsxs)("div",{className:"buttons-wrapper",children:[Object(f.jsxs)("button",{type:"button",className:"app-btn-icon",onClick:function(){return h(y)},children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:Object(f.jsx)($s.f,{className:"btn-icon"})}),Object(f.jsx)("span",{className:"btn-text",children:"Reload Model"})]}),Object(f.jsxs)("button",{type:"button",className:"app-btn-icon",disabled:!v,onClick:function(){return O(y)},children:[Object(f.jsx)("div",{className:"btn-icon-wrapper",children:v?Object(f.jsx)(da.w,{className:"btn-icon"}):Object(f.jsx)(Lo.a,{className:"btn-icon loader"})}),Object(f.jsx)("span",{className:"btn-text",children:"Test Model"})]})]})]}),!!g&&(2===(null===(t=g.data)||void 0===t?void 0:t.length)||!!g.exception)&&Object(f.jsxs)("div",{className:"testing-overview",children:[Object(f.jsx)("h2",{className:"overview-title",children:"Model Testing Results"}),2===(null===(n=g.data)||void 0===n?void 0:n.length)&&Object(f.jsxs)("div",{className:"data-wrapper",children:[Object(f.jsxs)("div",{className:"data",children:[Object(f.jsx)("span",{className:"data-title",children:"Action Prediction Accuracy: "}),Object(f.jsxs)("span",{className:"data-value",children:[100*(null===(c=g.data[0])||void 0===c||null===(o=c.accuracy)||void 0===o?void 0:o.toFixed(2)),"%"]})]}),Object(f.jsxs)("div",{className:"data",children:[Object(f.jsx)("span",{className:"data-title",children:"Intent Prediction Accuracy: "}),Object(f.jsxs)("span",{className:"data-value",children:[100*(null===(s=g.data[1])||void 0===s||null===(i=s.intent_evaluation)||void 0===i||null===(r=i.accuracy)||void 0===r?void 0:r.toFixed(2)),"%"]})]})]}),Object(f.jsxs)("div",{className:"data-wrapper",children:[Object(f.jsxs)("div",{className:"data",children:[Object(f.jsx)("span",{className:"data-title",children:"Result: "}),Object(f.jsx)("span",{className:"data-colored-value",children:"SUCCESS"===(null===(l=g.data)||void 0===l?void 0:l.status)?Object(f.jsx)("span",{className:"success",children:"Success"}):Object(f.jsx)("span",{className:"error",children:"Failure"})})]}),Object(f.jsxs)("div",{className:"data",children:[Object(f.jsx)("span",{className:"data-title",children:"Tested on: "}),Object(f.jsx)("span",{className:"data-value",children:b()(b.a.utc(g.end_timestamp).toDate()).format("DD MMM hh:mm")})]})]}),g.exception&&Object(f.jsx)("div",{className:"data-wrapper",children:Object(f.jsxs)("div",{className:"data",children:[Object(f.jsx)("span",{className:"data-title",children:"Exception: "}),Object(f.jsx)("span",{className:"data-value data-exception",title:g.exception,children:g.exception})]})}),Object(f.jsxs)(ra.a,{to:"/bot/".concat(y,"/testing"),className:"testing-page-link",children:["VIEW LOGS ",Object(f.jsx)(zo.c,{className:"icon"})]})]}),!p&&Object(f.jsx)(Mo,{text:"Fetching training history..."}),p&&Object(f.jsx)("div",{className:"trainBot-content",children:Object(f.jsxs)("div",{className:"trainingHistory-wrapper",children:[(null===(d=k)||void 0===d?void 0:d.length)>0&&Object(f.jsx)(mi,{tableData:k,columns:[{Header:"User",accessor:"user"},{Header:"Start time",accessor:"start_timestamp",Cell:function(e){var t=e.value;return b()(b.a.utc(t).toDate()).format("DD MMM YY hh:mm")}},{Header:"End time",accessor:"end_timestamp",Cell:function(e){var t=e.value;return"-"===t?"-":b()(b.a.utc(t).toDate()).format("DD MMM YY hh:mm")}},{Header:"Total time",accessor:"total_time"},{Header:"Status",accessor:"status",Cell:function(e){var t=e.row;return t.original.status+(t.original.exception?" : ".concat(t.original.exception):"")},style:{whiteSpace:"break-spaces"}}],className:"trainingHistory-list-view"}),0===(null===(u=k)||void 0===u?void 0:u.length)&&Object(f.jsx)("p",{className:"no-data",children:"No training history found!"})]})})]})};Jb.defaultProps={};var Zb=Jb,Xb=Object(aa.b)((function(e){var t=e.trainBot,n=t.trainingHistory,a=t.trainingHistoryFetched,c=e.modelTesting;return{trainingHistory:n,trainingHistoryFetched:a,testingEventResponseReceived:c.testingEventResponseReceived,lastTestingReport:c.lastTestingReport}}),(function(e){return{fetchTrainingHistory:function(t){e(qb(t))},reloadModel:function(t){e(function(e){return d("".concat(j.server,"/api/bot/").concat(e,"/model/reload"),{success:Qb,error:wn})}(t))},startModelTesting:function(t){e(_d(t))},fetchModelTestingLogs:function(t){e(kd(t))}}}))(Zb),$b=n(354),ep=Object(_c.j)((function(e){var t=e.invalidTrainingData,n=e.showInvalidTrainingDataDialog,c=e.hideInvalidTrainingDataDialog,o=e.storiesState,s=e.showUnsavedStoryDialog,i=e.validateDataAndTrainBot,r=e.resetStoryData,l=t.intents,d=t.utterances,u=Object(_c.i)().params,m=u.botId,b=u.storyId,p=function(){c()};return s?Object(f.jsx)(Pa,{open:s,onClose:p,title:"Discard Story?",onConfirm:function(){b&&r(b,(null===o||void 0===o?void 0:o.storiesList)||[]),i(m)},children:Object(f.jsx)("p",{style:{margin:0},children:"You have an unsaved story. Do you wish to proceed to training without saving the story? This will discard changes made to the story."})}):Object(f.jsx)(Pa,{open:n,onClose:p,title:n?"Invalid Data":"",noDialogActions:!0,children:n&&Object(f.jsxs)(a.Fragment,{children:[Object(f.jsxs)(Ea.a,{children:[Object(f.jsx)(Dm.a,{children:"The following components have no training phrases / responses. Please add them before training."}),Object(f.jsxs)(Pm.a,{children:[!(null===l||void 0===l||!l.length)&&Object(f.jsxs)(Rm.a,{children:[Object(f.jsx)($b.a,{children:Object(f.jsx)(Vo.c,{className:"icon"})}),Object(f.jsx)(Ib.a,{primary:"Intents"})]}),null===l||void 0===l?void 0:l.map((function(e){return Object(f.jsx)(Rm.a,{children:Object(f.jsx)(Ib.a,{inset:!0,primary:e})},e)})),!(null===d||void 0===d||!d.length)&&Object(f.jsxs)(Rm.a,{children:[Object(f.jsx)($b.a,{children:Object(f.jsx)(Vo.g,{className:"icon"})}),Object(f.jsx)(Ib.a,{primary:"Utterances"})]}),null===d||void 0===d?void 0:d.map((function(e){return Object(f.jsx)(Rm.a,{children:Object(f.jsx)(Ib.a,{inset:!0,primary:e})},e)}))]})]}),Object(f.jsxs)(Fa.a,{children:[Object(f.jsx)(Ia.a,{onClick:p,color:"secondary",children:"Close"}),Object(f.jsx)(Ia.a,{onClick:function(){c(),I.push("/bot/".concat(m,"/components"))},color:"primary",children:"Open Story Components"})]})]})})})),tp=Object(aa.b)((function(e){var t=e.trainBot;return{invalidTrainingData:t.invalidTrainingData,showInvalidTrainingDataDialog:t.showInvalidTrainingDataDialog,showUnsavedStoryDialog:t.showUnsavedStoryDialog,storiesState:e.stories}}),(function(e){return{hideInvalidTrainingDataDialog:function(){return e({type:Hb})},validateDataAndTrainBot:function(t){return e(Yb(t))},resetStoryData:function(t,n){return e(function(e,t){var n=t.find((function(t){return t._id===e}));return{type:fu,payload:{originalStory:n}}}(t,n))}}}))(ep),np=function(e){var t=e.promptOn.some((function(e){return e})),n=Object(a.useState)(!1),c=Object(sa.a)(n,2),o=c[0],s=c[1],i=Object(a.useState)(!1),r=Object(sa.a)(i,2),l=r[0],d=r[1],u=Object(a.useState)(null),m=Object(sa.a)(u,2),b=m[0],p=m[1];Object(a.useEffect)((function(){l&&(I.push((null===b||void 0===b?void 0:b.pathname)||"/bots"),s(!1),d(!1),p(null))}),[l]);return Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(_c.a,{when:t,message:function(e){return!!l||(s(!0),p(e),!1)}}),Object(f.jsx)(Pa,{open:o,title:"Attention!",onClose:function(){s(!1),p(!1)},onConfirm:function(){d(!0)},children:"All unsaved changes on this page will be lost. Are you sure you want to proceed?"})]})};np.defaultProps={promptOn:[]};var ap=np,cp=function(e){var t=e.chat,n=e.onClose,c=e.closePanel,o=e.sendChatMessage,s=e.global,i=e.resetChat,r=t.open,l=t.typing,d=t.chatData,u=s.activeTour,m=s.tourStepIndex,b="/bot/:botId"===u&&[3,4].includes(m),p=Object(a.useState)(""),j=Object(sa.a)(p,2),h=j[0],v=j[1],g=Object(a.useRef)(),x=Object(_c.i)().params.botId,y=function(){var e;g.current&&(g.current.scrollTop=null===(e=g.current)||void 0===e?void 0:e.scrollHeight)};Object(a.useEffect)((function(){setTimeout(y,20)}),[d]);return Object(f.jsxs)("div",{className:"chat-panel ".concat(r?"cp-open":""," ").concat(b?"cp-open-tour":""),id:"jride-chatpanel",children:[Object(f.jsxs)("div",{className:"cp-head",children:[Object(f.jsx)("button",{type:"button",onClick:function(){c(),n()},className:"icon-button-clear cp-headbtn",children:Object(f.jsx)(vs.a,{className:"ibc-icon cp-headicon"})}),Object(f.jsx)("h1",{className:"cp-headtext",children:"Chatbox"}),Object(f.jsx)(ka.a,{title:"Reset Chat",placement:"left",children:Object(f.jsx)("button",{type:"button",onClick:function(){i(x),v("")},className:"icon-button-clear cp-resetbtn",children:Object(f.jsx)(ua.v,{className:"ibc-icon cp-reseticon"})})})]}),Object(f.jsxs)("div",{className:"cp-chat-wrapper",ref:g,children:[d.map((function(e,t){var n="bot"===e.event;return Object(f.jsxs)("div",{className:"cp-msg-wrapper ".concat(n?"cp-msg-bot":"cp-msg-user"),children:[n&&Object(f.jsx)("div",{className:"msg-icon-wrapper",children:Object(f.jsx)(ua.e,{className:"msg-icon"})}),Xs.a.isArray(e.text)?Object(f.jsx)("div",{className:"msgs-wrapper",children:e.text.map((function(e,t){return!!e.text&&Object(f.jsx)("p",{className:"chat-msg",children:O(e.text||"")},t)}))}):Object(f.jsx)("p",{className:"chat-msg",children:e.text}),!n&&Object(f.jsx)("div",{className:"msg-icon-wrapper",children:Object(f.jsx)(ua.A,{className:"msg-icon"})})]},t)})),l&&Object(f.jsx)("div",{className:"typing",children:Object(f.jsx)("div",{className:"dot-pulse"})})]}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h.trim()&&o(x,h),v("")},className:"cp-input-form",children:[Object(f.jsx)("input",{type:"text",placeholder:"Type a message",onChange:function(e){return v(e.target.value)},className:"msg-input",value:h}),Object(f.jsx)("button",{className:"icon-button-clear msg-send",type:"submit",children:Object(f.jsx)(da.A,{className:"ibc-icon icon send-icon"})})]})]})};cp.defaultProps={onClose:function(){}};var op=cp,sp=Object(aa.b)((function(e){return{chat:e.chat,global:e.global}}),(function(e){return{closePanel:function(){return e(H())},sendChatMessage:function(t,n){return e(function(e,t){return function(n){w("chat","chat"),n({type:L,payload:t}),n(d("".concat(j.server,"/api/bot/").concat(e,"/chat"),{args:{data:t},method:"POST",success:V,error:G}))}}(t,n))},resetChat:function(t){return e(function(e){return w("chat","reset"),d("".concat(j.server,"/api/bot/").concat(e,"/chat"),{args:{data:"/restart"},method:"POST",success:z,error:q})}(t))}}}))(op),ip=n(175),rp=function(e){var t,n,c=e.onLogout,o=e.auth.userData,s=e.global,i=s.uiConfigs,r=s.activeTour,l=s.tourStepIndex,d=e.botChanged,u=e.startPathTour,m=i.sideMenuType,b=void 0===m?"expandable":m,p="/bot/:botId"===r&&0===l,j=Object(a.useState)(-1),h=Object(sa.a)(j,2),O=h[0],v=h[1],g=Object(a.useState)(!1),x=Object(sa.a)(g,2),y=x[0],N=x[1],S="".concat(null===o||void 0===o||null===(t=o.first_name)||void 0===t?void 0:t.charAt(0)).concat(null===o||void 0===o||null===(n=o.last_name)||void 0===n?void 0:n.charAt(0)),T=null,k=Object(_c.i)(),C=k.url,_=k.params,A=function(e){var t=e.botId,n=e.storyId,a=e.formId,c=e.startPathTour,o=c?[{Icon:da.t,name:"Take a tour",isButton:!0,onButtonClick:function(){c()}}]:[];return[{Icon:ua.g,name:"Conversations",link:"/bot/".concat(t),highlightUrls:["/bot/".concat(t,"/story/").concat(n),"/bot/".concat(t,"/form/").concat(a)]},{Icon:Vo.d,name:"Components",link:"/bot/".concat(t,"/components")},{Icon:bi.b,name:"Bot Setup",submenu:[{Icon:ua.d,name:"Configure Client",link:"/bot/".concat(t,"/client")},{Icon:qo.c,name:"Training History",link:"/bot/".concat(t,"/train")},{Icon:ua.x,name:"Administration",link:"/bot/".concat(t,"/admin")},{Icon:ua.w,name:"Model Configuration",link:"/bot/".concat(t,"/config")}]},{Icon:ip.a,name:"Usage",submenu:[{Icon:ua.c,name:"Chat History",link:"/bot/".concat(t,"/history")},{Icon:qo.d,name:"Analytics",link:"/bot/".concat(t,"/analytics")},{Icon:Ks.a,name:"Action Logs",link:"/bot/".concat(t,"/logs")},{Icon:ua.l,name:"File Upload Logs",link:"/bot/".concat(t,"/uploadlogs")},{Icon:da.w,name:"Model Testing Logs",link:"/bot/".concat(t,"/testing")}]},{Icon:da.r,name:"Help",submenu:[].concat(o,[{Icon:ua.C,name:"Getting Started",link:"https://www.digite.com/kairon/getting-started",isExternalLink:!0,onExternalLinkClick:function(){w("help","gettingStarted")}},{Icon:ua.h,name:"Join us on Discord",link:"https://discord.gg/AUFe5Z6QgZ",isExternalLink:!0,onExternalLinkClick:function(){w("help","discordHelpMenu")}},{Icon:ua.k,name:"Server Documentation",link:"http://kairon-docs.digite.com/",isExternalLink:!0,onExternalLinkClick:function(){w("help","serverDocumentation")}},{Icon:da.u,name:"Contact: kairon@digite.com",link:"mailto:kairon@digite.com",isExternalLink:!0,onExternalLinkClick:function(){w("help","contactUs")}}])}]}({botId:_.botId,storyId:_.storyId,formId:_.formId,startPathTour:u}),E=function(){"expandable"===b&&(v(-1),N(!1),clearTimeout(T))},F=function(){"expandable"!==b&&v(-1)},I=function(e){return Object(f.jsx)("div",{className:"expandable"===b?"expansion-panel":"app-popup nav-popup",children:e.map((function(e,t){var n=e.Icon,a=e.isExternalLink,c=e.isButton,o=e.onExternalLinkClick,s=e.onButtonClick,i=e.link===C;return a?Object(f.jsxs)("a",{href:e.link,className:"subnav-link ".concat(i?"subnav-selected":""),onClick:function(){E(),"function"===typeof o&&o()},target:"_blank",rel:"noreferrer",children:[Object(f.jsx)("div",{className:"subnav-icon-wrapper",children:Object(f.jsx)(n,{className:"subnav-icon"})}),Object(f.jsx)("span",{className:"subnav-text",children:e.name})]},t):c?Object(f.jsxs)("div",{className:"subnav-link ".concat(i?"subnav-selected":""),role:"button",tabIndex:0,onClick:s,children:[Object(f.jsx)("div",{className:"subnav-icon-wrapper",children:Object(f.jsx)(n,{className:"subnav-icon"})}),Object(f.jsx)("span",{className:"subnav-text",children:e.name})]},t):Object(f.jsxs)(ra.a,{to:e.link,className:"subnav-link ".concat(i?"subnav-selected":""),children:[Object(f.jsx)("div",{className:"subnav-icon-wrapper",children:Object(f.jsx)(n,{className:"subnav-icon"})}),Object(f.jsx)("span",{className:"subnav-text",children:e.name})]},t)}))})};return Object(f.jsxs)("div",{className:"navbar ".concat((y||p)&&"expandable"===b?"navbar-open":""," ").concat(p?"navbar-defaultOpen":""),onMouseEnter:function(){"expandable"===b&&(T=setTimeout((function(){return N(!0)}),300))},onMouseLeave:E,id:"jride-navbar-menu",children:[Object(f.jsx)(ra.a,{to:"/bots",onClick:function(){d()},children:Object(f.jsxs)("div",{className:"navlogo-wrapper",children:[Object(f.jsx)("img",{src:"/assets/logo/logo.svg",alt:"Kairon",className:"navlogo"}),Object(f.jsx)("img",{src:"/assets/logo/kAIron.svg",alt:"kAIron",className:"navkairon"})]})}),Object(f.jsx)("div",{className:"navlinks",children:A.map((function(e,t){var n=e.Icon,c=e.submenu,o=e.link,s=e.name,i=function(e){var t=e.submenu,n=e.link,a=e.highlightUrls;return!!(null===a||void 0===a?void 0:a.includes(C))||(n?C===n:null===t||void 0===t?void 0:t.some((function(e){return e.link===C})))}({submenu:c,link:o,highlightUrls:e.highlightUrls}),r="expandable"===b?O===t||i&&y&&-1===O:O===t;return Object(f.jsx)(a.Fragment,{children:c?Object(f.jsxs)("div",{className:"subnav",onMouseEnter:function(){return e=t,void("expandable"!==b&&v(e));var e},onMouseLeave:F,children:[Object(f.jsxs)("div",{className:"nav-link ".concat(i?"nl-selected":""),role:"button",tabIndex:0,onClick:function(){"expandable"===b&&v(r?-1:t)},children:[Object(f.jsx)("div",{className:"link-icon-wrapper",children:Object(f.jsx)(n,{className:"link-icon"})}),"expandable"===b?Object(f.jsxs)("span",{className:"link-text",children:[s," ",Object(f.jsx)(zo.a,{className:"sublist-icon ".concat(r?"open-sublist-icon":"")})]}):Object(f.jsx)(ua.b,{className:"submenu-icon ".concat(i?"submenu-icon-selected":"")}),r&&"expandable"!==b&&I(c)]}),r&&"expandable"===b&&I(c)]}):Object(f.jsx)(ka.a,{title:"expandable"!==b?s:"",placement:"right",children:Object(f.jsxs)(ra.a,{to:o,className:"nav-link ".concat(i?"nl-selected":""),onClick:function(){return v(-1)},children:[Object(f.jsx)("div",{className:"link-icon-wrapper",children:Object(f.jsx)(n,{className:"link-icon"})}),"expandable"===b&&Object(f.jsx)("span",{className:"link-text",children:s})]})})},t)}))}),o&&Object(f.jsxs)("div",{className:"nav-user",role:"button",tabIndex:0,onClick:function(){"expandable"===b&&c()},children:[Object(f.jsx)("div",{className:"profile-photo-wrapper",children:Object(f.jsx)("div",{className:"user-photo",children:S})}),"expandable"===b?Object(f.jsx)("div",{className:"user-text",children:"Logout"}):Object(f.jsx)("div",{className:"app-popup user-popup",children:Object(f.jsxs)("div",{className:"user-popup-item",role:"button",tabIndex:"0",onClick:c,children:[Object(f.jsx)(ua.q,{className:"popup-icon"}),Object(f.jsx)("span",{className:"popup-text",children:"Logout"})]})})]})]})},lp=function(e){var t=e.chat,n=e.closePanel,a=e.openPanel,c=e.toggleFeedbackWidget,o=e.global,s=Object(_c.i)().params.botId,i=o.activeTour,r=o.tourStepIndex,l="/bot/:botId"===i&&4===r;return Object(f.jsxs)("div",{className:"rightbar",children:[Object(f.jsx)(ka.a,{title:"Test Bot",placement:"left",children:Object(f.jsx)("button",{type:"button",onClick:function(){t.open?n():a()},className:"icon-button-clear toggle-chat ".concat(l?"active-animated":""),children:Object(f.jsx)(Id.a,{className:"ibc-icon chat-icon"})})}),Object(f.jsx)(ka.a,{title:"Feedback",placement:"left",children:Object(f.jsx)("button",{type:"button",onClick:function(){c(!0)},className:"icon-button-clear toggle-feedback",children:Object(f.jsx)(da.m,{className:"ibc-icon feedback-icon"})})}),Object(f.jsx)(ka.a,{title:"Upload / Download Files",placement:"left",children:Object(f.jsx)(ra.a,{to:"/bot/".concat(s,"/fileUpload"),className:"icon-button-clear file-upload",children:Object(f.jsx)(Ks.h,{className:"ibc-icon file-upload-icon"})})})]})},dp=n(176),up=function(e){var t=e.toggleTheme,n=e.bots,c=e.validateDataAndTrainBot,o=e.botChanged,s=e.unsavedStory,i=Object(_c.i)().params,r=i.botId,l=Object(a.useState)(i.botId),d=Object(sa.a)(l,2),u=d[0],m=d[1];return Object(f.jsxs)("div",{className:"topbar",children:[Object(f.jsxs)("div",{className:"tb-details",id:"jride-topbar-breadcrumb",children:[Object(f.jsx)("h1",{className:"tb-header",children:Object(f.jsx)(ra.a,{to:"/bots",onClick:function(){o()},children:"Chatbots"})}),Object(f.jsx)("div",{className:"tb-active"}),n.botsFetched&&Object(f.jsx)(Qa.a,{value:u,onChange:function(e){m(e.target.value),I.push("/bot/".concat(e.target.value)),o()},IconComponent:qo.e,className:"tb-select",children:n.botsList.map((function(e){return Object(f.jsx)(Ja.a,{value:e._id,children:e.name},e._id)}))})]}),Object(f.jsxs)("div",{className:"tb-right-wrapper",children:[Object(f.jsxs)("button",{type:"button",onClick:function(){c(r,s)},className:"tb-train",id:"jride-topbar-train",children:["Train Bot",Object(f.jsx)("div",{className:"tb-trainicon-wrapper",children:Object(f.jsx)(qo.c,{className:"tb-trainicon"})})]}),Object(f.jsx)("button",{type:"button",className:"icon-button-clear tb-theme",onClick:t,children:Object(f.jsx)(dp.a,{className:"ibc-icon"})})]})]})},mp=function(e){var t=e.children,n=e.chat,c=e.openPanel,o=e.closePanel,s=e.toggleTheme,i=e.onLogout,r=e.auth,l=e.fetchBots,d=e.bots,u=e.toggleFeedbackWidget,m=e.story,b=e.validateDataAndTrainBot,p=e.botChanged,j=e.pageTitle,h=e.global,O=e.startTour,v=e.form,g=Object(_c.i)(),x=g.params,y=g.path;return Object(a.useEffect)((function(){var e="Kairon - AI Powered Contextual Chatbot Builder";document.title=j?"".concat(j," | ").concat(e):e}),[j]),Object(a.useEffect)((function(){r.userData&&(d.fetched||l(r.userData))}),[r.userData]),Object(a.useEffect)((function(){if(d.fetched&&d.botsList){if(d.botsList.some((function(e){return e.id===x.botId})))return;I.replace("/bots")}}),[d.botsList]),Object(f.jsxs)("div",{className:"app-layout",children:[Object(f.jsx)(rp,{onLogout:i,auth:r,botChanged:p,global:h,startPathTour:sn(y)?function(){return O(y)}:void 0}),Object(f.jsx)(up,{toggleTheme:s,bots:d,validateDataAndTrainBot:b,botChanged:p,unsavedStory:m.unsavedStory}),Object(f.jsx)("div",{className:"appcontent",children:t}),Object(f.jsx)(lp,{global:h,chat:n,closePanel:o,openPanel:c,toggleFeedbackWidget:u}),Object(f.jsx)(sp,{}),Object(f.jsx)(tp,{}),Object(f.jsx)(ap,{promptOn:[m.unsavedStory,v.unsavedForm]}),Object(f.jsx)(la,{})]})},bp=Object(aa.b)((function(e){return{auth:e.auth,chat:e.chat,bots:e.bots,story:e.story,form:e.form,global:e.global}}),(function(e){return{openPanel:function(){return e({type:P})},closePanel:function(){return e(H())},toggleTheme:function(){return e((function(e,t){var n=t().global.uiConfigs;"dark"===(null===n||void 0===n?void 0:n.theme)?e(Dn({theme:""},{showMsg:!1})):e(Dn({theme:"dark"},{showMsg:!1}))}))},onLogout:function(){return e(Xn())},setSelectedBot:function(t){return e({type:hn,payload:t})},fetchBots:function(t){return e(Gs())},toggleFeedbackWidget:function(t){return e(Pn(t))},validateDataAndTrainBot:function(t,n){e(Yb(t,n))},botChanged:function(){e({type:"BOT_CHANGED"})},startTour:function(t){return e(Ln(t))}}}))(mp),pp={"/bots":"Bots","/bot/:botId":"Stories","/bot/:botId/story/:storyId":"Story Page","/bot/:botId/form/:formId":"Form Page","/bot/:botId/components":"Components","/bot/:botId/history":"Chat History","/bot/:botId/analytics":"Analytics","/bot/:botId/logs":"Action Logs","/bot/:botId/uploadlogs":"File Upload Logs","/bot/:botId/train":"Training History","/bot/:botId/deploy":"Deployment History","/bot/:botId/fileUpload":"File Upload/Download","/bot/:botId/client":"Chat Client","/bot/:botId/admin":"Administration","/bot/:botId/testing":"Model Testing Logs","/bot/:botId/config":"Model Configuration","/login":"Login","/signup":"Signup","/reset_password":"Reset Password","/verify":"Verify Account","/cookies":"Cookies","/profile":"User Profile","/settings":"Settings","/book-a-demo":"Book a Demo"},jp=["layout","component","layoutProps","path","pageTitle"],hp=function(e){var t,n=e.layout,c=e.component,o=e.layoutProps,i=e.path,r=e.pageTitle,l=Object(Ei.a)(e,jp);return localStorage.getItem("deBotTrainerToken")?t=localStorage.getItem("deBotTrainerToken"):localStorage.getItem("user")&&(t=localStorage.getItem("user")),Object(a.useEffect)((function(){var e;pp&&(null===(e=pp[i])||void 0===e?void 0:e.length)>0&&C(pp[i])}),[i]),Object(f.jsx)(_c.c,Object(s.a)(Object(s.a)({},l),{},{path:i,render:function(e){return t?Object(f.jsx)(n,Object(s.a)(Object(s.a)({},o),{},{pageTitle:r,children:Object(f.jsx)(c,Object(s.a)({},e))})):Object(f.jsx)(_c.b,{to:"/login"})}}))};hp.defaultProps={layout:bp,layoutProps:{}};var fp=hp,Op=n(177),vp=(n(266),[{text:"10 Reasons to add Chatbot to your website",link:"https://www.digite.com/blog/add-chatbot-to-website/"},{text:"How kAIron Uses GPT-3 With RASA To Help Improve Chatbot Accuracy?",link:"https://www.digite.com/blog/kairon-rasa-chatbot/"},{text:"How kAIron cracks the chatbot problem?",link:"https://www.digite.com/blog/creating-scalable-chatbots/"}]),gp=[{text:"Discord",url:"https://discord.gg/AUFe5Z6QgZ",icon:ua.h},{text:"Github",url:"https://github.com/digiteinfotech/kairon",icon:ua.n},{text:"Facebook",url:"https://www.facebook.com/digite",icon:ua.j},{text:"Twitter",url:"https://twitter.com/digiteinc",icon:ua.z},{text:"LinkedIn",url:"https://www.linkedin.com/company/digite",icon:ua.p},{text:"YouTube",url:"https://www.youtube.com/user/digiteswift",icon:ua.D}],xp=["layout","component","layoutProps","checkForToken","path"],yp=function(e){var t,n=e.layout,c=e.component,o=e.layoutProps,i=e.checkForToken,r=e.path,l=Object(Ei.a)(e,xp);return localStorage.getItem("deBotTrainerToken")?t=localStorage.getItem("deBotTrainerToken"):localStorage.getItem("user")&&(t=localStorage.getItem("user")),Object(a.useEffect)((function(){var e;pp&&(null===(e=pp[r])||void 0===e?void 0:e.length)>0&&C(pp[r])}),[r]),Object(f.jsx)(_c.c,Object(s.a)(Object(s.a)({},l),{},{path:r,render:function(e){return t&&i?Object(f.jsx)(_c.b,{to:"/bots"}):Object(f.jsx)(n,Object(s.a)(Object(s.a)({},o),{},{children:Object(f.jsx)(c,Object(s.a)({},e))}))}}))};yp.defaultProps={layout:function(e){var t=e.type,n=e.children,c=function(e){switch(e){case"login":return{head:"Login",altText:"Don't have an account?",link:"/signup",linkText:"Signup for free!"};case"signup":return{head:"Signup",altText:"Already have an account?",link:"/login",linkText:"Login"};case"resetPassword":return{head:"Reset Password",subText:"Enter your registered email to reset password.",altText:"Oh! I remember my password.",link:"/login",linkText:"Login"};case"newPassword":return{head:"New Password",subText:"Ensure your password contains minimum 8 characters, a number, a special character, an uppercase letter and a lowercase letter",altText:"Oh! I remember my password.",link:"/login",linkText:"Login"};case"verifyAccount":return{head:"Verify Account",subText:"Enter your email to verify your account.",altText:"Back to",link:"/login",linkText:"Login"};case"verificationInProcess":return{head:"Account Verification",subText:"Please be patient while we verify your account..."};case"bookDemo":return{head:"Book a Demo",altText:"Or signup and get started!",link:"/signup",linkText:"Signup"};default:return{}}}(t),o=Object(a.useState)(!1),s=Object(sa.a)(o,2),i=s[0],r=s[1];Object(a.useEffect)((function(){var e="Kairon - AI Powered Contextual Chatbot Builder";document.title=null!==c&&void 0!==c&&c.head?"".concat(null===c||void 0===c?void 0:c.head," | ").concat(e):e}),[c]);var l=function(){return Object(f.jsxs)("div",{className:"tab-slide",children:[Object(f.jsx)("div",{className:"demo-title",children:"Let's talk about your needs."}),Object(f.jsx)("div",{className:"sub-text",children:"Get a guided tour of Kairon through us and find out how you can set up a chatbot within minutes as per your needs."}),Object(f.jsx)("div",{className:"bookdemo-wrapper",children:"bookDemo"!==t?Object(f.jsx)(ra.a,{to:"/book-a-demo",className:"bookdemo-link",children:Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:"/assets/images/demobutton.png",alt:"Fill in your details",className:"bookdemo-image"})})}):Object(f.jsx)("img",{src:"/assets/images/filldetails.png",alt:"Book a Demo",className:"details-image"})})]})};return Object(f.jsxs)("div",{className:"authscreen-layout",children:[Object(f.jsxs)("div",{className:"auth-card",children:[Object(f.jsxs)("div",{className:"contents-left",children:[Object(f.jsx)("div",{className:"logo-wrapper",children:Object(f.jsxs)("div",{className:"logos-combined",children:[Object(f.jsx)("img",{src:"/assets/logo/logo.svg",alt:"Kairon",className:"logo-primary"}),Object(f.jsx)("img",{src:"/assets/logo/kAIron.svg",alt:"kAIron",className:"logo-text"}),Object(f.jsx)("h3",{className:"logo-desc",children:"Powered by Digit\xe9"})]})}),Object(f.jsxs)("div",{className:"left-centered",children:[Object(f.jsxs)("div",{className:"form-heading",children:[Object(f.jsx)("h1",{className:"head-text",children:c.head}),Object(f.jsx)("div",{id:"underline"})]}),c.subText&&Object(f.jsx)("h2",{className:"sub-text",children:c.subText}),""!==j.recaptchaKey?Object(f.jsx)(La.a,{reCaptchaKey:j.recaptchaKey,useRecaptchaNet:!0,children:Object(f.jsx)("div",{className:"auth-children",children:n})}):Object(f.jsx)("div",{className:"auth-children",children:n}),Object(f.jsxs)("div",{className:"alternate-nav",children:[c.altText,c.link&&Object(f.jsx)(ra.a,{to:c.link,className:"alternate-link",children:c.linkText})]})]})]}),Object(f.jsxs)("div",{className:"contents-right",children:[Object(f.jsx)("div",{className:"right-centered",children:"bookDemo"!==t?Object(f.jsxs)(Op.Carousel,{showArrows:!1,showStatus:!1,showThumbs:!1,autoPlay:!0,infiniteLoop:!0,renderIndicator:function(e,t,n,a){return Object(f.jsx)("div",{className:"slider-indicator ".concat(t?"indicator-selected":""),onClick:e,onKeyDown:e,value:n,role:"button",tabIndex:0,"aria-label":"".concat(a," ").concat(n+1),children:Object(f.jsx)("div",{className:"selected-bar ".concat(t?"selected-bar-visible":"")})},n)},children:[Object(f.jsxs)("div",{className:"tab-slide",children:[Object(f.jsx)("p",{className:"title",children:"We have a few resources for you to get started with kAIron."}),Object(f.jsx)("button",{type:"button",className:"kaironDemoVideo",onClick:function(){w("authPage","EmbeddedVideo"),r(!0)},children:Object(f.jsx)("div",{className:"demo-video-wrapper",children:Object(f.jsx)("img",{src:"/assets/images/thumbnail.png",alt:"Watch Demo",className:"thumbnail"})})}),Object(f.jsxs)("div",{className:"blog-links-wrapper",children:[Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("h4",{children:"Latest reads"}),Object(f.jsx)("div",{className:"divider"})]}),Object(f.jsx)("div",{className:"links",children:vp.map((function(e){return Object(f.jsx)("div",{className:"link-wrapper",children:Object(f.jsx)("a",{href:e.link,className:"link-url",target:"_blank",rel:"noreferrer",onClick:function(){return t=e.text,void w("authPage","Blog: ".concat(t));var t},children:e.text})},e.link)}))})]})]}),l(),Object(f.jsxs)("div",{className:"tab-slide",children:[Object(f.jsx)("p",{className:"title",children:"Get instant help regarding Kairon features, usage or anything else. Join us on Discord."}),Object(f.jsx)("iframe",{title:"Join us on Discord",src:"https://discord.com/widget?id=925633843292160021&theme=dark",allowtransparency:"true",frameBorder:"0",sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts",className:"discord-widget"})]})]}):Object(f.jsx)(a.Fragment,{children:l()})}),Object(f.jsx)("div",{className:"social-links-wrapper",children:gp.map((function(e,t){var n=e.text,a=e.url,c=e.icon;return Object(f.jsx)("a",{href:a,className:"icon-wrapper",title:n,target:"_blank",rel:"noreferrer",onClick:function(){w("authPage",n)},children:Object(f.jsx)(c,{className:"icon"})},t)}))})]})]}),Object(f.jsx)("div",{className:"video-player-modal ".concat(i?"player-modal-open":""),role:"button",tabIndex:0,onClick:function(){r(!1)},children:i&&Object(f.jsx)("div",{className:"modal-contents-wrapper",children:Object(f.jsxs)("div",{className:"modal-contents",children:[Object(f.jsx)("div",{className:"close-button",children:Object(f.jsx)(Ks.d,{className:"close-icon"})}),Object(f.jsx)("iframe",{src:"https://player.vimeo.com/video/658574485?h=26d798f57d&autoplay=1&portrait=0",width:"850",height:"478",title:"kAIron - Chatbot Creation Demo",frameBorder:"0",allow:"autoplay; picture-in-picture",allowFullScreen:!0})]})})})]})},layoutProps:{},checkForToken:!0};var Np=yp,Sp=function(){return Object(f.jsxs)(_c.e,{children:[Object(f.jsx)(fp,{exact:!0,path:"/bots",layout:ja,component:hi,pageTitle:"Chatbots"}),Object(f.jsx)(fp,{exact:!0,path:"/profile",layout:ja,component:ks,pageTitle:"Profile"}),Object(f.jsx)(fp,{exact:!0,path:"/settings",layout:ja,component:Ld,pageTitle:"Settings"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId",component:ru,pageTitle:"Conversations"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/story/:storyId",component:Fb}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/form/:formId",component:$l}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/components",component:Ub,pageTitle:"Components"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/history",component:xr,pageTitle:"Chat History"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/analytics",component:ss,pageTitle:"Analytics"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/logs",component:hd,pageTitle:"Action Logs"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/uploadlogs",component:gd,pageTitle:"File Upload Logs"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/train",component:Xb,pageTitle:"Training History"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/fileUpload",component:dl,pageTitle:"Advanced Configurations"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/client",component:Gi,pageTitle:"Configure Client"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/admin",component:Ec,pageTitle:"Administration"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/testing",component:Fd,pageTitle:"Model Testing Logs"}),Object(f.jsx)(fp,{exact:!0,path:"/bot/:botId/config",component:qr,pageTitle:"Model Configuration"}),Object(f.jsx)(Np,{exact:!0,path:"/login",layoutProps:{type:"login"},component:Ss}),Object(f.jsx)(Np,{exact:!0,path:"/main",layoutProps:{type:"login"},component:us,checkForToken:!1}),Object(f.jsx)(Np,{exact:!0,path:"/auth/:ssoType",layoutProps:{type:"login"},component:Ds}),Object(f.jsx)(Np,{exact:!0,path:"/signup",component:Fs,layoutProps:{type:"signup"}}),Object(f.jsx)(Np,{exact:!0,path:"/reset_password",component:ws,layoutProps:{type:"resetPassword"}}),Object(f.jsx)(Np,{exact:!0,path:"/reset_password/:token",component:As,layoutProps:{type:"newPassword"}}),Object(f.jsx)(Np,{exact:!0,path:"/verify",component:ws,layoutProps:{type:"verifyAccount"}}),Object(f.jsx)(Np,{exact:!0,path:"/verify/:token",component:Rs,layoutProps:{type:"verificationInProcess"}}),Object(f.jsx)(Np,{exact:!0,path:"/book-a-demo",component:Os,layoutProps:{type:"bookDemo"},checkForToken:!1}),Object(f.jsx)(Np,{exact:!0,path:"/cookies",component:ed,layout:function(e){return e.children},checkForToken:!1}),Object(f.jsx)(Np,{exact:!0,path:"/",component:function(){return Object(f.jsx)(_c.b,{to:"/login"})}}),Object(f.jsx)(_c.c,{component:function(){return Object(f.jsx)(_c.b,{to:"/login"})}})," "]})},Tp=n(277),kp=n(355),Cp=Object(kp.a)((function(e){return{backdrop:{color:"#fff",zIndex:1399}}})),wp=function(e){var t=Cp();return Object(f.jsx)(Tp.a,{className:t.backdrop,open:e.open,children:Object(f.jsx)(Lo.a,{color:"inherit"})})};wp.defaultProps={open:!1};var _p=wp,Ap=Object(kp.a)((function(e){return{backdrop:{zIndex:1400,opacity:.2}}})),Ep=function(e){var t=e.open,n=Ap();return Object(f.jsx)("div",{className:"fullscreen-loader",children:Object(f.jsx)(Tp.a,{className:n.backdrop,open:t,children:Object(f.jsx)("div",{className:"animation-div-wrapper",children:Object(f.jsx)("div",{className:"animation-div"})})})})};Ep.defaultProps={open:!1};var Fp=Ep,Ip=["title","onClick"],Dp=["title","onClick"],Pp=function(e){var t=e.continuous,n=e.index,a=e.size,c=e.step,o=e.backProps,i=e.closeProps,r=e.primaryProps,l=e.tooltipProps,d=e.skipProps,u=e.global,m=e.incrementStep,b=e.decrementStep,p=e.isLastStep,j=e.stopTour,h=u.tourData,O=u.activeTour;return Object(f.jsxs)("div",Object(s.a)(Object(s.a)({className:"ui-onboard-tooltip"},l),{},{children:[c.title&&Object(f.jsx)("h3",{className:"ob-title",children:c.title}),Object(f.jsx)("div",{className:"ob-content",children:c.content}),Object(f.jsxs)("div",{className:"ob-footer",children:[Object(f.jsxs)("div",{className:"ob-footer-left",children:[Object(f.jsxs)("button",Object(s.a)(Object(s.a)({type:"button",className:"ob-button ob-skip-button"},d),{},{title:"",children:[Object(f.jsx)(da.f,{className:"skip-icon"}),d.title," Tour"]})),Object(f.jsxs)("div",{className:"ob-progress",children:[n+1," of ",a]})]}),!h.controlled&&Object(f.jsxs)("div",{className:"ob-footer-right",children:[n>0&&Object(f.jsx)("button",Object(s.a)(Object(s.a)({type:"button",className:"ob-button ob-back-button"},function(){o.title;var e=o.onClick,t=Object(Ei.a)(o,Ip),n=null!==h&&void 0!==h&&h.manuallyControlled?b:e;return Object(s.a)(Object(s.a)({},t),{},{onClick:n})}()),{},{title:"",children:o.title})),t&&Object(f.jsx)("button",Object(s.a)(Object(s.a)({type:"button",className:"ob-button ob-primary-button"},function(){r.title;var e=r.onClick,t=Object(Ei.a)(r,Dp),n=null!==h&&void 0!==h&&h.manuallyControlled?p?function(){return j({activeTour:O})}:m:e;return Object(s.a)(Object(s.a)({},t),{},{onClick:n})}()),{},{title:"",children:r.title})),!t&&Object(f.jsx)("button",Object(s.a)(Object(s.a)({type:"button",className:"ob-button ob-primary-button"},i),{},{title:"",children:i.title}))]})]})]}))},Rp=Object(aa.b)((function(e){return{global:e.global}}),(function(e){return{incrementStep:function(){return e(Mn())},decrementStep:function(){return e({type:xn})},stopTour:function(t){return e(Un(t))}}}))(Pp),Lp=Object(kp.a)((function(e){return{backdrop:{color:"#fff !important",zIndex:1400,opacity:1}}})),Up=function(e){var t=e.open,n=Lp();return Object(f.jsx)("div",{className:"overlay-loader",children:Object(f.jsx)(Tp.a,{className:n.backdrop,open:t,children:Object(f.jsxs)("div",{className:"ol-content",children:[Object(f.jsx)("img",{src:"/assets/logo/logo.svg",alt:"Loading...",className:"ol-logo"}),Object(f.jsx)("div",{className:"ol-loading",children:Object(f.jsx)("div",{className:"ol-loading-bar"})})]})})})};Up.defaultProps={open:!1};var Mp=Up,Bp=n(371),Hp=n(362),Gp=function(e){return Object(f.jsx)(Hp.a,Object(s.a)({elevation:6,variant:"filled"},e))},Vp=function(e){return Object(f.jsx)(a.Fragment,{children:e.message&&e.severity&&Object(f.jsx)(Bp.a,{open:e.open,autoHideDuration:6e3,onClose:function(){return e.onClose()},anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(f.jsx)(Gp,{severity:e.severity,onClose:function(){return e.onClose()},children:e.message})})})};Vp.defaultProps={severity:"",onClose:function(){},open:!1,message:""},Vp.defaultProps={severity:rs.a.string,onClose:rs.a.func,open:rs.a.bool,message:rs.a.string};var zp=Vp,qp=n(372),Wp=function(e){var t=e.saveFeedback,n=e.setSnackbar,c=e.toggleFeedbackWidget,o=e.showFeedbackWidget,s=Object(a.useState)(0),i=Object(sa.a)(s,2),r=i[0],l=i[1],d=Object(a.useState)(""),u=Object(sa.a)(d,2),m=u[0],b=u[1],p=Object(a.useState)(!1),j=Object(sa.a)(p,2),h=j[0],O=j[1],v=function(){c(!1)};return Object(f.jsxs)(_a.a,{open:o,"aria-labelledby":"form-dialog-title",maxwidth:"sm",fullWidth:!0,children:[Object(f.jsx)(Aa.a,{id:"form-dialog-title",children:"Send us your feedback!"}),Object(f.jsxs)(Ea.a,{children:[Object(f.jsx)(qp.a,{name:"simple-controlled",value:r,onChange:function(e,t){l(t),O(!0)}}),Object(f.jsx)(nc.a,{margin:"dense",id:"name",label:"Comment",type:"text",multiline:!0,fullWidth:!0,minRows:1,value:m,onChange:function(e){b(e.target.value),O(!0)}})]}),Object(f.jsxs)(Fa.a,{children:[Object(f.jsx)(Ia.a,{onClick:v,color:"secondary",children:"Cancel"}),Object(f.jsx)(Ia.a,{onClick:function(){return h?""===m.trim()&&0===r?(n("No feedback provided. Update comment or rating and save feedback.","error"),!1):(t({rating:r,feedbackComment:m}),v(),l(0),b(""),void O(!1)):(n("No feedback provided. Update comment or rating and save feedback.","error"),!1)},color:"primary",children:"Submit"})]})]})},Kp=n(92),Yp=function(e){var t=e.handleSnackClose,n=e.global,c=e.loadUserData,o=e.toggleFeedbackWidget,i=e.setSnackbar,r=e.saveFeedback,l=e.stopTour,d=e.loadSSOEnabledLogins,u=n.showFeedbackWidget,m=n.tourData,b=n.tourStepIndex,h=n.uiConfigs,O=n.activeTour;Object(a.useEffect)((function(){(localStorage.getItem("user")||localStorage.getItem("deBotTrainerToken")&&localStorage.getItem("deBotTrainerUserName"))&&c(),d()}),[]);return Object(f.jsxs)(oa.a,{theme:js(null===h||void 0===h?void 0:h.theme),children:[Object(f.jsx)(ca.a,{}),Object(f.jsxs)("div",{className:"AppMain ".concat((null===h||void 0===h?void 0:h.theme)||""),children:[Object(f.jsx)(Sp,{}),Object(f.jsx)(zp,Object(s.a)(Object(s.a)({},n.snackbar),{},{onClose:t})),Object(f.jsx)(_p,{open:n.backdrop}),Object(f.jsx)(Mp,{open:n.overlay}),Object(f.jsx)(Fp,{open:n.fullScreenLoader}),(null===m||void 0===m?void 0:m.steps)&&Object(f.jsx)(Kp.c,{disableScrollParentFix:!0,disableScrolling:!0,disableOverlayClose:!0,disableCloseOnEsc:!0,locale:on,continuous:!0,styles:{options:{arrowColor:"#445ef5",overlayColor:"dark"===(null===h||void 0===h?void 0:h.theme)?"#0000008a":"#0000004d",zIndex:1e3},spotlight:{borderRadius:0}},spotlightClicks:m.controlled,stepIndex:m.controlled||m.manuallyControlled?b:void 0,steps:(null===m||void 0===m?void 0:m.steps)||[],callback:function(e){[Kp.a.SKIP,Kp.a.RESET].includes(null===e||void 0===e?void 0:e.action)?l({activeTour:O}):[Kp.a.CLOSE,Kp.b.TARGET_NOT_FOUND].includes(null===e||void 0===e?void 0:e.action)&&l()},floaterProps:{styles:{floaterWithAnimation:{transition:"opacity 0.5s"}}},tooltipComponent:Rp}),Object(f.jsx)(Wp,{showFeedbackWidget:u,toggleFeedbackWidget:o,saveFeedback:r,setSnackbar:i}),""!==j.trackingID&&p.a.initialize(j.trackingID,{debug:!1})]})]})},Qp=Object(aa.b)((function(e){return{global:e.global}}),(function(e){return{handleSnackClose:function(){return e({type:un})},loadUserData:function(){return e(Yn())},toggleFeedbackWidget:function(t){return e(Pn(t))},saveFeedback:function(t){e(function(e){return d("".concat(j.server,"/api/account/feedback"),{args:{rating:e.rating,feedback:e.feedbackComment,scale:5},method:"POST",success:Rn,error:wn})}(t))},setSnackbar:function(t,n){e(kn(t,n))},stopTour:function(t){return e(Un(t))},loadSSOEnabledLogins:function(){e(d("".concat(j.server,"/api/auth/login/sso/list/enabled"),{method:"GET",success:ea,error:wn}))}}}))(Yp),Jp=n(96),Zp=(n(270),n(181)),Xp=new(function(){function e(){Object(sb.a)(this,e),this._emitChange=null,this._reducers={}}return Object(ib.a)(e,[{key:"getReducers",value:function(){return Object(s.a)({},this._reducers)}},{key:"register",value:function(e,t){this._reducers=Object(s.a)(Object(s.a)({},this._reducers),{},Object(D.a)({},e,t)),this._emitChange&&this._emitChange(this.getReducers())}},{key:"setChangeListener",value:function(e){this._emitChange=e}}]),e}()),$p={fetchingToken:!1,token:"",endpoints:null},ej=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$p,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ha:return Object(s.a)(Object(s.a)({},e),{},{fetchingToken:!0});case fa:return Object(s.a)(Object(s.a)({},e),{},{token:a.token,fetchingToken:!1});case Oa:return Object(s.a)(Object(s.a)({},e),{},{endpoints:a.data});case va:var c=Object(s.a)({},e.endpoints);return delete c[a.endpoint],Object(s.a)(Object(s.a)({},e),{},{endpoints:Object(s.a)({},c)});default:return Object(s.a)({},e)}},tj={userRetention:0,successfulConversations:0,totalConversations:0,avgConversationSteps:0,newUsers:0,engagedUsers:0,fallbackMetric:null,users:[],engagedUsersTrend:[],newUsersTrend:[],successfulConversationsTrend:[],userRetentionTrend:[],avgConversationTimeTrend:[],avgConversationStepsTrend:[],fallbackTrend:[],totalConversationsTrend:[],topIntents:[],topActions:[],uniqueUserInputs:[],fallbackConfig:{},userVsUnsuccessfulSessions:{},userVsTotalSessions:{},intentsBeforeDropoff:{},userRetentionFetched:!1,successfulConversationsFetched:!1,avgConversationStepsFetched:!1,newUsersFetched:!1,engagedUsersFetched:!1,fallbackMetricFetched:!1,usersFetched:!1,engagedUsersTrendFetched:!1,newUsersTrendFetched:!1,successfulConversationsTrendFetched:!1,userRetentionTrendFetched:!1,avgConversationTimeTrendFetched:!1,avgConversationStepsTrendFetched:!1,fallbackTrendFetched:!1,totalConversationsTrendFetched:!1,topIntentsFetched:!1,topActionsFetched:!1,uniqueUserInputsFetched:!1,fallbackConfigFetched:!1,userVsUnsuccessfulSessionsFetched:!1,userVsTotalSessionsFetched:!1,intentsBeforeDropoffFetched:!1},nj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Fc:return Object(s.a)(Object(s.a)({},e),{},Object(D.a)({},a.dataPropertyNameBeingFetched,!1));case Ic:return Object(s.a)(Object(s.a)({},e),{},{userRetention:a.userRetention,userRetentionFetched:!0});case Dc:return Object(s.a)(Object(s.a)({},e),{},{successfulConversations:a.successfulConversations,totalConversations:a.totalConversations,successfulConversationsFetched:!0});case Pc:return Object(s.a)(Object(s.a)({},e),{},{newUsers:a.newUsers,newUsersFetched:!0});case Rc:return Object(s.a)(Object(s.a)({},e),{},{engagedUsers:a.engagedUsers,engagedUsersFetched:!0});case Lc:return Object(s.a)(Object(s.a)({},e),{},{userRetentionTrend:a.userRetentionTrend,userRetentionTrendFetched:!0});case Uc:return Object(s.a)(Object(s.a)({},e),{},{successfulConversationsTrend:a.successfulConversationsTrend,totalSessionsTrend:a.totalSessionsTrend,successfulConversationsTrendFetched:!0});case Mc:return Object(s.a)(Object(s.a)({},e),{},{totalConversationsTrend:a.totalConversationsTrend,totalConversationsTrendFetched:!0});case Hc:return Object(s.a)(Object(s.a)({},e),{},{avgConversationStepsTrend:a.avgConversationStepsTrend,totalConversationStepsTrend:a.totalConversationStepsTrend,avgConversationStepsTrendFetched:!0});case Gc:return Object(s.a)(Object(s.a)({},e),{},{avgConversationTimeTrend:a.avgConversationTimeTrend,avgConversationTimeTrendFetched:!0});case Bc:return Object(s.a)(Object(s.a)({},e),{},{fallbackTrend:a.fallbackTrend,totalFallbackTrend:a.totalFallbackTrend,fallbackTrendFetched:!0});case Vc:return Object(s.a)(Object(s.a)({},e),{},{newUsersTrend:a.newUsersTrend,newUsersTrendFetched:!0});case zc:return Object(s.a)(Object(s.a)({},e),{},{engagedUsersTrend:a.engagedUsersTrend,engagedUsersTrendFetched:!0});case qc:return Object(s.a)(Object(s.a)({},e),{},{fallbackMetric:a.fallbackMetric,fallbackMetricFetched:!0});case Wc:return Object(s.a)(Object(s.a)({},e),{},{users:a.users,usersFetched:!0});case Kc:return Object(s.a)(Object(s.a)({},e),{},{topIntents:a.intents,topIntentsFetched:!0});case Yc:return Object(s.a)(Object(s.a)({},e),{},{topActions:a.actions,topActionsFetched:!0});case Qc:return Object(s.a)(Object(s.a)({},e),{},{uniqueUserInputs:a.uniqueUserInputs,uniqueUserInputsFetched:!0});case Jc:return Object(s.a)(Object(s.a)({},e),{},{fallbackConfig:a.fallbackConfig,fallbackConfigFetched:!0});case Zc:return Object(s.a)(Object(s.a)({},e),{},{userVsUnsuccessfulSessions:a.userVsUnsuccessfulSessions,userVsUnsuccessfulSessionsFetched:!0});case Xc:return Object(s.a)(Object(s.a)({},e),{},{userVsTotalSessions:a.userVsTotalSessions,userVsTotalSessionsFetched:!0});case $c:return Object(s.a)(Object(s.a)({},e),{},{intentsBeforeDropoff:a.intentsBeforeDropoff,intentsBeforeDropoffFetched:!0});default:return Object(s.a)({},e)}},aj={userData:null,ssoEnabledLogins:[],bookDemoLoader:!1},cj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Hn:return Object(s.a)(Object(s.a)({},e),{},{userData:a});case Gn:return Object(s.a)(Object(s.a)({},e),{},{userData:null});case Vn:return Object(s.a)(Object(s.a)({},e),{},{ssoEnabledLogins:a.ssoEnabledLogins});case zn:return Object(s.a)(Object(s.a)({},e),{},{bookDemoLoader:!0});case qn:return Object(s.a)(Object(s.a)({},e),{},{bookDemoLoader:!1});default:return e}},oj={botsList:[],botsFetched:!1,unsavedBot:!1,newBot:{_id:"",name:"",performance:0}},sj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Ls:return Object(s.a)(Object(s.a)({},e),{},{botsFetched:!0,botsList:a});case Us:return Object(s.a)(Object(s.a)({},e),{},{newBot:{_id:"newBot",name:"",performance:0},unsavedBot:!0});case Ms:return Object(s.a)(Object(s.a)({},e),{},{newBot:Object(s.a)(Object(s.a)({},e.newBot),{},{name:a}),unsavedBot:!0});case Bs:return Object(s.a)(Object(s.a)({},e),{},{newBot:Object(s.a)(Object(s.a)({},e.newBot),{},{name:"",_id:"",performance:0}),unsavedBot:!1});default:return Object(s.a)({},e)}},ij=[{event:"bot",text:"Hey! I'm your bot. You can test me here..."}],rj={open:!1,typing:!1,chatData:[].concat(ij)},lj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case P:return Object(s.a)(Object(s.a)({},e),{},{open:!0});case R:return Object(s.a)(Object(s.a)({},e),{},{open:!1});case L:return Object(s.a)(Object(s.a)({},e),{},{typing:!0,chatData:[].concat(Object(u.a)(e.chatData),[{event:"user",text:a}])});case U:return Object(s.a)(Object(s.a)({},e),{},{typing:!1,chatData:[].concat(Object(u.a)(e.chatData),[{event:"bot",text:a}])});case M:return Object(s.a)(Object(s.a)({},e),{},{typing:!1});case B:return Object(s.a)(Object(s.a)({},e),{},{typing:!1,chatData:[].concat(ij)});default:return Object(s.a)({},e)}},dj={selectedMenu:0,configFetched:!1,config:Object(s.a)({},yi()),urlToken:""},uj=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dj,n=arguments.length>1?arguments[1]:void 0,a=n.type,c=n.payload;switch(a){case fi:return Object(s.a)(Object(s.a)({},t),{},{selectedMenu:c.menu});case Oi:return Object(s.a)(Object(s.a)({},t),{},{configFetched:!0,config:c.data});case vi:return Object(s.a)(Object(s.a)({},t),{},{config:Object(s.a)(Object(s.a)({},t.config),c.data)});case gi:return Object(s.a)(Object(s.a)({},t),{},{config:Object(s.a)(Object(s.a)({},t.config),{},{headers:{"X-USER":(null===(e=t.config)||void 0===e?void 0:e.headers["X-USER"])||"",authorization:"Bearer ".concat(c.token)}})});case xi:return Object(s.a)(Object(s.a)({},t),{},{urlToken:c.token});default:return Object(s.a)({},t)}},mj={users:[],usersFetched:!1,selectedUser:"",chatHistory:[],chatHistoryDisplay:[],chatHistoryPageNumber:1,selectedUserChatHistory:[],selectedUserChatHistoryFetched:!1,chatHistoryFetched:!1,selectedChatPageNumber:1,selectedUserChatHistoryDisplay:[],trainingExampleVsIntent:{}},bj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Ji:return Object(s.a)(Object(s.a)({},e),{},{chatHistoryFetched:!1});case Zi:return Object(s.a)(Object(s.a)({},e),{},{usersFetched:!1});case Vi:return Object(s.a)(Object(s.a)({},e),{},{users:a.users,usersFetched:!0});case Wi:return Object(s.a)(Object(s.a)({},e),{},{chatHistory:a.chatHistory,chatHistoryDisplay:a.chatHistory.slice(0,100),chatHistoryFetched:!0});case Qi:var c=a.pageNumber-1;return Object(s.a)(Object(s.a)({},e),{},{chatHistoryPageNumber:a.pageNumber,chatHistoryDisplay:e.chatHistory.slice(100*c,100*c+100)});case zi:return Object(s.a)(Object(s.a)({},e),{},{selectedUser:a.selectedUser!==e.selectedUser||a.isRefresh?a.selectedUser:"",selectedUserChatHistory:[],selectedUserChatHistoryDisplay:[],selectedUserChatHistoryFetched:!1});case Ki:return Object(s.a)(Object(s.a)({},e),{},{selectedUserChatHistory:a.chatHistory,selectedUserChatHistoryDisplay:a.chatHistory.slice(a.chatHistory.length-a.chatHistory.length%100,a.chatHistory.length),selectedChatPageNumber:Math.ceil(a.chatHistory.length/100),selectedUserChatHistoryFetched:!0});case qi:var o=a.pageNumber-1;return Object(s.a)(Object(s.a)({},e),{},{selectedChatPageNumber:a.pageNumber,selectedUserChatHistoryDisplay:e.selectedUserChatHistory.slice(100*o,100*o+100)});case Yi:return Object(s.a)(Object(s.a)({},e),{},{trainingExampleVsIntent:a.trainingExampleVsIntent||{}});default:return Object(s.a)({},e)}},pj={currentConfig:null,configTemplates:[],configProperties:null,fallbackActions:{}},jj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case yr:return Object(s.a)(Object(s.a)({},e),{},{currentConfig:a.data});case Sr:return Object(s.a)(Object(s.a)({},e),{},{configTemplates:a.data});case Nr:return Object(s.a)(Object(s.a)({},e),{},{configProperties:a.data});case Tr:return Object(s.a)(Object(s.a)({},e),{},{fallbackActions:a.fallbackActions});default:return Object(s.a)({},e)}},hj={files:[],isFileUploading:!1,isFileDownloading:!1,isModelDownloading:!1},fj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wr:return Object(s.a)(Object(s.a)({},e),{},{files:[].concat(Object(u.a)(e.files),Object(u.a)(t.payload.files))});case Kr:return Object(s.a)(Object(s.a)({},e),{},{files:x(e.files,"name",t.payload.fileName)});case Yr:return Object(s.a)(Object(s.a)({},e),{},{isFileDownloading:!e.isFileDownloading});case Qr:return Object(s.a)(Object(s.a)({},e),{},{isModelDownloading:!e.isModelDownloading});case Jr:return Object(s.a)(Object(s.a)({},e),{},{files:[]});case Zr:return Object(s.a)(Object(s.a)({},e),{},{isFileUploading:!e.isFileUploading});default:return Object(s.a)({},e)}},Oj=function(e){var t=e.formData,n=e.slot,a=e.index,c=Object(u.a)(t.settings),o={slot:n,ask_questions:[],validation:{},valid_response:"",invalid_response:""};return-1===a?[].concat(Object(u.a)(t.settings),[o]):(c.splice(a,1,o),Object(u.a)(c))},vj=function(e){var t=e.formData,n=e.index,a=0,c=t.settings.filter((function(e,t){return"NEW_FORM_NODE"===e.slot&&n<t&&(a+=1),"NEW_FORM_NODE"!==e.slot}));return c.splice(n-a,0,{slot:"NEW_FORM_NODE",ask_questions:[],validation:{},valid_response:"",invalid_response:""}),c},gj=function(e,t){var n,a=e.settings,c=t.id,o=t.text,i=t.slot,r=t.deleteId,l=t.mode;return"delete"===l&&(n=a.map((function(e){return e.slot===i?Object(s.a)(Object(s.a)({},e),{},{ask_questions:e.ask_questions.filter((function(e){return e._id!==r}))}):e}))),"update"===l&&(n=a.map((function(e){return e.slot===i?Object(s.a)(Object(s.a)({},e),{},{ask_questions:e.ask_questions.map((function(e){return e._id===c&&(e.value.text=o),e}))}):e}))),"add"===l&&(n=a.map((function(e){return e.slot===i?Object(s.a)(Object(s.a)({},e),{},{ask_questions:[{_id:c,value:{text:o}}].concat(Object(u.a)(e.ask_questions))}):e}))),Object(s.a)(Object(s.a)({},e),{},{settings:n})},xj={formFetching:!0,formData:null,formDataInDB:null,unsavedForm:!1,selectedNodeIndex:-1,formNodeActionsPopupId:"",openFormPickers:["formpicker_mappedslots"]},yj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case ul:return Object(s.a)(Object(s.a)({},e),{},{formFetching:!0});case ml:return Object(s.a)(Object(s.a)({},e),{},{formFetching:!1,formData:Object(s.a)({},a.formData),formDataInDB:Object(s.a)({},a.formData),unsavedForm:!1});case bl:return Object(s.a)(Object(s.a)({},e),{},{formFetching:!1,formData:null,formDataInDB:null,selectedNodeIndex:-1,unsavedForm:!1});case pl:return Object(s.a)(Object(s.a)({},e),{},{formData:Object(s.a)(Object(s.a)({},e.formData),{},Object(D.a)({},a.field,a.value))});case yl:return Object(s.a)(Object(s.a)({},e),{},{formData:a.formFlow,unsavedForm:!0});case jl:return Object(s.a)(Object(s.a)({},e),{},{selectedNodeIndex:a.nodeIndex});case hl:return Object(s.a)(Object(s.a)({},e),{},{selectedNodeIndex:-1});case fl:return Object(s.a)(Object(s.a)({},e),{},{formNodeActionsPopupId:a.popupId});case Ol:return Object(s.a)(Object(s.a)({},e),{},{unsavedForm:!0,formData:Object(s.a)(Object(s.a)({},e.formData),{},{settings:Oj({formData:e.formData,slot:a.slotName,index:a.addIndex})})});case gl:return Object(s.a)(Object(s.a)({},e),{},{unsavedForm:!0,formData:Object(s.a)(Object(s.a)({},e.formData),{},{settings:vj({formData:e.formData,index:a.insertIndex})})});case vl:return Object(s.a)(Object(s.a)({},e),{},{unsavedForm:!0,formData:Object(s.a)(Object(s.a)({},e.formData),{},{settings:e.formData.settings.filter((function(e,t){return t!==a.nodeIndex}))})});case xl:return Object(s.a)(Object(s.a)({},e),{},{openFormPickers:a.openFormPickers});case Nl:var c=gj(e.formData,a);return Object(s.a)(Object(s.a)({},e),{},{formData:Object(s.a)({},c),unsavedForm:a.setAsUnsaved||e.unsavedForm});case Sl:return Object(s.a)(Object(s.a)({},e),{},{unsavedForm:!0,formFetching:!1});case Tl:return Object(s.a)(Object(s.a)({},e),{},{unsavedForm:!1,formFetching:!1,selectedNodeIndex:-1,formNodeActionsPopupId:""});default:return Object(s.a)({},e)}},Nj={snackbar:{open:!1,message:"",severity:""},backdrop:!1,overlay:!!localStorage.getItem("user"),fullScreenLoader:!1,selectedBotId:"",showFeedbackWidget:!1,tourData:null,activeTour:"",tourStepIndex:0,uiConfigs:{},uiConfigsFetched:!1},Sj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nj,t=arguments.length>1?arguments[1]:void 0,n=t.payload,a=t.type;switch(a){case rn:return Object(s.a)(Object(s.a)({},e),{},{backdrop:!0});case ln:return Object(s.a)(Object(s.a)({},e),{},{backdrop:!1});case dn:return Object(s.a)(Object(s.a)({},e),{},{snackbar:Object(s.a)({open:!0},n)});case un:return Object(s.a)(Object(s.a)({},e),{},{snackbar:{open:!1,message:"",severity:""}});case mn:return Object(s.a)(Object(s.a)({},e),{},{overlay:!0});case bn:return Object(s.a)(Object(s.a)({},e),{},{overlay:!1});case pn:return Object(s.a)(Object(s.a)({},e),{},{fullScreenLoader:!0});case jn:return Object(s.a)(Object(s.a)({},e),{},{fullScreenLoader:!1});case hn:return Object(s.a)(Object(s.a)({},e),{},{selectedBotId:n});case fn:return Object(s.a)(Object(s.a)({},e),{},{showFeedbackWidget:n.show});case On:return Object(s.a)(Object(s.a)({},e),{},{tourData:n.data,activeTour:n.tour,tourStepIndex:0});case vn:return Object(s.a)(Object(s.a)({},e),{},{tourData:null,activeTour:"",tourStepIndex:0});case gn:return Object(s.a)(Object(s.a)({},e),{},{tourStepIndex:e.tourData?e.tourStepIndex+1:0});case xn:return Object(s.a)(Object(s.a)({},e),{},{tourStepIndex:e.tourData&&0!==e.tourStepIndex?e.tourStepIndex-1:0});case yn:return Object(s.a)(Object(s.a)({},e),{},{uiConfigs:n.uiConfigs,uiConfigsFetched:!0});default:return Object(s.a)({},e)}},Tj={httpLogs:[],uploadLogs:[],fetching:!1,totalLogs:0,validating:!1},kj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case sd:return Object(s.a)(Object(s.a)({},e),{},{fetching:!0});case id:return Object(s.a)(Object(s.a)({},e),{},{fetching:!1,httpLogs:a.data,totalLogs:a.total});case rd:return Object(s.a)(Object(s.a)({},e),{},{fetching:!1,uploadLogs:a.data});case ld:return Object(s.a)(Object(s.a)({},e),{},{validating:!0});case dd:return Object(s.a)(Object(s.a)({},e),{},{validating:!1});default:return Object(s.a)({},e)}},Cj={modelTestingLogs:[],fetchingLogs:!0,testingEventResponseReceived:!0,lastTestingReport:null},wj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case xd:return Object(s.a)(Object(s.a)({},e),{},{testingEventResponseReceived:!1});case yd:return Object(s.a)(Object(s.a)({},e),{},{testingEventResponseReceived:!0});case Sd:return Object(s.a)(Object(s.a)({},e),{},{fetchingLogs:!0});case Nd:return Object(s.a)(Object(s.a)({},e),{},{modelTestingLogs:a.data,lastTestingReport:a.lastTestingReport,fetchingLogs:!1});default:return Object(s.a)({},e)}},_j={storiesList:[],searchedList:[],fetching:!1,storiesFetched:!1,formsList:[],searchedFormsList:[],fetchingForms:!1},Aj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_j,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Md:return Object(s.a)(Object(s.a)({},e),{},{fetching:!0});case Ud:return Object(s.a)(Object(s.a)({},e),{},{fetching:!1,storiesList:a,storiesFetched:!0});case Bd:return a?Object(s.a)(Object(s.a)({},e),{},{searchedList:e.storiesList.filter((function(e){var t,n;return null===(t=e.name)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(a)})),searchedFormsList:e.formsList.filter((function(e){var t,n;return null===(t=e.name)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(a)}))}):Object(s.a)(Object(s.a)({},e),{},{searchedList:[]});case Hd:return Object(s.a)(Object(s.a)({},e),{},{storiesList:e.storiesList.map((function(e){return e._id!==a.story._id?e:a.story}))});case Vd:return Object(s.a)(Object(s.a)({},e),{},{storiesList:[].concat(Object(u.a)(e.storiesList),[a.story])});case Gd:var c=x(e.storiesList,"name",a.storyName),o=x(e.searchedList,"name",a.storyName);return Object(s.a)(Object(s.a)({},e),{},{storiesList:c,searchedList:o});case zd:return Object(s.a)(Object(s.a)({},e),{},{fetchingForms:!0});case qd:return Object(s.a)(Object(s.a)({},e),{},{fetchingForms:!1,formsList:a});case Wd:var i=x(e.formsList,"name",a.formName),r=x(e.searchedFormsList,"name",a.formName);return Object(s.a)(Object(s.a)({},e),{},{formsList:i,searchedFormsList:r});default:return Object(s.a)({},e)}},Ej={loading:!1,unsavedStory:!1,storyData:null,openPickers:[],selectedPickerItemType:"",selectedPickerItemName:"",nodeActionsPopupId:"",editingNodeId:"",fetchingPanelData:!1,panelData:[],generatedPhrases:[],showNewHTTPActionForm:!1,showNewEmailActionForm:!1,showNewGoogleActionForm:!1,showNewSlotsResetForm:!1,docksData:{trainingPhrases:{fetching:!1,data:[]},responses:{fetching:!1,data:[]}}},Fj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ej,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case lu:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case du:return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case uu:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,storyData:a});case mu:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,storyData:null});case pu:return Object(s.a)(Object(s.a)({},e),{},{storyData:Object(s.a)(Object(s.a)({},e.storyData),{},{steps:a.steps}),unsavedStory:!0,nodeActionsPopupId:"",editingNodeId:""});case bu:return Object(s.a)(Object(s.a)({},e),{},{storyData:a.story,loading:!1,unsavedStory:!1});case ju:return Object(s.a)(Object(s.a)({},e),{},{storyData:null,unsavedStory:!1});case Ou:return Object(s.a)(Object(s.a)({},e),{},{openPickers:a});case vu:return Object(s.a)(Object(s.a)({},e),{},{fetchingPanelData:!0,selectedPickerItemType:a.componentType,selectedPickerItemName:a.itemName,showNewHTTPActionForm:!1,showNewEmailActionForm:!1,showNewGoogleActionForm:!1,showNewSlotsResetForm:!1});case gu:return Object(s.a)(Object(s.a)({},e),{},{panelData:a,fetchingPanelData:!1,showNewHTTPActionForm:!1,showNewEmailActionForm:!1,showNewGoogleActionForm:!1,showNewSlotsResetForm:!1});case xu:return Object(s.a)(Object(s.a)({},e),{},{selectedPickerItemType:"",selectedPickerItemName:"",showNewHTTPActionForm:!1,showNewEmailActionForm:!1,showNewGoogleActionForm:!1,showNewSlotsResetForm:!1,panelData:[]});case yu:return Object(s.a)(Object(s.a)({},e),{},{panelData:[].concat(Object(u.a)(a),Object(u.a)(e.panelData))});case Tu:return Object(s.a)(Object(s.a)({},e),{},{generatedPhrases:a});case ku:return Object(s.a)(Object(s.a)({},e),{},{panelData:e.panelData.map((function(e){return e._id!==a._id?e:a}))});case Cu:return Object(s.a)(Object(s.a)({},e),{},{panelData:e.panelData.filter((function(e){return e._id!==a.id}))});case wu:return Object(s.a)(Object(s.a)({},e),{},{panelData:a.data});case _u:return Object(s.a)(Object(s.a)({},e),{},{panelData:[]});case Eu:return Object(s.a)(Object(s.a)({},e),{},{panelData:a.data});case Fu:return Object(s.a)(Object(s.a)({},e),{},{panelData:[]});case Du:return Object(s.a)(Object(s.a)({},e),{},{panelData:a.data});case Pu:return Object(s.a)(Object(s.a)({},e),{},{panelData:[]});case Lu:return Object(s.a)(Object(s.a)({},e),{},{panelData:a.data});case Uu:return Object(s.a)(Object(s.a)({},e),{},{panelData:[],showNewSlotsResetForm:!1});case Nu:return Object(s.a)(Object(s.a)({},e),{},{nodeActionsPopupId:a.id});case Su:return Object(s.a)(Object(s.a)({},e),{},{nodeActionsPopupId:"",editingNodeId:a.id});case Au:return Object(s.a)(Object(s.a)({},e),{},{showNewHTTPActionForm:a.showFlag,selectedPickerItemType:a.showFlag?"picker_api_actions":"",selectedPickerItemName:a.showFlag?"new_action":"",panelData:[]});case Iu:return Object(s.a)(Object(s.a)({},e),{},{showNewEmailActionForm:a.showFlag,selectedPickerItemType:a.showFlag?"picker_email_action":"",selectedPickerItemName:a.showFlag?"new_email_action":"",panelData:[]});case Ru:return Object(s.a)(Object(s.a)({},e),{},{showNewGoogleActionForm:a.showFlag,selectedPickerItemType:a.showFlag?"picker_google_action":"",selectedPickerItemName:a.showFlag?"new_google_action":"",panelData:[]});case Mu:return Object(s.a)(Object(s.a)({},e),{},{showNewSlotsResetForm:a.showFlag,selectedPickerItemType:a.showFlag?"picker_reset_slots":"",selectedPickerItemName:a.showFlag?"new_reset_action":"",panelData:[]});case hu:return e.storyData&&e.storyData[a.field]?Object(s.a)(Object(s.a)({},e),{},{storyData:Object(s.a)(Object(s.a)({},e.storyData),{},Object(D.a)({},a.field,a.value))}):Object(s.a)({},e);case Bu:return Object(s.a)(Object(s.a)({},e),{},{docksData:Object(s.a)(Object(s.a)({},e.docksData),{},Object(D.a)({},a.dockType,{data:[],fetching:!0}))});case Hu:return Object(s.a)(Object(s.a)({},e),{},{docksData:Object(s.a)(Object(s.a)({},e.docksData),{},Object(D.a)({},a.dockType,{data:a.data,fetching:!1}))});case Gu:return Object(s.a)(Object(s.a)({},e),{},{docksData:{trainingPhrases:{fetching:!1,data:[]},responses:{fetching:!1,data:[]}}});case Vu:return Object(s.a)(Object(s.a)({},e),{},{docksData:Object(s.a)(Object(s.a)({},e.docksData),{},Object(D.a)({},a.dockType,{fetching:!1,data:[].concat(Object(u.a)(a.data),Object(u.a)(e.docksData[a.dockType].data))}))});case zu:return Object(s.a)(Object(s.a)({},e),{},{docksData:Object(s.a)(Object(s.a)({},e.docksData),{},Object(D.a)({},a.dockType,{fetching:!1,data:e.docksData[a.dockType].data.map((function(e){return e._id!==a.data._id?e:a.data}))}))});case qu:return Object(s.a)(Object(s.a)({},e),{},{docksData:Object(s.a)(Object(s.a)({},e.docksData),{},Object(D.a)({},a.dockType,{fetching:!1,data:e.docksData[a.dockType].data.filter((function(e){return e._id!==a.id}))}))});case fu:return Object(s.a)(Object(s.a)({},e),{},{unsavedStory:!1,storyData:a.originalStory});default:return Object(s.a)({},e)}},Ij={intents:[],intentsFetched:!1,utterances:[],utterancesFetched:!1,selectedComponent:0,selectedInstanceName:"",fetchingInstanceDetails:!1,instanceDetails:[],generatedPhrases:[],slots:[],entities:[],slotsFetched:!1,httpActions:[],httpActionsFetched:!1,customActions:[],customActionsFetched:!1,showNewHTTPActionForm:!1,showNewSlotForm:!1,trainingExampleSearchResults:[],slotsSetActions:[],slotsSetActionsFetched:!1,showNewSlotsResetForm:!1,slotMappings:[],slotMappingsFetched:!1,showNewSlotsMappingForm:!1,emailActions:[],emailActionsFetched:!1,showNewEmailActionForm:!1,emailActionLoader:!1,googleActions:[],googleActionsFetched:!1,showNewGoogleActionForm:!1},Dj=function(){var e,t,n,a,c,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ij,r=arguments.length>1?arguments[1]:void 0,l=r.type,d=r.payload;switch(l){case W:return Object(s.a)(Object(s.a)({},i),{},{intents:d,intentsFetched:!0});case K:var m=x(i.intents,"name",d.intent);return Object(s.a)(Object(s.a)({},i),{},{intents:m,selectedInstanceName:d.intent===i.selectedInstanceName?"":i.selectedInstanceName,instanceDetails:d.intent===i.selectedInstanceName?[]:i.instanceDetails});case Y:var b=x(i.utterances,"name",d.utterance.name);return Object(s.a)(Object(s.a)({},i),{},{utterances:b,selectedInstanceName:d.utterance.name===i.selectedInstanceName?"":i.selectedInstanceName,instanceDetails:d.utterance.name===i.selectedInstanceName?[]:i.instanceDetails});case Q:return Object(s.a)(Object(s.a)({},i),{},{utterances:d,utterancesFetched:!0});case J:return Object(s.a)(Object(s.a)({},i),{},{selectedComponent:d.selectedComponent,selectedInstanceName:"",instanceDetails:[]});case Z:return Object(s.a)(Object(s.a)({},i),{},{selectedInstanceName:d.selectedInstanceName===i.selectedInstanceName?"":d.selectedInstanceName,instanceDetails:d.selectedInstanceName===i.selectedInstanceName?[]:i.instanceDetails});case X:return Object(s.a)(Object(s.a)({},i),{},{fetchingInstanceDetails:!0});case $:return Object(s.a)(Object(s.a)({},i),{},{fetchingInstanceDetails:!1,instanceDetails:d.instanceDetails,showNewHTTPActionForm:!1,showNewSlotForm:!1,showNewSlotsResetForm:!1,showNewSlotsMappingForm:!1,showNewEmailActionForm:!1,showNewGoogleActionForm:!1});case ee:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:[].concat(Object(u.a)(d.data),Object(u.a)(i.instanceDetails))});case te:return Object(s.a)(Object(s.a)({},i),{},{generatedPhrases:d.data});case ne:return Object(s.a)(Object(s.a)({},i),{},{httpActions:d.httpActions,httpActionsFetched:!0});case ae:return Object(s.a)(Object(s.a)({},i),{},{slots:d.slots,slotsFetched:!0});case we:return Object(s.a)(Object(s.a)({},i),{},{emailActions:d.emailActions,emailActionsFetched:!0});case De:return Object(s.a)(Object(s.a)({},i),{},{googleActions:d.googleActions,googleActionsFetched:!0});case ce:return Object(s.a)(Object(s.a)({},i),{},{entities:d.entities,entitiesFetched:!0});case se:return Object(s.a)(Object(s.a)({},i),{},{customActions:d.customActions,customActionsFetched:!0});case le:return Object(s.a)(Object(s.a)({},i),{},{slotsSetActions:d.slotsSetActions,slotsSetActionsFetched:!0});case ie:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.instanceDetails.map((function(e){return e._id!==d._id?e:d}))});case re:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.instanceDetails.filter((function(e){return e._id!==d.id}))});case je:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.selectedInstanceName===d.actionName?[]:i.instanceDetails,selectedInstanceName:i.selectedInstanceName===d.actionName?"":i.selectedInstanceName});case be:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:d.data,selectedInstanceName:null===(e=d.data)||void 0===e?void 0:e.action_name});case pe:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:d.data,selectedInstanceName:null===(t=d.data)||void 0===t?void 0:t.name,showNewSlotsResetForm:!1});case Ne:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.selectedInstanceName===d.name?[]:i.instanceDetails,selectedInstanceName:i.selectedInstanceName===d.name?"":i.selectedInstanceName,showNewSlotsResetForm:!1});case ge:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.selectedInstanceName===d.slotName?[]:i.instanceDetails,selectedInstanceName:i.selectedInstanceName===d.slotName?"":i.selectedInstanceName});case ve:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:d.data,selectedInstanceName:null===(n=d.data)||void 0===n?void 0:n.name});case Ce:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.selectedInstanceName===d.actionName?[]:i.instanceDetails,selectedInstanceName:i.selectedInstanceName===d.actionName?"":i.selectedInstanceName});case ke:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:d.data,selectedInstanceName:null===(a=d.data)||void 0===a?void 0:a.action_name});case Ie:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.selectedInstanceName===d.actionName?[]:i.instanceDetails,selectedInstanceName:i.selectedInstanceName===d.actionName?"":i.selectedInstanceName});case Fe:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:d.data,selectedInstanceName:null===(c=d.data)||void 0===c?void 0:c.name});case ye:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:i.selectedInstanceName===d.slotName?[]:i.instanceDetails,selectedInstanceName:i.selectedInstanceName===d.slotName?"":i.selectedInstanceName});case xe:return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:d.data,selectedInstanceName:null===(o=d.data)||void 0===o?void 0:o.slot});case he:return Object(s.a)(Object(s.a)({},i),{},{showNewHTTPActionForm:d.showFlag,instanceDetails:[],selectedInstanceName:""});case fe:return Object(s.a)(Object(s.a)({},i),{},{showNewSlotForm:d.showFlag,instanceDetails:[],selectedInstanceName:""});case Oe:return Object(s.a)(Object(s.a)({},i),{},{showNewSlotsResetForm:d.showFlag,instanceDetails:[],selectedInstanceName:""});case me:return Object(s.a)(Object(s.a)({},i),{},{showNewSlotsMappingForm:d.showFlag,instanceDetails:[],selectedInstanceName:""});case Ae:return Object(s.a)(Object(s.a)({},i),{},{showNewEmailActionForm:d.showFlag,instanceDetails:[],selectedInstanceName:""});case Re:return Object(s.a)(Object(s.a)({},i),{},{showNewGoogleActionForm:d.showFlag,instanceDetails:[],selectedInstanceName:""});case Se:return Object(s.a)(Object(s.a)({},i),{},{trainingExampleSearchResults:d.searchResultList});case Te:return Object(s.a)(Object(s.a)({},i),{},{trainingExampleSearchResults:[]});case oe:var p=i.slots.find((function(e){return e.name===d.slotName}));return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:p,showNewSlotForm:!1});case de:return Object(s.a)(Object(s.a)({},i),{},{slotMappings:d.slotMappings,slotMappingsFetched:!0});case ue:var j=i.slotMappings.find((function(e){return e.slot===d.slotName}));return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:j,showNewSlotsMappingForm:!1});case _e:var h=i.emailActions.find((function(e){return e.action_name===d.emailAction}));return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:h,showNewEmailActionForm:!1});case Pe:var f=i.googleActions.find((function(e){return e.name===d.googleAction}));return Object(s.a)(Object(s.a)({},i),{},{instanceDetails:f,showNewGoogleActionForm:!1});case Ee:return Object(s.a)(Object(s.a)({},i),{},{emailActionLoader:d.emailActionLoader});default:return Object(s.a)({},i)}},Pj={trainingHistory:[],trainingHistoryFetched:!1,invalidTrainingData:{},showInvalidTrainingDataDialog:!1,showUnsavedStoryDialog:!1},Rj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pj,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Gb:return Object(s.a)(Object(s.a)({},e),{},{trainingHistory:[],trainingHistoryFetched:!1});case Mb:return Object(s.a)(Object(s.a)({},e),{},{trainingHistory:a.trainingHistory,trainingHistoryFetched:!0});case Bb:return Object(s.a)(Object(s.a)({},e),{},{invalidTrainingData:a.invalidTrainingData,showInvalidTrainingDataDialog:!0,showUnsavedStoryDialog:!1});case Hb:return Object(s.a)(Object(s.a)({},e),{},{showInvalidTrainingDataDialog:!1,showUnsavedStoryDialog:!1});case Vb:return Object(s.a)(Object(s.a)({},e),{},{showUnsavedStoryDialog:!0});default:return Object(s.a)({},e)}};Xp.register("global",Sj),Xp.register("auth",cj),Xp.register("chat",lj),Xp.register("bots",sj),Xp.register("fileUpload",fj),Xp.register("stories",Aj),Xp.register("story",Fj),Xp.register("storyComponents",Dj),Xp.register("trainBot",Rj),Xp.register("chatHistory",bj),Xp.register("client",uj),Xp.register("logs",kj),Xp.register("admin",ej),Xp.register("analytics",nj),Xp.register("modelTesting",wj),Xp.register("config",jj),Xp.register("form",yj);var Lj={},Uj=function(e){var t=Object.keys(e);Object.keys(Lj).forEach((function(n){-1===t.indexOf(n)&&(e[n]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e})}));var n=Object(Jp.combineReducers)(e);return function(e,t){if("BOT_CHANGED"===t.type){var a=e;e={auth:a.auth,global:a.global,bots:a.bots}}return n(e,t)}},Mj=Uj(Xp.getReducers()),Bj=function(e){var t=[Zp.a];return Object(Jp.createStore)(Mj,e,Jp.applyMiddleware.apply(void 0,t))};Xp.setChangeListener((function(e){Bj.replaceReducer(Uj(e))}));var Hj=Bj,Gj=n(22),Vj=n.n(Gj);n(271);String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){var n=this.replace(e,t);return n.indexOf(e)>=0&&(n=n.replaceAll(e,t)),n}),fetch("/data/AppProps.json").then((function(e){return e.json()})).then((function(e){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).server&&(e.server=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).server),function(e){if(e)for(var t in e)j[t]=e[t]}(e)})).then((function(){if(window.addEventListener("storage",(function(e){"user"===e.key&&location.reload()})),j.apmServerURL&&j.apmServiceName)Object(o.a)({serviceName:j.apmServiceName,serverUrl:j.apmServerURL,serviceVersion:""});Vj.a.render(Object(f.jsx)(aa.a,{store:Hj(),children:Object(f.jsx)(_c.d,{history:I,children:Object(f.jsx)(Qp,{})})}),document.getElementById("root"))})).catch((function(e){console.log("Fetch Error :-S",e)}))}},[[272,1,2]]]);